!function(e){var r={};function n(t){if(r[t])return r[t].exports;var i=r[t]={i:t,l:!1,exports:{}};return e[t].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=r,n.d=function(e,r,t){n.o(e,r)||Object.defineProperty(e,r,{enumerable:!0,get:t})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,r){if(1&r&&(e=n(e)),8&r)return e;if(4&r&&"object"===typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(n.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&r&&"string"!=typeof e)for(var i in e)n.d(t,i,function(r){return e[r]}.bind(null,i));return t},n.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(r,"a",r),r},n.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},n.p="/tls-investment-advisor/",n(n.s=0)}([function(e,r,n){"use strict";function t(e,r){(null==r||r>e.length)&&(r=e.length);for(var n=0,t=new Array(r);n<r;n++)t[n]=e[n];return t}function i(e,r){if(e){if("string"===typeof e)return t(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?t(e,r):void 0}}function o(e){return function(e){if(Array.isArray(e))return t(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||i(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,r){if(null==e)return{};var n,t,i=function(e,r){if(null==e)return{};var n,t,i={},o=Object.keys(e);for(t=0;t<o.length;t++)n=o[t],r.indexOf(n)>=0||(i[n]=e[n]);return i}(e,r);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(t=0;t<o.length;t++)n=o[t],r.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function c(e,r,n){return r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function u(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);r&&(t=t.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),n.push.apply(n,t)}return n}function s(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?u(Object(n),!0).forEach((function(r){c(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))}))}return e}function f(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],t=!0,i=!1,o=void 0;try{for(var a,c=e[Symbol.iterator]();!(t=(a=c.next()).done)&&(n.push(a.value),!r||n.length!==r);t=!0);}catch(u){i=!0,o=u}finally{try{t||null==c.return||c.return()}finally{if(i)throw o}}return n}}(e,r)||i(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}n.r(r),n.d(r,"prepare",(function(){return T})),n.d(r,"preprocess",(function(){return w})),n.d(r,"process",(function(){return M})),n.d(r,"clean",(function(){return G}));var p,l,m,v,d,h=[{name:"Bank of Stineford",price:4e5,profits:24e4},{name:"Stineford Weapons Store",price:2e5,profits:75e3},{name:"Trading Pillar Rights",price:3e5,profits:1e5},{name:"Stineford Succubus Tower",price:8e5,social:2},{name:"Yhilini Airship Fleet",price:1e6,profits:1e5},{name:"Min's Trade Route",price:4e5,profits:185e3,givini:1},{name:"Yhilini Succubi Trade",price:function(e){return e.chapter3Infrastructure?4e5:55e4},profits:2e5},{name:"Yhilini Brothel Reform",price:25e3,profits:35e3},{name:"Premium Steel Owner",price:function(e){return e.chapter1Steel?75e3:1e5},profits:1e4},{name:"Yhilini Bank Core Lender",price:function(e){return e.chapter1Bank?45e4:5e5},profits:15e4},{name:"Mercenary Offices",price:function(e){return e.chapter3Infrastructure?15e4:25e4},profits:15e3,social:2},{name:"Theltiar Rentals",price:425e3,profits:95e3,social:1},{name:"Theltiar Flowhouse",price:25e4,profits:8e4},{name:"Denmiel Mushrooms",price:105e3,profits:4e4},{name:"Denmiel Archives",price:25e4,profits:2e4,social:1},{name:"Eustrin Guild",price:6e5,profits:25e4},{name:"Succubus Armorer",price:1e5,profits:1e4},{name:"Gasm Falls Trade",price:275e3,profits:11e4},{name:"Givini Tunnels",price:15e5,profits:3e5,givini:3,takkan:3},{name:"Lustlord Temples",price:8e5,profits:5e4},{name:"Succubus Band Tour",price:1e5,profits:2e3,givini:2,social:1,takkan:2},{name:"Gasm Falls Water Cleanup",price:25e4,social:1},{name:"Orc Tunnels",price:2e5,social:1},{name:"Givini Smithing",price:2e5,profits:1e4,givini:2},{name:"Givini Orc Merchant",price:function(e){var r=e.giviniStart,n=void 0===r?0:r;return n<20?1e5:n<25?2e5:n<35?3e5:n<45?4e5:5e5},profits:function(e){var r=e.giviniStart,n=void 0===r?0:r,t=e.giviniExtra,i=n+(void 0===t?0:t)+e.investments.reduce((function(e,r){return e+((null===r||void 0===r?void 0:r.givini)||0)}),0);return i<20?25e3:i<30?5e4:i<40?1e5:i<50?15e4:2e5},givini:5},{name:"Givini Teahouse Chain",price:275e3,profits:3e4,givini:2,social:1,takkan:1},{name:"Bank of Givini",price:35e4,profits:3e5,givini:5,takkan:2},{name:"Givini Mage Guild",price:1e6,profits:4e4,givini:5},{name:"War Monument",price:1e6,givini:10,social:3,takkan:2},{name:"Tarran'Kan Housing + Tarran'Kan Trade Upgrade",price:11e5,profits:1e5,social:1,takkan:7},{name:"Hall of Mental Strength",price:2e5,profits:25e3,social:1,takkan:3},{name:"Booze Shack",price:15e4,profits:5e4,social:1,takkan:2},{name:"Tradesmasher's Guild",price:35e4,profits:function(e){var r=e.investments,n=e.previousInvestments,t=1+[].concat(o(n),o(r.map((function(e){return e.name})))).filter((function(e){return["Cee'Kan Shipping","Lonely Sailor Services","Givini Orc Merchant","Orcish Democracy","Orc Pools Upgrade"].includes(e)})).length;return t<2?5e4:2===t?75e3:3===t?125e3:4===t?15e4:5===t?175e3:2e5},takkan:5},{name:"Lonely Sailor Services",price:25e4,profits:1e5,social:1,takkan:5},{name:"Cee'Kan Shipping",price:7e5,profits:2e5,takkan:5},{name:"Orcish Democracy",price:1e6,social:5,takkan:10},{name:"Imp Offices",price:1e5,social:1,takkan:1},{name:"Orc Pools Upgrade",price:5e5,social:2,takkan:5},{name:"Givini Banners + Givini Dragon Statue",price:3500,givini:1},{name:"Orcish Drake Statue + Orcish Gargoyle Statue + Orcish Golden Drake Statue",price:8e3,takkan:1}],y=h.filter((function(e){return"function"===typeof e.profits})),g=function(e,r){var n=r.mandatory,t=void 0===n?[]:n,i=e.filter((function(e){var r=e.name;return!t.includes(r)})).sort((function(e,r){var n=e.price,t=void 0===n?0:n,i=r.price;return(void 0===i?0:i)-t})),o={};o[function(){var r=e.filter((function(e){var r=e.name;return t.includes(r)}));return r.length>0?r[r.length-1].name:"default"}()]=i.slice(0);for(var a=0;a<i.length;a++)o[i[a].name]=i.slice(a+1);return o},b=function(e,r){var n=r.mandatory,t=void 0===n?[]:n,i=r.atLeastOne,a=void 0===i?[]:i,c=e.filter((function(e){var r=e.name;return t.includes(r)}));return a.length>0&&!t.some((function(e){return a.includes(e)}))?a.map((function(r){var n=[].concat(o(c),[e.find((function(e){return e.name===r}))]);return[n,n.reduce((function(e,r){return e+r.price}),0)]})):[[c,c.reduce((function(e,r){return e+r.price}),0)]]},O=function(e){for(var r=e.combsNMinusOne,n=e.maxPrice,t=e.cheaperThan,i=[],a=0;a<r.length;a++)for(var c,u=f(r[a],2),s=u[0],p=u[1],l=t[(null===(c=s[s.length-1])||void 0===c?void 0:c.name)||"default"],m=0;m<l.length;m++){var v=l[m],d=p+v.price;d>n||i.push([[].concat(o(s),[v]),d])}return i},S=function(e,r){return"function"===typeof e?e(r):e||0},k=function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=s(s({},r),{},{investments:e}),t=0,i=0,o=0,a=0,c=[];return e.forEach((function(e){var r=S(e.profits,n);t+=e.price,i+=r,o+=e.social||0,a+=e.givini||0,c.push(s(s({},e),{},{profits:r}))})),y.forEach((function(e){var t;(null===r||void 0===r||null===(t=r.previousInvestments)||void 0===t?void 0:t.includes(e.name))&&(i+=e.profits(n)-e.profits(s(s({},n),{},{investments:[]})))})),{price:t,profits:i,social:o,givini:a,investments:c}},j=function(e){var r=e.current,n=e.candidate,t=e.otherRequirements,i=void 0===t?{}:t,o=(e.context,i.social),a=void 0===o?0:o,c=i.givini,u=void 0===c?0:c;return!(n.social<a)&&(!(n.givini<u)&&(!r||(n.profits>r.profits||n.profits===r.profits&&n.price<r.price)))},P=function(e){var r=e.money,n=e.otherRequirements,t=void 0===n?{}:n,i=a(e,["money","otherRequirements"]),o=i.previousInvestments,c=void 0===o?[]:o;return{money:r,otherRequirements:t,investments:h.filter((function(e){var r=e.name;return!c.includes(r)})).map((function(e){return s(s({},e),{},{price:S(e.price,i)})})),context:i}},T=function(e){var r,n=(null===(r=(p=P(e)).otherRequirements)||void 0===r?void 0:r.mandatory)||[];return v=g(p.investments,{mandatory:n}),d=b(p.investments,p.otherRequirements),l=o(d.map((function(e){return e[0]}))),m=null,p.investments.length-d[0][0].length},w=function(){d=O({combsNMinusOne:d,maxPrice:p.money,cheaperThan:v});for(var e=0;e<d.length;e++)l.push(d[e][0]);return d.length},M=function(e,r){for(var n=p,t=n.otherRequirements,i=n.context,o=e;o<r;o++){var a=l[o],c=k(a,i);j({current:m,candidate:c,otherRequirements:t,context:i})&&(m=c)}return m},G=function(){p=void 0,l=void 0,m=void 0,v=void 0,d=void 0};addEventListener("message",(function(e){var n,t=e.data,i=t.type,o=t.method,a=t.id,c=t.params;"RPC"===i&&o&&((n=r[o])?Promise.resolve().then((function(){return n.apply(r,c)})):Promise.reject("No such method")).then((function(e){postMessage({type:"RPC",id:a,result:e})})).catch((function(e){var r={message:e};e.stack&&(r.message=e.message,r.stack=e.stack,r.name=e.name),postMessage({type:"RPC",id:a,error:r})}))})),postMessage({type:"RPC",method:"ready"})}]);
//# sourceMappingURL=1886301eacf32740c8c2.worker.js.map