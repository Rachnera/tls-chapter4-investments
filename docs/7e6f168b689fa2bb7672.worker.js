!function(e){var n={};function r(t){if(n[t])return n[t].exports;var i=n[t]={i:t,l:!1,exports:{}};return e[t].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=e,r.c=n,r.d=function(e,n,t){r.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:t})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,n){if(1&n&&(e=r(e)),8&n)return e;if(4&n&&"object"===typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(r.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var i in e)r.d(t,i,function(n){return e[n]}.bind(null,i));return t},r.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(n,"a",n),n},r.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},r.p="/tls-investment-advisor/",r(r.s=0)}([function(e,n,r){"use strict";function t(e,n){(null==n||n>e.length)&&(n=e.length);for(var r=0,t=new Array(n);r<n;r++)t[r]=e[r];return t}function i(e,n){if(e){if("string"===typeof e)return t(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?t(e,n):void 0}}function o(e){return function(e){if(Array.isArray(e))return t(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||i(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,n){if(null==e)return{};var r,t,i=function(e,n){if(null==e)return{};var r,t,i={},o=Object.keys(e);for(t=0;t<o.length;t++)r=o[t],n.indexOf(r)>=0||(i[r]=e[r]);return i}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(t=0;t<o.length;t++)r=o[t],n.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function c(e,n,r){return n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function u(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,t)}return r}function s(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?u(Object(r),!0).forEach((function(n){c(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}function f(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var r=[],t=!0,i=!1,o=void 0;try{for(var a,c=e[Symbol.iterator]();!(t=(a=c.next()).done)&&(r.push(a.value),!n||r.length!==n);t=!0);}catch(u){i=!0,o=u}finally{try{t||null==c.return||c.return()}finally{if(i)throw o}}return r}}(e,n)||i(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}r.r(n),r.d(n,"prepare",(function(){return T})),r.d(n,"preprocess",(function(){return w})),r.d(n,"process",(function(){return M})),r.d(n,"clean",(function(){return R}));var l,p,m,v,d,h=[{name:"Bank of Stineford",price:4e5,profits:24e4},{name:"Stineford Weapons Store",price:2e5,profits:75e3},{name:"Trading Pillar Rights",price:3e5,profits:1e5},{name:"Stineford Succubus Tower",price:8e5,social:2},{name:"Yhilini Airship Fleet",price:1e6,profits:1e5},{name:"Min's Trade Route",price:4e5,profits:185e3,givini:1},{name:"Yhilini Succubi Trade",price:function(e){return e.chapter3Infrastructure?4e5:55e4},profits:2e5},{name:"Yhilini Brothel Reform",price:25e3,profits:35e3},{name:"Premium Steel Owner",price:function(e){return e.chapter1Steel?75e3:1e5},profits:1e4},{name:"Yhilini Bank Core Lender",price:45e4,profits:15e4},{name:"Mercenary Offices",price:function(e){return e.chapter3Infrastructure?15e4:25e4},profits:15e3,social:2},{name:"Theltiar Rentals",price:425e3,profits:95e3,social:1},{name:"Theltiar Flowhouse",price:25e4,profits:8e4},{name:"Denmiel Mushrooms",price:105e3,profits:4e4},{name:"Denmiel Archives",price:25e4,profits:2e4,social:1},{name:"Eustrin Guild",price:6e5,profits:25e4},{name:"Succubus Armorer",price:1e5,profits:1e4},{name:"Gasm Falls Trade",price:275e3,profits:11e4},{name:"Givini Tunnels",price:15e5,profits:3e5,givini:3,takkan:3},{name:"Lustlord Statues + Lustlord Temples",price:8e5,profits:5e4},{name:"Succubus Band Tour",price:1e5,profits:2e3,givini:2,social:1,takkan:2},{name:"Gasm Falls Water Cleanup",price:25e4,social:1},{name:"Orc Tunnels",price:2e5,social:1},{name:"Givini Smithing",price:2e5,profits:1e4,givini:2},{name:"Givini Orc Merchant",price:function(e){var n=e.giviniStart,r=void 0===n?0:n;return r<20?1e5:r<25?2e5:r<35?3e5:r<45?4e5:5e5},profits:function(e){var n=e.giviniStart,r=void 0===n?0:n,t=e.giviniExtra,i=r+(void 0===t?0:t)+e.investments.reduce((function(e,n){return e+((null===n||void 0===n?void 0:n.givini)||0)}),0);return i<20?25e3:i<30?5e4:i<40?1e5:i<50?15e4:2e5},givini:5},{name:"Givini Teahouse Chain",price:275e3,profits:3e4,givini:2,social:1,takkan:1},{name:"Bank of Givini",price:35e4,profits:3e5,givini:5,takkan:2},{name:"Givini Mage Guild",price:1e6,profits:4e4,givini:5},{name:"War Monument",price:1e6,givini:10,social:3,takkan:2},{name:"Tarran'Kan Housing + Tarran'Kan Trade Upgrade",price:11e5,profits:1e5,social:1,takkan:7},{name:"Hall of Mental Strength",price:2e5,profits:25e3,social:1,takkan:3},{name:"Booze Shack",price:15e4,profits:5e4,social:1,takkan:2},{name:"Tradesmasher's Guild",price:35e4,profits:function(e){var n=e.investments,r=e.previousInvestments,t=1+[].concat(o(void 0===r?[]:r),o(n.map((function(e){return e.name})))).filter((function(e){return["Cee'Kan Shipping","Lonely Sailor Services","Givini Orc Merchant","Orcish Democracy","Orc Pools Upgrade"].includes(e)})).length;return t<2?5e4:2===t?75e3:3===t?125e3:4===t?15e4:5===t?175e3:2e5},takkan:5},{name:"Lonely Sailor Services",price:25e4,profits:1e5,social:1,takkan:5},{name:"Cee'Kan Shipping",price:7e5,profits:2e5,takkan:5},{name:"Orcish Democracy",price:1e6,social:5,takkan:10},{name:"Imp Offices",price:1e5,social:1,takkan:1},{name:"Orc Pools Upgrade",price:5e5,social:2,takkan:5},{name:"Givini Banners + Givini Dragon Statue",price:3500,givini:1},{name:"Orcish Drake Statue + Orcish Gargoyle Statue + Orcish Golden Drake Statue",price:8e3,takkan:1}],y=h.filter((function(e){return"function"===typeof e.profits})),g=function(e,n){var r=n.mandatory,t=void 0===r?[]:r,i=e.filter((function(e){var n=e.name;return!t.includes(n)})).sort((function(e,n){var r=e.price,t=void 0===r?0:r,i=n.price;return(void 0===i?0:i)-t})),o={};o[function(){var n=e.filter((function(e){var n=e.name;return t.includes(n)}));return n.length>0?n[n.length-1].name:"default"}()]=i.slice(0);for(var a=0;a<i.length;a++)o[i[a].name]=i.slice(a+1);return o},b=function(e,n){var r=n.mandatory,t=void 0===r?[]:r,i=n.atLeastOne,a=void 0===i?[]:i,c=e.filter((function(e){var n=e.name;return t.includes(n)}));return a.length>0&&!t.some((function(e){return a.includes(e)}))?a.map((function(n){var r=[].concat(o(c),[e.find((function(e){return e.name===n}))]);return[r,r.reduce((function(e,n){return e+n.price}),0)]})):[[c,c.reduce((function(e,n){return e+n.price}),0)]]},O=function(e){for(var n=e.combsNMinusOne,r=e.maxPrice,t=e.cheaperThan,i=[],a=0;a<n.length;a++)for(var c,u=f(n[a],2),s=u[0],l=u[1],p=t[(null===(c=s[s.length-1])||void 0===c?void 0:c.name)||"default"],m=0;m<p.length;m++){var v=p[m],d=l+v.price;d>r||i.push([[].concat(o(s),[v]),d])}return i},k=function(e,n){return"function"===typeof e?e(n):e||0},S=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=s(s({},n),{},{investments:e}),t=0,i=0,o=0,a=0,c=0,u=[];return e.forEach((function(e){var n=k(e.profits,r);t+=e.price,i+=n,o+=e.social||0,a+=e.givini||0,c+=e.takkan||0,u.push(s(s({},e),{},{profits:n}))})),y.forEach((function(e){var t;(null===n||void 0===n||null===(t=n.previousInvestments)||void 0===t?void 0:t.includes(e.name))&&(i+=e.profits(r)-e.profits(s(s({},r),{},{investments:[]})))})),{price:t,profits:i,social:o,givini:a,takkan:c,investments:u}},j=function(e){var n=e.current,r=e.candidate,t=e.otherRequirements,i=void 0===t?{}:t,a=e.context,c=void 0===a?{}:a,u=i.social,s=void 0===u?0:u,f=i.givini,l=void 0===f?0:f,p=i.orcCouncil;return!(r.social<s)&&(!(r.givini<l)&&(!(p&&function(e){var n=e.investments,r=void 0===n?[]:n,t=e.takkan,i=e.researches,o=5,a=2;return t>=40?o+=4:t>=30?(o+=3,a+=1):t>=20?(o+=2,a+=2):t>=10?(o+=1,a+=3):a+=4,(void 0===i?[]:i).includes("orc")?o+=1:a+=1,o+=r.filter((function(e){return["Orc Pools Upgrade","Tarran'Kan Housing + Tarran'Kan Trade Upgrade","Hall of Mental Strength","Imp Offices"].includes(e)})).length,r.includes("Orcish Democracy")&&(o=2),o/(o+a)}({investments:[].concat(o(c.previousInvestments||[]),o(r.investments.map((function(e){return e.name})))),takkan:c.takkan+r.takkan,researches:c.completedResearch})<p)&&(!n||(r.profits>n.profits||r.profits===n.profits&&r.price<n.price))))},P=function(e){var n=e.money,r=e.otherRequirements,t=void 0===r?{}:r,i=a(e,["money","otherRequirements"]),o=i.previousInvestments,c=void 0===o?[]:o;return{money:n,otherRequirements:t,investments:h.filter((function(e){var n=e.name;return!c.includes(n)})).map((function(e){return s(s({},e),{},{price:k(e.price,i)})})),context:i}},T=function(e){var n,r=(null===(n=(l=P(e)).otherRequirements)||void 0===n?void 0:n.mandatory)||[];return v=g(l.investments,{mandatory:r}),d=b(l.investments,l.otherRequirements),p=o(d.map((function(e){return e[0]}))),m=null,l.investments.length-d[0][0].length},w=function(){d=O({combsNMinusOne:d,maxPrice:l.money,cheaperThan:v});for(var e=0;e<d.length;e++)p.push(d[e][0]);return d.length},M=function(e,n){for(var r=l,t=r.otherRequirements,i=r.context,o=e;o<n;o++){var a=p[o],c=S(a,i);j({current:m,candidate:c,otherRequirements:t,context:i})&&(m=c)}return m},R=function(){l=void 0,p=void 0,m=void 0,v=void 0,d=void 0};addEventListener("message",(function(e){var r,t=e.data,i=t.type,o=t.method,a=t.id,c=t.params;"RPC"===i&&o&&((r=n[o])?Promise.resolve().then((function(){return r.apply(n,c)})):Promise.reject("No such method")).then((function(e){postMessage({type:"RPC",id:a,result:e})})).catch((function(e){var n={message:e};e.stack&&(n.message=e.message,n.stack=e.stack,n.name=e.name),postMessage({type:"RPC",id:a,error:n})}))})),postMessage({type:"RPC",method:"ready"})}]);
//# sourceMappingURL=7e6f168b689fa2bb7672.worker.js.map