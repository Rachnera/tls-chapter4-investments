{"version":3,"sources":["worker.js","data/investments.js","components/form/Select.js","components/form/Banned.js","components/form/Mandatory.js","first-round/Form.js","misc.js","results/Ledger.js","results/Addition.js","data/givini.js","first-round/results/Givini.js","data/takkan.js","first-round/results/Takkan.js","first-round/results/index.js","results/ScrollTo.js","first-round/index.js","Disclaimer.js","Loading.js","Failure.js","second-round/Headquarters.js","second-round/Form.js","second-round/results/Givini.js","second-round/results/Takkan.js","second-round/results/index.js","second-round/index.js","third-round/Form.js","third-round/Result.js","third-round/index.js","App.js","reportWebVitals.js","index.js"],"names":["addMethods","methods","module","exports","w","Worker","name","investments","price","profits","social","givini","chapter3Infrastructure","chapter1Steel","gawnfallMother","takkan","lustlordStatuesBought","giviniStart","newGiviniScore","giviniExtra","reduce","acc","investment","gawnfallTakkan","previousInvestments","guildScore","map","filter","includes","length","ardfordOpen","gawnfallArdford","ifArdfordOpen","params","Infinity","postGawnfallInvestments","CustomSelect","key","label","tooltip","purchased","form","list","useEffect","setFieldsValue","getFieldValue","inv","Item","options","sort","a","b","localeCompare","value","mode","Banned","Select","Mandatory","Title","Typography","possiblePrevious","initialValues","previous","remainingPron","baseProfit","strategy","startingSocial","merchantSolution","jhenno","magicalItems","mandatory","research","banned","requiredRule","required","message","CustomForm","onFinish","loading","Form","useForm","useState","setPrevious","setMandatory","setStrategy","onValuesChange","_","allValues","className","level","rules","valuePropName","title","type","htmlType","buildFinalStandings","initialStandings","investmentChanges","nonInvestmentChanges","finalStandings","forEach","money","nF","number","toLocaleString","numberColWidth","NumberCell","children","formattedNumber","format","Math","abs","Investments","dataSource","data","columns","dataIndex","sorter","render","width","pagination","Others","Ledger","sum","extraProfits","category","otherList","bordered","expandable","expandedRowRender","rowExpandable","defaultExpandAllRows","summary","Summary","Row","Cell","colSpan","Addition","startingValue","dataSources","index","scope","values","explanation","join","toString","val","preliminaryChanges","Boolean","baseValue","chapter3Investments","roundOneChanges","roundOneValue","roundTwoChanges","merchantSolution2","roundTwoValue","roundThreeChanges","merchantSolution3","gawnfallMercantile","roundThreeValue","Givini","roundOneInvestments","decisions","Takkan","Result","ScrollTo","resultRef","useRef","current","scrollIntoView","behavior","ref","socialRequirement","buildNonInvestmentsChange","nonInvestmentChangesList","giviniRoundOneValue","takkanRoundOneValue","compute","runInWoker","misc","otherRequirements","atLeastOne","undefined","setResult","setError","giviniBaseValue","result","FirstRound","Disclaimer","href","description","showIcon","closable","Loading","combinationsCount","progress","investmentsCount","preprogress","abort","visible","centered","footer","percent","round","danger","icon","PoweroffOutlined","onClick","Failure","status","base","magic","military","defense","subsitute","plusTenMilitary","plusFifteenMilitary","renderPlus","Error","Headquarters","source","headquarters","orcCouncil","firstRoundDecisions","purchasedInvestments","hq","setHq","split","x","parseInt","previousResearch","headquartersPrice","roundTwoInvestments","Text","roundOneResearch","takkanScore","councilResult","researches","yes","no","council","toFixed","roundOneDecisions","initialSocial","firstRoundResult","headquartersUpgradesPrice","giviniRoundTwoValue","takkanRoundTwoValue","completedResearch","SecondRound","mandatory1","yelarel","vera","gawnfallHigh","reserves","extra_reserves","setMandatory1","lockedInvestments","setLockedInvestments","availableResearch","Group","preGawnfallInvestments","filterInvestmentsByCountry","country","giviniRoundThreeChanges","takkanRoundThreeChanges","gawnfallSocial","secondRoundResult","mandatory2","push","mercantileMoney","preInvestmentsOrii","giviniRoundThreeValue","takkanRoundThreeValue","max","reserve","allInvestments","postInvestmentsOrri","orri","ThirdRound","dumbCache","dumbKey","JSON","stringify","App","workerInstance","setWorkerInstance","setLoading","setCombinationsCount","setProgress","setInvestmentsCount","setPreprogress","setFirstRoundResult","setSecondRoundResult","thirdRoundResult","setThirdRoundResult","error","worker","terminate","cacheKey","prepare","i","preprocess","batchSize","ceil","end","min","process","clean","buildRunInWorker","newWorkerInstance","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.29debfe6.chunk.js","sourcesContent":["\n\t\t\t\tvar addMethods = require(\"../node_modules/workerize-loader/dist/rpc-wrapper.js\")\n\t\t\t\tvar methods = [\"prepare\",\"preprocess\",\"process\",\"clean\"]\n\t\t\t\tmodule.exports = function() {\n\t\t\t\t\tvar w = new Worker(__webpack_public_path__ + \"e203fc94e9020fac143d.worker.js\", { name: \"[hash].worker.js\" })\n\t\t\t\t\taddMethods(w, methods)\n\t\t\t\t\t\n\t\t\t\t\treturn w\n\t\t\t\t}\n\t\t\t","// Ref: https://thelastsovereign.miraheze.org/wiki/Investments\n\nconst investments = [\n  {\n    name: 'Bank of Stineford',\n    price: 400000,\n    profits: 240000,\n  },\n  {\n    name: 'Stineford Weapons Store',\n    price: 200000,\n    profits: 75000,\n  },\n  {\n    name: 'Trading Pillar Rights',\n    price: 300000,\n    profits: 100000,\n  },\n  {\n    name: 'Stineford Succubus Tower',\n    price: 800000,\n    social: 2,\n  },\n  {\n    name: 'Yhilini Airship Fleet',\n    price: 1000000,\n    profits: 100000,\n  },\n  {\n    name: \"Min's Trade Route\",\n    price: 400000,\n    profits: 185000,\n    givini: 1,\n  },\n  {\n    name: 'Yhilini Succubi Trade',\n    price: ({ chapter3Infrastructure }) =>\n      chapter3Infrastructure ? 400000 : 550000,\n    profits: 200000,\n  },\n  {\n    name: 'Yhilini Brothel Reform',\n    price: 25000,\n    profits: 35000,\n  },\n  {\n    name: 'Premium Steel Owner',\n    price: ({ chapter1Steel }) => (!!chapter1Steel ? 75000 : 100000),\n    profits: 10000,\n  },\n  {\n    name: 'Yhilini Bank Core Lender',\n    price: 450000,\n    profits: 150000,\n  },\n  {\n    name: 'Mercenary Offices',\n    price: ({ chapter3Infrastructure }) =>\n      chapter3Infrastructure ? 150000 : 250000,\n    profits: 15000,\n    social: 2,\n  },\n  {\n    name: 'Theltiar Rentals',\n    price: 425000,\n    profits: 95000,\n    social: 1,\n  },\n  {\n    name: 'Theltiar Flowhouse',\n    price: 250000,\n    profits: 80000,\n  },\n  {\n    name: 'Denmiel Mushrooms',\n    price: 105000,\n    profits: 40000,\n  },\n  {\n    name: 'Denmiel Archives',\n    price: ({ gawnfallMother }) => {\n      if (gawnfallMother === 'full_unlock') {\n        return 150000;\n      }\n      return 250000;\n    },\n    profits: 20000,\n    social: 1,\n  },\n  {\n    name: 'Eustrin Guild',\n    price: 600000,\n    profits: 250000,\n  },\n  {\n    name: 'Succubus Armorer',\n    price: 100000,\n    profits: 10000,\n  },\n  {\n    name: 'Gasm Falls Trade',\n    price: 275000,\n    profits: 110000,\n  },\n  {\n    name: 'Givini Tunnels',\n    price: 1500000,\n    profits: 300000,\n    givini: 3,\n    takkan: 3,\n  },\n  {\n    name: 'Lustlord Temples',\n    price: ({ lustlordStatuesBought }) => {\n      if (lustlordStatuesBought) {\n        return 750000;\n      }\n      return 50000 + 750000;\n    },\n    profits: 50000,\n  },\n  {\n    name: 'Succubus Band Tour',\n    price: 100000,\n    profits: 2000,\n    givini: 2,\n    social: 1,\n    takkan: 2,\n  },\n  {\n    name: 'Gasm Falls Water Cleanup',\n    price: 250000,\n    social: 1,\n  },\n  {\n    name: 'Orc Tunnels',\n    price: 200000,\n    social: 1,\n  },\n  {\n    name: 'Givini Smithing',\n    price: 200000,\n    profits: 10000,\n    givini: 2,\n  },\n  {\n    name: 'Givini Orc Merchant',\n    price: ({ giviniStart: newGiviniScore = 0 }) => {\n      if (newGiviniScore < 20) {\n        return 100000;\n      }\n      if (newGiviniScore < 25) {\n        return 200000;\n      }\n      if (newGiviniScore < 35) {\n        return 300000;\n      }\n      if (newGiviniScore < 45) {\n        return 400000;\n      }\n      return 500000;\n    },\n    profits: ({ giviniStart = 0, giviniExtra = 0, investments }) => {\n      const newGiviniScore =\n        giviniStart +\n        giviniExtra +\n        investments.reduce((acc, investment) => {\n          return acc + (investment?.givini || 0);\n        }, 0);\n      if (newGiviniScore < 20) {\n        return 25000;\n      }\n      if (newGiviniScore < 30) {\n        return 50000;\n      }\n      if (newGiviniScore < 40) {\n        return 100000;\n      }\n      if (newGiviniScore < 50) {\n        return 150000;\n      }\n      return 200000;\n    },\n    givini: 5,\n  },\n  {\n    name: 'Givini Teahouse Chain',\n    price: 275000,\n    profits: 30000,\n    givini: 2,\n    social: 1,\n    takkan: 1,\n  },\n  {\n    name: 'Bank of Givini',\n    price: 350000,\n    profits: 300000,\n    givini: 5,\n    takkan: 2,\n  },\n  {\n    name: 'Givini Mage Guild',\n    price: 1000000,\n    profits: 40000,\n    givini: 5,\n  },\n  {\n    name: 'War Monument',\n    price: 1000000,\n    givini: 10,\n    social: 3,\n    takkan: 2,\n  },\n  {\n    name: \"Tarran'Kan Housing + Tarran'Kan Trade Upgrade\",\n    price: ({ gawnfallTakkan }) => {\n      if (gawnfallTakkan === 'major') {\n        return 750000 + 100000;\n      }\n      if (gawnfallTakkan === 'minor') {\n        return 900000 + 100000;\n      }\n      return 1000000 + 100000;\n    },\n    profits: 50000 + 50000,\n    social: 1,\n    takkan: 5 + 2,\n  },\n  {\n    name: 'Hall of Mental Strength',\n    price: 200000,\n    profits: 25000,\n    social: 1,\n    takkan: 3,\n  },\n  {\n    name: 'Booze Shack',\n    price: 150000,\n    profits: 50000,\n    social: 1,\n    takkan: 2,\n  },\n  {\n    name: \"Tradesmasher's Guild\",\n    price: 350000,\n    profits: ({ investments, previousInvestments = [] }) => {\n      const guildScore =\n        1 +\n        [...previousInvestments, ...investments.map(({ name }) => name)].filter(\n          (name) => {\n            return [\n              \"Cee'Kan Shipping\",\n              'Lonely Sailor Services',\n              'Givini Orc Merchant',\n              'Orcish Democracy',\n              'Orc Pools Upgrade',\n            ].includes(name);\n          }\n        ).length;\n\n      if (guildScore < 2) {\n        return 50000;\n      }\n      if (guildScore === 2) {\n        return 75000;\n      }\n      if (guildScore === 3) {\n        return 125000;\n      }\n      if (guildScore === 4) {\n        return 150000;\n      }\n      if (guildScore === 5) {\n        return 175000;\n      }\n      return 200000;\n    },\n    takkan: 5,\n  },\n  {\n    name: 'Lonely Sailor Services',\n    price: 250000,\n    profits: 100000,\n    social: 1,\n    takkan: 5,\n  },\n  {\n    name: \"Cee'Kan Shipping\",\n    price: 700000,\n    profits: 200000,\n    takkan: 5,\n  },\n  {\n    name: 'Orcish Democracy',\n    price: 1000000,\n    social: 5,\n    takkan: 10,\n  },\n  {\n    name: 'Imp Offices',\n    price: 100000,\n    social: 1,\n    takkan: 1,\n  },\n  {\n    name: 'Orc Pools Upgrade',\n    price: 500000,\n    social: 2,\n    takkan: 5,\n  },\n  {\n    name: 'Givini Banners + Givini Dragon Statue',\n    price: 1000 + 2500,\n    givini: 1,\n  },\n  {\n    name: 'Orcish Drake Statue + Orcish Gargoyle Statue + Orcish Golden Drake Statue',\n    price: 1000 + 2000 + 5000,\n    takkan: 1,\n  },\n];\n\nconst ardfordOpen = ({ gawnfallArdford }) => {\n  return gawnfallArdford === 'resolved' || gawnfallArdford === 'overkill';\n};\n\nconst ifArdfordOpen = (price) => {\n  return (params) => (ardfordOpen(params) && price) || Infinity;\n};\n\nexport const postGawnfallInvestments = [\n  ...investments,\n  {\n    name: \"Tak'Kan Mine\",\n    price: ({ gawnfallTakkan }) => {\n      if (gawnfallTakkan === 'major') {\n        return 250000;\n      }\n      if (gawnfallTakkan === 'minor') {\n        return 500000;\n      }\n      return Infinity;\n    },\n    profits: 125000,\n    social: 1,\n    takkan: 5,\n  },\n  {\n    name: 'Ivalan Bank',\n    price: ifArdfordOpen(550000),\n    profits: 225000,\n  },\n  {\n    name: 'Mercenary Flotilla',\n    price: ifArdfordOpen(500000),\n    profits: 25000,\n  },\n  {\n    name: 'Sanitation Mages Guild',\n    price: ifArdfordOpen(100000),\n    profits: 5000,\n  },\n  {\n    name: 'Crystal Refiner',\n    price: ifArdfordOpen(400000),\n    profits: 55000,\n  },\n  {\n    name: 'Ardford Restaurant',\n    price: ifArdfordOpen(100000),\n    profits: (params) => {\n      const { investments, previousInvestments = [] } = params;\n      if (\n        ardfordOpen(params) &&\n        [\n          ...previousInvestments,\n          ...investments.map(({ name }) => name),\n        ].includes('Givini Teahouse Chain')\n      ) {\n        return 25000;\n      }\n      return 10000;\n    },\n  },\n];\n\nexport const getInvestments = (key) => {\n  if (key === 'gawnfall') {\n    return postGawnfallInvestments;\n  }\n  return investments;\n};\n\nexport default investments;\n","import { Form, Select } from 'antd';\nimport { getInvestments } from '../../data/investments';\nimport { useEffect } from 'react';\n\nconst CustomSelect = ({ name, label, tooltip, purchased, form, list }) => {\n  useEffect(() => {\n    form.setFieldsValue({\n      [name]: form\n        .getFieldValue(name)\n        .filter((inv) => !purchased.includes(inv)),\n    });\n  }, [form, purchased, name]);\n\n  return (\n    <Form.Item label={label} name={name} tooltip={tooltip}>\n      <Select\n        options={getInvestments(list)\n          .filter(({ name }) => !purchased.includes(name))\n          .sort(({ name: a }, { name: b }) => a.localeCompare(b))\n          .map(({ name }) => {\n            return {\n              label: name,\n              value: name,\n            };\n          })}\n        mode=\"multiple\"\n      />\n    </Form.Item>\n  );\n};\n\nexport default CustomSelect;\n","import Select from './Select';\n\nconst Banned = ({ purchased, form, list, tooltip }) => {\n  return (\n    <Select\n      form={form}\n      purchased={purchased}\n      label={`Investments you explicitly refuse to buy, for any reason`}\n      name=\"banned\"\n      tooltip={tooltip}\n      list={list}\n    />\n  );\n};\n\nexport default Banned;\n","import Select from './Select';\n\nconst Mandatory = ({ form, purchased, tooltip, label, list }) => {\n  return (\n    <Select\n      name=\"mandatory\"\n      form={form}\n      purchased={purchased}\n      label={label || `Investments you explicitly want to buy, for any reason`}\n      tooltip={tooltip}\n      list={list}\n    />\n  );\n};\n\nexport default Mandatory;\n","import {\n  Form,\n  Select,\n  InputNumber,\n  Button,\n  Card,\n  Checkbox,\n  Typography,\n} from 'antd';\nimport { useEffect, useState } from 'react';\nimport Banned from '../components/form/Banned';\nimport Mandatory from '../components/form/Mandatory';\n\nconst { Title } = Typography;\n\nconst possiblePrevious = [\n  \"Min's Trade Route\",\n  'Yhilini Succubi Trade',\n  'Yhilini Bank Core Lender',\n  'Mercenary Offices',\n  'Theltiar Rentals',\n  'Theltiar Flowhouse',\n  'Denmiel Mushrooms',\n  'Denmiel Archives',\n  'Eustrin Guild',\n  'Gasm Falls Trade',\n  'Premium Steel Owner',\n  'Ivalan Bank',\n  'Mercenary Flotilla',\n  'Sanitation Mages Guild',\n  'Crystal Refiner',\n  'Ardford Restaurant',\n];\n\nconst initialValues = {\n  previous: [\n    'Premium Steel Owner',\n    \"Min's Trade Route\",\n    'Yhilini Succubi Trade',\n    'Eustrin Guild',\n    'Denmiel Mushrooms',\n    'Ivalan Bank',\n    'Crystal Refiner',\n    'Ardford Restaurant',\n  ],\n  remainingPron: 7500,\n  baseProfit: 2435000,\n  chapter1Steel: false,\n  strategy: 'compromise',\n  startingSocial: 34,\n  chapter3Infrastructure: true,\n  merchantSolution: 'wait',\n  jhenno: 'religion',\n  magicalItems: 'givini',\n  mandatory: ['Givini Orc Merchant', 'Bank of Givini'],\n  research: 'orc',\n  banned: [\n    'Orcish Drake Statue + Orcish Gargoyle Statue + Orcish Golden Drake Statue',\n  ],\n};\n\nconst toSelectOptions = (list) => {\n  return [...list].sort().map((value) => {\n    return {\n      label: value,\n      value: value,\n    };\n  });\n};\n\nconst requiredRule = { required: true, message: `Please provide a value.` };\n\nconst CustomForm = ({ onFinish, loading }) => {\n  const [form] = Form.useForm();\n\n  const [previous, setPrevious] = useState(initialValues.previous);\n  const [mandatory, setMandatory] = useState(initialValues.mandatory);\n  const [strategy, setStrategy] = useState(initialValues.strategy);\n\n  useEffect(() => {\n    if (['social', 'succession'].includes(strategy)) {\n      if (form.getFieldValue('merchantSolution') === 'wait') {\n        form.setFieldsValue({ merchantSolution: 'neutral' });\n      }\n      return;\n    }\n\n    if (form.getFieldValue('merchantSolution') === 'neutral') {\n      form.setFieldsValue({ merchantSolution: 'wait' });\n    }\n  }, [form, strategy]);\n\n  return (\n    <Form\n      initialValues={initialValues}\n      onFinish={onFinish}\n      onValuesChange={(_, allValues) => {\n        setPrevious(allValues.previous);\n        setMandatory(allValues.mandatory);\n        setStrategy(allValues.strategy);\n      }}\n      className=\"round-form first-round-form\"\n      form={form}\n    >\n      <div className=\"past-block\">\n        <Title level={2}>{`Chapters 1-3`}</Title>\n        <Card>\n          <div className=\"numbers\">\n            <Form.Item\n              label={`ProN remaining at the end of chapter 3`}\n              name=\"remainingPron\"\n              tooltip={`In the Calculator, go to \"War Investment Phase\" and copy the value next to \"ProN available\".`}\n              rules={[requiredRule]}\n            >\n              <InputNumber />\n            </Form.Item>\n            <Form.Item\n              label={`Total profit at the start of chapter 4`}\n              name=\"baseProfit\"\n              tooltip={`In the Calculator, go to \"First Tower Run and Investment and copy the value next to \"Total ProN Return\".`}\n              rules={[requiredRule]}\n            >\n              <InputNumber />\n            </Form.Item>\n            <Form.Item\n              label={`Your social standing at the start of chapter 4`}\n              name=\"startingSocial\"\n              tooltip={`In the Calculator, go to \"War Investment Phase\" and copy the value next to \"Social Score\".`}\n              rules={[requiredRule]}\n            >\n              <InputNumber />\n            </Form.Item>\n          </div>\n\n          <Form.Item\n            label={`Investments already bought during chapters 2/3`}\n            name=\"previous\"\n          >\n            <Select\n              options={toSelectOptions(possiblePrevious)}\n              mode=\"multiple\"\n            />\n          </Form.Item>\n\n          <div className=\"checkboxes\">\n            {!previous.includes('Premium Steel Owner') && (\n              <Form.Item name=\"chapter1Steel\" valuePropName=\"checked\">\n                <Checkbox>{`You invested 20,000 ProN in Premium Steel during chapter 1.`}</Checkbox>\n              </Form.Item>\n            )}\n            {!(\n              previous.includes('Yhilini Succubi Trade') &&\n              previous.includes('Mercenary Offices')\n            ) && (\n              <Form.Item name=\"chapter3Infrastructure\" valuePropName=\"checked\">\n                <Checkbox>{`You funded Yhilin Infrastructure during chapter 3.`}</Checkbox>\n              </Form.Item>\n            )}\n          </div>\n        </Card>\n      </div>\n\n      <Title level={2}>{`Chapter 4  Round 1`}</Title>\n      <Card title={`Strategy`}>\n        <Form.Item name=\"strategy\" label={`Succession crisis`}>\n          <Select\n            options={[\n              {\n                label: `Focus on profits; do only the bare minimum for the Ardan succession crisis (New Givini  25).`,\n                value: 'money',\n              },\n              {\n                label: `Reach most thresholds for the Ardan succession crisis while keeping a focus on profits (New Givini  25, Social  30).`,\n                value: 'compromise',\n              },\n              {\n                label: `Mix profits and social to achieve almost everything in the Ardan succession crisis (New Givini  25, Social  40).`,\n                value: 'social',\n              },\n              {\n                label: `Go all in on the Ardan succession crisis (New Givini  25, Social  40, War Monument or Givini Mage Guild).`,\n                value: 'succession',\n              },\n            ]}\n          />\n        </Form.Item>\n        <div className=\"selects\">\n          <Form.Item label={`Merchant dispute`} name=\"merchantSolution\">\n            <Select\n              options={[\n                {\n                  value: 'neutral',\n                  label: `Neutral compromise (force Social  40)`,\n                },\n                {\n                  value: 'givini',\n                  label: `Favor New Givini`,\n                },\n                {\n                  value: 'wait',\n                  label: `Wait`,\n                },\n              ]}\n            />\n          </Form.Item>\n        </div>\n        <div className=\"selects\">\n          <Form.Item label={`Research`} name=\"research\">\n            <Select\n              options={[\n                {\n                  value: 'orc',\n                  label: `Orc Diversification`,\n                },\n                {\n                  value: 'unpeople',\n                  label: `Unpeople Transformation`,\n                },\n                {\n                  value: 'purity',\n                  label: `Purity Magic`,\n                },\n                {\n                  value: 'defense',\n                  label: `Base Defense`,\n                },\n              ]}\n            />\n          </Form.Item>\n          <Form.Item label={`Jhenno's cooperation`} name=\"jhenno\">\n            <Select\n              options={[\n                {\n                  value: 'politics',\n                  label: `Politics`,\n                },\n                {\n                  value: 'religion',\n                  label: `Religion`,\n                },\n              ]}\n            />\n          </Form.Item>\n          <Form.Item label={`Rose's house magical items`} name=\"magicalItems\">\n            <Select\n              options={[\n                {\n                  value: 'givini',\n                  label: `Givini`,\n                },\n                {\n                  value: 'takkan',\n                  label: `Tak'Kan`,\n                },\n              ]}\n            />\n          </Form.Item>\n        </div>\n\n        <Mandatory\n          purchased={previous}\n          form={form}\n          tooltip={`Forcing a few certain investments can improve performances tremendously.`}\n        />\n        <Banned\n          purchased={[...previous, ...mandatory]}\n          form={form}\n          tooltip={\n            <>\n              {`For cases where a particular investment might be more of a curse than a blessing in the long run and you want to see what happens without it.`}\n              <br />\n              {`Banning an investment that you know to be useless at that particular point can also improve performances quite a bit, especially if said investment is cheap.`}\n            </>\n          }\n        />\n\n        <Form.Item>\n          <Button type=\"primary\" htmlType=\"submit\" loading={loading}>\n            {`Submit`}\n          </Button>\n        </Form.Item>\n      </Card>\n    </Form>\n  );\n};\n\nexport default CustomForm;\n","export const buildFinalStandings = ({\n  initialStandings,\n  investmentChanges,\n  nonInvestmentChanges,\n}) => {\n  let finalStandings = {};\n\n  ['profits', 'givini', 'social', 'takkan'].forEach((key) => {\n    finalStandings[key] =\n      initialStandings[key] +\n      (investmentChanges[key] || 0) +\n      (nonInvestmentChanges[key] || 0);\n  });\n\n  finalStandings['investments'] = [\n    ...initialStandings.investments,\n    ...investmentChanges.investments.map(({ name }) => name),\n  ];\n\n  finalStandings['money'] =\n    initialStandings.money +\n    initialStandings.profits -\n    investmentChanges.price +\n    nonInvestmentChanges.money;\n\n  return finalStandings;\n};\n\nexport const nF = (number) => number.toLocaleString('en-US');\n","import { Table } from 'antd';\nimport { nF } from '../misc';\n\nconst numberColWidth = 120;\n\nconst NumberCell = ({ children, format }) => {\n  const number = children;\n  const formattedNumber = !!format ? nF(Math.abs(number)) : Math.abs(number);\n\n  return `${number < 0 ? `-` : `+`}${formattedNumber}`;\n};\n\nconst Investments = ({ investments }) => {\n  const dataSource = investments.map(({ name, ...data }) => {\n    return {\n      key: name,\n      name,\n      ...data,\n    };\n  });\n\n  const columns = [\n    {\n      title: `Name`,\n      dataIndex: 'name',\n      sorter: (a, b) => a.name.localeCompare(b.name),\n    },\n    {\n      title: `Price`,\n      dataIndex: 'price',\n      render: (price) => nF(price),\n      sorter: (a, b) => a.price - b.price,\n      width: numberColWidth,\n    },\n    {\n      title: `Profits`,\n      dataIndex: 'profits',\n      render: (profits) => nF(profits),\n      sorter: (a, b) => a.profits - b.profits,\n      width: numberColWidth,\n    },\n    {\n      title: `Social`,\n      dataIndex: 'social',\n      render: (social = 0) => <NumberCell>{social}</NumberCell>,\n      width: numberColWidth,\n    },\n  ];\n\n  return <Table dataSource={dataSource} columns={columns} pagination={false} />;\n};\n\nconst Others = ({ list = [] }) => {\n  const dataSource = list.map(({ name, ...data }) => {\n    return {\n      key: name,\n      name,\n      ...data,\n    };\n  });\n\n  const render = (value = 0) => <NumberCell format={true}>{value}</NumberCell>;\n\n  const columns = [\n    {\n      title: `Name`,\n      dataIndex: 'name',\n    },\n    {\n      title: `ProN`,\n      dataIndex: 'money',\n      render,\n      width: numberColWidth,\n    },\n    {\n      title: `Profits`,\n      dataIndex: 'profits',\n      render,\n      width: numberColWidth,\n    },\n    {\n      title: `Social`,\n      dataIndex: 'social',\n      render,\n      width: numberColWidth,\n    },\n  ];\n\n  return <Table dataSource={dataSource} columns={columns} pagination={false} />;\n};\n\nconst Ledger = ({\n  initialStandings,\n  nonInvestmentChanges,\n  investmentChanges,\n}) => {\n  const render = (value, { key }) => {\n    if (['base', 'total'].includes(key)) {\n      return nF(value);\n    }\n    return <NumberCell format={true}>{value}</NumberCell>;\n  };\n\n  const columns = [\n    {\n      dataIndex: 'category',\n    },\n    {\n      title: `ProN`,\n      dataIndex: 'money',\n      render,\n      width: numberColWidth,\n    },\n    {\n      title: `Profits`,\n      dataIndex: 'profits',\n      render,\n      width: numberColWidth,\n    },\n    {\n      title: `Social`,\n      dataIndex: 'social',\n      render,\n      width: numberColWidth,\n    },\n  ];\n\n  const sum = (key) =>\n    initialStandings[key] + nonInvestmentChanges[key] + investmentChanges[key];\n\n  const extraProfits =\n    investmentChanges.profits -\n    investmentChanges.investments.reduce(\n      (acc, { profits }) => acc + profits,\n      0\n    );\n\n  const dataSource = [\n    {\n      ...initialStandings,\n      key: 'base',\n      category: `Previously`,\n    },\n    {\n      key: 'previous_investments',\n      category: `Start of the round`,\n      money: initialStandings.profits,\n      profits: 0,\n      social: 0,\n    },\n    {\n      ...investmentChanges,\n      key: 'investments',\n      category: `Changes from new investments`,\n      money: -investmentChanges.price,\n      profits: investmentChanges.profits - extraProfits,\n    },\n    {\n      ...nonInvestmentChanges,\n      key: 'other',\n      category: `Other changes`,\n      profits: nonInvestmentChanges.profits + extraProfits,\n    },\n  ];\n\n  const otherList = (() => {\n    if (extraProfits > 0) {\n      return [\n        ...nonInvestmentChanges.list,\n        {\n          name: `Extra profits from past investments`,\n          profits: extraProfits,\n        },\n      ];\n    }\n\n    return nonInvestmentChanges.list;\n  })();\n\n  return (\n    <Table\n      dataSource={dataSource}\n      columns={columns}\n      pagination={false}\n      bordered={true}\n      expandable={{\n        expandedRowRender: ({ key }) => {\n          if (key === 'investments') {\n            return <Investments investments={investmentChanges.investments} />;\n          }\n          if (key === 'other') {\n            return <Others list={otherList} />;\n          }\n          return null;\n        },\n        rowExpandable: ({ key }) => {\n          if (key === 'investments') {\n            return true;\n          }\n\n          if (key === 'other' && !!nonInvestmentChanges.list?.length) {\n            return true;\n          }\n\n          return false;\n        },\n        defaultExpandAllRows: true,\n      }}\n      summary={() => {\n        return (\n          <Table.Summary.Row>\n            <Table.Summary.Cell\n              colSpan={2}\n            >{`Standings at the end of the round`}</Table.Summary.Cell>\n            <Table.Summary.Cell>\n              {nF(\n                initialStandings.money +\n                  initialStandings.profits +\n                  nonInvestmentChanges.money -\n                  investmentChanges.price\n              )}\n            </Table.Summary.Cell>\n            <Table.Summary.Cell>{nF(sum('profits'))}</Table.Summary.Cell>\n            <Table.Summary.Cell>{sum('social')}</Table.Summary.Cell>\n          </Table.Summary.Row>\n        );\n      }}\n      className=\"ledger\"\n    />\n  );\n};\n\nexport default Ledger;\n","const Addition = ({ startingValue = 0, dataSources }) => {\n  return (\n    <table className=\"addition\">\n      <tbody>\n        <tr>\n          <td>{`Initial value`}</td>\n          <td>{startingValue}</td>\n          <td></td>\n        </tr>\n      </tbody>\n      {dataSources\n        .filter(({ dataSource }) => dataSource.length > 0)\n        .map(({ title, dataSource }, index) => {\n          return (\n            <tbody key={index.toString()}>\n              <tr>\n                <th colSpan=\"3\" scope=\"col\">\n                  {title}\n                </th>\n              </tr>\n              {dataSource.map(({ label, values, explanation }, index) => {\n                return (\n                  <tr key={index.toString()}>\n                    <td>{label}</td>\n                    <td>{values.map((value) => `+${value}`).join(' ')}</td>\n                    <td>{explanation}</td>\n                  </tr>\n                );\n              })}\n            </tbody>\n          );\n        })}\n      <tfoot>\n        <tr>\n          <th scope=\"row\">{`Total`}</th>\n          <td>\n            {startingValue +\n              dataSources.reduce(\n                (acc, { dataSource }) =>\n                  acc +\n                  dataSource.reduce(\n                    (acc, { values }) =>\n                      acc + values.reduce((acc, val) => acc + val),\n                    0\n                  ),\n                0\n              )}\n          </td>\n        </tr>\n      </tfoot>\n    </table>\n  );\n};\n\nexport default Addition;\n","const sum = (list) =>\n  list.reduce(\n    (acc, { values }) => acc + values.reduce((acc, value) => acc + value, 0),\n    0\n  );\n\nexport const startingValue = -5;\n\nexport const preliminaryChanges = ({ investments }) => {\n  return [\n    { label: `Petitions`, values: [5, 5, 2, 2, 2] },\n    {\n      label: `New Givini Trade`,\n      values: [5],\n      explanation: `On purchase`,\n    },\n    investments.includes(\"Min's Trade Route\") && {\n      label: `Min's Trade Route`,\n      values: [1],\n    },\n  ].filter(Boolean);\n};\n\nexport const baseValue = ({ chapter3Investments }) =>\n  startingValue + sum(preliminaryChanges({ investments: chapter3Investments }));\n\nexport const roundOneChanges = ({ merchantSolution, magicalItems }) => {\n  return [\n    magicalItems === 'givini' && {\n      label: `House Rose's magical items: Givini`,\n      values: [2],\n    },\n    merchantSolution === 'neutral' && {\n      label: `Merchant dispute: Neutral compromise`,\n      values: [1],\n    },\n    merchantSolution === 'givini' && {\n      label: `Merchant dispute: Favor New Givini`,\n      values: [2],\n    },\n    { label: `Givino Vinai equipment shop girl`, values: [1] },\n    { label: `Givini king`, values: [1] },\n    {\n      label: `New Givini Trade`,\n      values: [1],\n      explanation: `At the end of the round (before profits from the Givini Orc Merchant are computed)`,\n    },\n  ].filter(Boolean);\n};\n\nexport const roundOneValue = (...params) => sum(roundOneChanges(...params));\n\nexport const roundTwoChanges = ({ merchantSolution2 }) => {\n  return [\n    merchantSolution2 === 'neutral' && {\n      label: `Merchant dispute: Neutral compromise`,\n      values: [1],\n    },\n    merchantSolution2 === 'givini' && {\n      label: `Merchant dispute: Favor New Givini`,\n      values: [2],\n    },\n    {\n      label: `New Givini Trade`,\n      values: [1],\n      explanation: `At the end of the round (before profits from the Givini Orc Merchant are computed)`,\n    },\n  ].filter(Boolean);\n};\n\nexport const roundTwoValue = (...params) => sum(roundTwoChanges(...params));\n\nexport const roundThreeChanges = ({\n  merchantSolution3,\n  gawnfallTakkan,\n  gawnfallMercantile,\n}) => {\n  return [\n    merchantSolution3 === 'neutral' && {\n      label: `Merchant dispute: Neutral compromise`,\n      values: [1],\n    },\n    merchantSolution3 === 'givini' && {\n      label: `Merchant dispute: Favor New Givini`,\n      values: [2],\n    },\n    gawnfallTakkan === 'major' && {\n      label: `Gawnfall: Tak'Kan vote`,\n      values: [1],\n    },\n    ['excellent', 'good'].includes(gawnfallMercantile) && {\n      label: `Gawnfall: Mercantile solution`,\n      values: [1],\n    },\n    {\n      label: `New Givini Trade`,\n      values: [1],\n      explanation: `At the end of the round (before profits from the Givini Orc Merchant are computed)`,\n    },\n  ].filter(Boolean);\n};\n\nexport const roundThreeValue = (...params) => sum(roundThreeChanges(...params));\n","import Addition from '../../results/Addition';\nimport {\n  startingValue,\n  preliminaryChanges,\n  roundOneChanges,\n} from '../../data/givini';\n\nconst Givini = ({\n  chapter3Investments = [],\n  roundOneInvestments = [],\n  decisions = {},\n}) => {\n  return (\n    <Addition\n      startingValue={startingValue}\n      dataSources={[\n        {\n          title: `Chapter start`,\n          dataSource: preliminaryChanges({ investments: chapter3Investments }),\n        },\n        {\n          title: `Investments`,\n          dataSource: roundOneInvestments\n            .filter(({ givini = 0 }) => givini !== 0)\n            .map(({ name, givini }) => {\n              return { label: name, values: [givini] };\n            })\n            .sort(({ label: a }, { label: b }) => a.localeCompare(b)),\n        },\n        {\n          title: `Other changes`,\n          dataSource: roundOneChanges(decisions),\n        },\n      ]}\n    />\n  );\n};\n\nexport default Givini;\n","const sum = (list) =>\n  list.reduce(\n    (acc, { values }) => acc + values.reduce((acc, value) => acc + value, 0),\n    0\n  );\n\nexport const startingValue = -5;\n\nexport const preliminaryChanges = () => {\n  return [\n    { label: `Petitions`, values: [5, 2, 2, 5] },\n    {\n      label: `Tak'Kan Trade`,\n      values: [5],\n      explanation: `On purchase`,\n    },\n  ];\n};\n\nexport const baseValue = () => startingValue + sum(preliminaryChanges());\n\nexport const roundOneChanges = ({ magicalItems, research }) => {\n  return [\n    magicalItems === 'takkan' && {\n      label: `House Rose's magical items: Tak'Kan`,\n      values: [2],\n    },\n    {\n      label: `Tak'Kan Trade`,\n      values: [1],\n      explanation: `At the end of the round`,\n    },\n    research === 'orc' && {\n      label: `Research: Orc Diversification`,\n      values: [5],\n    },\n  ].filter(Boolean);\n};\n\nexport const roundOneValue = (...params) => sum(roundOneChanges(...params));\n\nexport const roundTwoChanges = ({ research }) => {\n  return [\n    {\n      label: `Tak'Kan Trade`,\n      values: [1],\n      explanation: `At the end of the round`,\n    },\n    research === 'orc' && {\n      label: `Research: Orc Diversification`,\n      values: [5],\n    },\n  ].filter(Boolean);\n};\n\nexport const roundTwoValue = (...params) => sum(roundTwoChanges(...params));\n\nexport const council = ({ investments = [], takkan, researches = [] }) => {\n  let yes = 3 + 1 + 1; //Base, Elleani, Impaler\n  let no = 2;\n\n  if (takkan >= 40) {\n    yes += 4;\n  } else if (takkan >= 30) {\n    yes += 3;\n    no += 1;\n  } else if (takkan >= 20) {\n    yes += 2;\n    no += 2;\n  } else if (takkan >= 10) {\n    yes += 1;\n    no += 3;\n  } else {\n    no += 4;\n  }\n\n  if (researches.includes('orc')) {\n    yes += 1;\n  } else {\n    no += 1;\n  }\n\n  yes += investments.filter((name) => {\n    return [\n      'Orc Pools Upgrade',\n      \"Tarran'Kan Housing + Tarran'Kan Trade Upgrade\",\n      'Hall of Mental Strength',\n      'Imp Offices',\n    ].includes(name);\n  }).length;\n\n  if (investments.includes('Orcish Democracy')) {\n    yes = +2;\n  }\n\n  return yes / (yes + no);\n};\n\nexport const roundThreeChanges = ({\n  research,\n  gawnfallMercantile,\n  gawnfallTakkan,\n}) => {\n  return [\n    gawnfallTakkan === 'minor' && {\n      label: `Gawnfall: Tak'Kan vote`,\n      values: [2],\n    },\n    gawnfallTakkan === 'major' && {\n      label: `Gawnfall: Tak'Kan vote`,\n      values: [5],\n    },\n    ['excellent', 'good'].includes(gawnfallMercantile) && {\n      label: `Gawnfall: Mercantile solution`,\n      values: [1],\n    },\n    {\n      label: `Tak'Kan Trade`,\n      values: [1],\n      explanation: `At the end of the round`,\n    },\n    research === 'orc' && {\n      label: `Research: Orc Diversification`,\n      values: [5],\n    },\n  ].filter(Boolean);\n};\n\nexport const roundThreeValue = (...params) => sum(roundThreeChanges(...params));\n","import Addition from '../../results/Addition';\nimport {\n  startingValue,\n  preliminaryChanges,\n  roundOneChanges,\n} from '../../data/takkan';\n\nconst Takkan = ({ roundOneInvestments = [], decisions = {} }) => {\n  return (\n    <Addition\n      startingValue={startingValue}\n      dataSources={[\n        {\n          title: `Chapter start`,\n          dataSource: preliminaryChanges(),\n        },\n        {\n          title: `Investments`,\n          dataSource: roundOneInvestments\n            .filter(({ takkan = 0 }) => takkan !== 0)\n            .map(({ name, takkan }) => {\n              return { label: name, values: [takkan] };\n            })\n            .sort(({ label: a }, { label: b }) => a.localeCompare(b)),\n        },\n        {\n          title: `Other changes`,\n          dataSource: roundOneChanges(decisions),\n        },\n      ]}\n    />\n  );\n};\n\nexport default Takkan;\n","import Ledger from '../../results/Ledger';\nimport { Card } from 'antd';\nimport Givini from './Givini';\nimport Takkan from './Takkan';\n\nconst Result = ({\n  initialStandings,\n  nonInvestmentChanges,\n  investmentChanges,\n  decisions,\n}) => {\n  return (\n    <Card title={`Changes`} className=\"results\">\n      <Ledger\n        initialStandings={initialStandings}\n        nonInvestmentChanges={nonInvestmentChanges}\n        investmentChanges={investmentChanges}\n      />\n      <div>\n        <Card title={`New Givini`} type=\"inner\">\n          <Givini\n            chapter3Investments={initialStandings.investments}\n            roundOneInvestments={investmentChanges.investments}\n            decisions={decisions}\n          />\n        </Card>\n        <Card title={`Tak'Kan`} type=\"inner\">\n          <Takkan\n            roundOneInvestments={investmentChanges.investments}\n            decisions={decisions}\n          />\n        </Card>\n      </div>\n    </Card>\n  );\n};\n\nexport default Result;\n","import { useEffect, useRef } from 'react';\n\nconst ScrollTo = ({ children, data }) => {\n  const resultRef = useRef(null);\n  useEffect(() => {\n    if (!data || !resultRef.current) {\n      return;\n    }\n    resultRef.current.scrollIntoView({ behavior: 'smooth' });\n  }, [data, resultRef]);\n\n  if (!data) {\n    return null;\n  }\n\n  return <div ref={resultRef}>{children}</div>;\n};\n\nexport default ScrollTo;\n","import Form from './Form';\nimport Result from './results';\nimport {\n  baseValue as giviniBaseValue,\n  roundOneValue as giviniRoundOneValue,\n} from '../data/givini';\nimport { buildFinalStandings } from '../misc';\nimport {\n  baseValue as takkanBaseValue,\n  roundOneValue as takkanRoundOneValue,\n} from '../data/takkan';\nimport ScrollTo from '../results/ScrollTo';\n\nconst socialRequirement = (\n  startingSocial,\n  { strategy, jhenno, merchantSolution }\n) => {\n  if (strategy === 'money') {\n    return 0;\n  }\n  if (merchantSolution === 'neutral') {\n    return 40 - startingSocial;\n  }\n  const base = strategy === 'compromise' ? 30 : 40;\n  const jhennoModifier = jhenno === 'politics' ? 1 : 0;\n  return base - (startingSocial + jhennoModifier);\n};\n\nconst giviniRequirement = ({ giviniStart, giviniExtra }) => {\n  const absoluteRequirement = 25;\n  const offset = 3; // Points earned after the requirement matters\n\n  return absoluteRequirement - giviniStart - giviniExtra + offset;\n};\n\nconst buildNonInvestmentsChange = (decisions) => {\n  const { jhenno } = decisions;\n\n  const nonInvestmentChangesList = [\n    jhenno === 'politics' && {\n      name: `Jhenno's political cooperation`,\n      social: 1,\n    },\n    {\n      name: `Succession crisis' reward (best result)`,\n      social: 3,\n    },\n    {\n      name: `The Three Trades become less profitable`,\n      profits: -300000,\n    },\n  ].filter(Boolean);\n\n  return {\n    givini: giviniRoundOneValue(decisions),\n    takkan: takkanRoundOneValue(decisions),\n    money: 0,\n    profits: nonInvestmentChangesList.reduce(\n      (acc, { profits = 0 }) => acc + profits,\n      0\n    ),\n    social: nonInvestmentChangesList.reduce(\n      (acc, { social = 0 }) => acc + social,\n      0\n    ),\n    list: nonInvestmentChangesList,\n  };\n};\n\nconst compute = async ({\n  runInWoker,\n  initialStandings,\n  decisions,\n  nonInvestmentChanges,\n  mandatory,\n  misc,\n  banned,\n}) => {\n  const giviniStart = initialStandings.givini;\n  const giviniExtra = nonInvestmentChanges.givini;\n\n  const params = {\n    ...misc,\n    previousInvestments: initialStandings.investments,\n    money: initialStandings.money + initialStandings.profits,\n    otherRequirements: {\n      social: socialRequirement(initialStandings.social, decisions),\n      givini: giviniRequirement({\n        giviniStart,\n        giviniExtra,\n      }),\n      mandatory,\n      atLeastOne:\n        decisions.strategy === 'succession'\n          ? ['War Monument', 'Givini Mage Guild']\n          : undefined,\n      banned,\n    },\n    giviniStart,\n    giviniExtra,\n  };\n\n  return runInWoker(params);\n};\n\nconst onFinish = async ({ values, setResult, runInWoker, setError }) => {\n  setError(undefined);\n\n  const {\n    previous = [],\n    remainingPron,\n    baseProfit,\n    startingSocial,\n\n    strategy,\n    merchantSolution,\n    jhenno,\n    magicalItems,\n    research,\n\n    mandatory,\n    banned,\n\n    chapter1Steel,\n    chapter3Infrastructure,\n  } = values;\n\n  const initialStandings = {\n    money: remainingPron,\n    profits: baseProfit,\n    investments: previous,\n    social: startingSocial,\n    givini: giviniBaseValue({ chapter3Investments: previous }),\n    takkan: takkanBaseValue(),\n  };\n\n  const decisions = {\n    strategy,\n    merchantSolution,\n    magicalItems,\n    research,\n    jhenno,\n  };\n\n  const misc = {\n    chapter1Steel,\n    chapter3Infrastructure,\n  };\n\n  const nonInvestmentChanges = buildNonInvestmentsChange(decisions);\n\n  const result = await compute({\n    runInWoker,\n    initialStandings,\n    decisions,\n    nonInvestmentChanges,\n    mandatory,\n    misc,\n    banned,\n  });\n\n  if (!result) {\n    setResult(undefined);\n    setError(\n      `Couldn't find a working combination of investments for that strategy with these starting values, sorry.`\n    );\n    return;\n  }\n\n  const investmentChanges = { ...result, money: -result.price };\n\n  setResult({\n    initialStandings,\n    decisions,\n    nonInvestmentChanges,\n    investmentChanges,\n    finalStandings: buildFinalStandings({\n      initialStandings,\n      nonInvestmentChanges,\n      investmentChanges,\n    }),\n    misc,\n  });\n  setError(undefined);\n};\n\nconst FirstRound = ({ runInWoker, loading, result, setResult, setError }) => {\n  return (\n    <div className=\"round-one\">\n      <Form\n        onFinish={(values) => {\n          onFinish({ values, setResult, runInWoker, setError });\n        }}\n        loading={loading}\n      />\n      <ScrollTo data={result}>\n        <Result {...result} />\n      </ScrollTo>\n    </div>\n  );\n};\n\nexport default FirstRound;\n","import { Alert, Typography } from 'antd';\n\nconst { Title } = Typography;\n\nconst Disclaimer = () => {\n  return (\n    <div className=\"disclaimer\">\n      <div className=\"preamble\">\n        <Title>{`Investment Advisor`}</Title>\n        <p>\n          {`A tool to help you choose the best theoretical best possible investments for chapter 4 of `}\n          <a href=\"https://the-last-sovereign.blogspot.com/\">{`The Last Sovereign`}</a>\n          {`.`}\n        </p>\n        <p>{`Just fill in the requested information, choose your strategy and let a quasi-brute force algorithm determine what's best for you (assuming a definition of best here as highest short term returns, then lowest price, while still fulfilling the requirements of your strategy).`}</p>\n        <p>\n          {`This is definetely an advanced tool, intended for people who are already familiar with the game's `}\n          <a href=\"https://thelastsovereign.miraheze.org/wiki/Secret_stats\">\n            {`inner workings`}\n          </a>\n          {`, with the awesome `}\n\n          <a href=\"https://thelastsovereign.flarum.cloud/d/15-calculator\">{`Calculator`}</a>\n          {`, and are now looking for the last lousy optimizations they might have missed.`}\n        </p>\n      </div>\n      <Alert\n        message={`Assumptions`}\n        description={\n          <>\n            <p>\n              <a href=\"https://www.patreon.com/posts/demographics-8851324\">{`About 85% of players have only ever played TLS with Reshaped Varia.`}</a>\n            </p>\n            <p>{`That means if I was to write a walkthrough for TLS that only covered a \"Reshaped Varia\" strategy, it'll still be usable by 85% of players. Of course, I will have to release a \"Dominated Varia\" variant eventually to account for the remaining 15%. But in the meantime, that's already 85% of people that can start playing with my walkthrough without waiting any further. Meanwhile, if I had tried to cover both cases from the start, 100% of people would have had to wait.`}</p>\n            <p>{`While I'm writing a software and not a walkthrough here, it will play by the same logic: Focus first on the \"general case\", by making a few (many) assumptions that hopefully will be true of most \"good\" saves, so to be able to release it to the public early. Then slowly cover the other cases in subsequent updates.`}</p>\n            <p>{`Therefore, at the moment, this tool takes for granted that:`}</p>\n            <ol>\n              <li>{`The Succubus Tower was visited during chapter 1.`}</li>\n              <li>{`Simon invested in the bank during chapter 1.`}</li>\n              <li>{`The Iron Cudgel was hired (in either chapter 1 or 2).`}</li>\n              <li>{`Through chapter 2, the AriGarda was bribed, the Merchant's Guild joined, the Order of Silence funded, and the Ardan Bank invested into.`}</li>\n              <li>{`Tradesmasher and the Succubus Armorer were met during chapter 3.`}</li>\n              <li>{`The three unique Trades (New Givini, Tak'Kan and Chalice States) were bought at the end of chapter 3.`}</li>\n              <li>{`Chapter 3 in general was good enough for Yhilin to reach its final state during the first investment phase of Chapter 4.`}</li>\n              <li>{`Chapter 3 in general and the war in particular were good enough for all petitions favorable to Givini to appear.`}</li>\n              <li>{`All such petitions were approved.`}</li>\n            </ol>\n            <p>{`Note that the final version of the advisor will likely still have a few assumptions in it, so as to keep the complexity in check. Namely, \"disaster runs\" will never be covered.`}</p>\n            <p>{`tl;dr The Advisor is currently in early access.`}</p>\n          </>\n        }\n        type=\"info\"\n        showIcon={true}\n        className=\"assumptions\"\n        closable={true}\n      />\n    </div>\n  );\n};\n\nexport default Disclaimer;\n","import { Progress, Divider, Modal, Button } from 'antd';\nimport { PoweroffOutlined } from '@ant-design/icons';\n\nconst Loading = ({\n  combinationsCount,\n  progress,\n  investmentsCount,\n  preprogress,\n  abort,\n}) => {\n  if (!investmentsCount) {\n    return null;\n  }\n\n  return (\n    <Modal visible={true} centered={true} closable={false} footer={null}>\n      <div>\n        <p>\n          {`Prefiltering ${(2 ** investmentsCount).toLocaleString('en-US')} (2`}\n          <sup>{investmentsCount}</sup>\n          {`) possibilities`}\n        </p>\n        <Progress percent={Math.round(preprogress * 100)} />\n      </div>\n      {!!combinationsCount && (\n        <>\n          <Divider />\n          <div>\n            <p>{`Processing ${combinationsCount.toLocaleString(\n              'en-US'\n            )} remaining possibilities`}</p>\n            <Progress percent={Math.round(progress * 10000) / 100} />\n          </div>\n        </>\n      )}\n      <Button\n        danger={true}\n        icon={<PoweroffOutlined />}\n        onClick={abort}\n        className=\"abort-button\"\n      >{`Abort`}</Button>\n    </Modal>\n  );\n};\n\nexport default Loading;\n","import { Result, Card } from 'antd';\n\nconst Failure = ({ message }) => {\n  return (\n    <Card>\n      <Result status=\"warning\" title={message} />\n    </Card>\n  );\n};\n\nexport default Failure;\n","import { Table } from 'antd';\nimport { nF } from '../misc';\n\nconst base = [\n  {\n    key: `Tower Little Girl talk`,\n    magic: 1,\n    military: 0,\n    price: 0,\n  },\n  {\n    key: `Deluxe Givini Dragon Statue`,\n    magic: 1,\n    military: 0,\n    price: 5000,\n  },\n  {\n    key: `HQ Shrine`,\n    magic: 1,\n    military: 0,\n    price: 5000,\n  },\n  {\n    key: `Orc Lab Upgrade`,\n    magic: 2,\n    military: 5,\n    price: 25000,\n  },\n  {\n    key: `Magical Shielding Upgrade`,\n    magic: 5,\n    military: 0,\n    price: 100000,\n  },\n];\n\nconst defense = [\n  {\n    key: `Research: Base Defense`,\n    military: 5,\n    magic: 10,\n    price: 0,\n  },\n];\n\nconst subsitute = [\n  {\n    key: `Wynn's Shield Upgrade`,\n    magic: 5,\n    military: 0,\n    price: 100000,\n  },\n  {\n    key: `Extradimensional Foundation`,\n    magic: 5,\n    military: 5,\n    price: 225000,\n  },\n];\n\nconst plusTenMilitary = [\n  {\n    key: `Armory Upgrade`,\n    military: 5,\n    magic: 0,\n    price: 10000,\n  },\n  {\n    key: `Orc Guard Posts`,\n    military: 3,\n    magic: 0,\n    price: 5000,\n  },\n  {\n    key: `Supplies Upgrade`,\n    military: 2,\n    magic: 0,\n    price: 10000,\n  },\n];\n\nconst plusFifteenMilitary = [\n  {\n    key: `Armory Upgrade`,\n    military: 5,\n    magic: 0,\n    price: 10000,\n  },\n  {\n    key: `Orc Guard Posts`,\n    military: 3,\n    magic: 0,\n    price: 5000,\n  },\n  {\n    key: `Second Well`,\n    military: 3,\n    magic: 0,\n    price: 10000,\n  },\n  {\n    key: `Iron Cudgel`,\n    military: 4,\n    magic: 0,\n    price: 15000,\n  },\n];\n\nconst renderPlus = (number) => `+${number}`;\n\nconst columns = [\n  {\n    title: `Upgrade`,\n    dataIndex: 'key',\n  },\n  {\n    title: `Price`,\n    dataIndex: 'price',\n    render: (number) => nF(number),\n    sorter: (a, b) => a.price - b.price,\n  },\n  {\n    title: `Military`,\n    dataIndex: 'military',\n    render: renderPlus,\n    sorter: (a, b) => a.military - b.military,\n  },\n  {\n    title: `Magic`,\n    dataIndex: 'magic',\n    render: renderPlus,\n    sorter: (a, b) => a.magic - b.magic,\n  },\n];\n\nconst dataSource = ({ research, military, magic }) => {\n  if (research === 'defense') {\n    if (military <= 10 && magic === 20) {\n      return [...defense, ...base];\n    }\n\n    if (military === 20 && magic <= 10) {\n      return [...defense, ...plusFifteenMilitary];\n    }\n\n    if (military === 20 && magic === 20) {\n      return [...defense, ...base, ...plusTenMilitary];\n    }\n  }\n\n  if (military <= 10 && magic === 20) {\n    return [...base, ...subsitute];\n  }\n\n  if (military === 20 && magic <= 10) {\n    return [...base, ...plusFifteenMilitary];\n  }\n\n  if (military === 20 && magic === 20) {\n    return [...base, ...subsitute, ...plusTenMilitary];\n  }\n\n  throw new Error('Unsupported');\n};\nconst sum = (list, key) => list.reduce((acc, data) => acc + data[key], 0);\n\nexport const price = (params) => sum(dataSource(params), 'price');\n\nconst Headquarters = ({ research, military, magic }) => {\n  const source = dataSource({ research, military, magic });\n\n  return (\n    <div className=\"headquarters-upgrades\">\n      <Table\n        dataSource={source}\n        columns={columns}\n        pagination={false}\n        summary={() => {\n          return (\n            <Table.Summary.Row>\n              <Table.Summary.Cell>{`Total`}</Table.Summary.Cell>\n              <Table.Summary.Cell>\n                {nF(sum(source, 'price'))}\n              </Table.Summary.Cell>\n              <Table.Summary.Cell>{sum(source, 'military')}</Table.Summary.Cell>\n              <Table.Summary.Cell>{sum(source, 'magic')}</Table.Summary.Cell>\n            </Table.Summary.Row>\n          );\n        }}\n      />\n    </div>\n  );\n};\n\nexport default Headquarters;\n","import { useState, useEffect } from 'react';\nimport { Form, Button, Card, Select } from 'antd';\nimport Headquarters, { price as headquartersPrice } from './Headquarters';\nimport { nF } from '../misc';\nimport Banned from '../components/form/Banned';\nimport Mandatory from '../components/form/Mandatory';\n\nconst initialValues = {\n  merchantSolution2: 'neutral',\n  headquarters: '20/10',\n  orcCouncil: 0.8,\n  mandatory: [],\n  banned: [],\n};\n\nconst CustomForm = ({\n  onFinish,\n  loading,\n  firstRoundDecisions,\n  purchasedInvestments,\n}) => {\n  const [form] = Form.useForm();\n\n  const [hq, setHq] = useState(initialValues.headquarters);\n  const [military, magic] = hq.split('/').map((x) => parseInt(x));\n  const [mandatory, setMandatory] = useState(initialValues.mandatory);\n\n  const previousResearch = firstRoundDecisions.research;\n  useEffect(() => {\n    form.setFieldsValue({\n      research: previousResearch === 'purity' ? 'orc' : 'purity',\n    });\n  }, [form, previousResearch]);\n\n  return (\n    <Form\n      initialValues={initialValues}\n      onFinish={onFinish}\n      className=\"round-form second-round-form\"\n      form={form}\n      onValuesChange={(_, allValues) => {\n        setHq(allValues.headquarters);\n        setMandatory(allValues.mandatory);\n      }}\n    >\n      <Card title={`Stategy`} type=\"inner\">\n        <div className=\"two-columns\">\n          <div>\n            {firstRoundDecisions.merchantSolution === 'wait' && (\n              <Form.Item label={`Merchant dispute`} name=\"merchantSolution2\">\n                <Select\n                  options={[\n                    {\n                      value: 'neutral',\n                      label: `Neutral compromise (force Social  40)`,\n                    },\n                    {\n                      value: 'givini',\n                      label: `Favor New Givini`,\n                    },\n                    {\n                      value: 'wait',\n                      label: `Wait`,\n                    },\n                  ]}\n                />\n              </Form.Item>\n            )}\n            <Form.Item name=\"orcCouncil\" label={`Orc council`}>\n              <Select\n                options={[\n                  {\n                    label: `Substantial majority ( 65%)`,\n                    value: 0.65,\n                  },\n                  {\n                    label: `Overwhelming majority ( 80%)`,\n                    value: 0.8,\n                  },\n                ]}\n              />\n            </Form.Item>\n            <Form.Item name=\"headquarters\" label={`Headquarters`}>\n              <Select\n                options={[\n                  {\n                    label: `Pay ${nF(\n                      headquartersPrice({\n                        research: previousResearch,\n                        military: 20,\n                        magic: 10,\n                      })\n                    )} ProN for Military  20, Magic  10.`,\n                    value: '20/10',\n                  },\n                  {\n                    label: `Pay ${nF(\n                      headquartersPrice({\n                        research: previousResearch,\n                        military: 5,\n                        magic: 20,\n                      })\n                    )} ProN for Military  5, Magic  20.`,\n                    value: '5/20',\n                  },\n                  {\n                    label: `Pay ${nF(\n                      headquartersPrice({\n                        research: previousResearch,\n                        military: 20,\n                        magic: 20,\n                      })\n                    )} ProN for Military  20, Magic  20.`,\n                    value: '20/20',\n                  },\n                ]}\n              />\n            </Form.Item>\n            <Form.Item label={`Research`} name=\"research\">\n              <Select\n                options={[\n                  {\n                    value: 'orc',\n                    label: `Orc Diversification`,\n                  },\n                  {\n                    value: 'unpeople',\n                    label: `Unpeople Transformation`,\n                  },\n                  {\n                    value: 'purity',\n                    label: `Purity Magic`,\n                  },\n                  {\n                    value: 'defense',\n                    label: `Base Defense`,\n                  },\n                ].filter(({ value }) => value !== previousResearch)}\n              />\n            </Form.Item>\n            <Mandatory\n              label={`Investments you explicitly want to buy now (example: Airships)`}\n              form={form}\n              purchased={purchasedInvestments}\n            />\n            <Banned\n              purchased={[...purchasedInvestments, ...mandatory]}\n              form={form}\n            />\n          </div>\n          <Headquarters\n            research={previousResearch}\n            military={military}\n            magic={magic}\n          />\n        </div>\n\n        <Form.Item>\n          <Button type=\"primary\" htmlType=\"submit\" loading={loading}>\n            {`Submit`}\n          </Button>\n        </Form.Item>\n      </Card>\n    </Form>\n  );\n};\n\nexport default CustomForm;\n","import Addition from '../../results/Addition';\nimport { roundTwoChanges } from '../../data/givini';\n\nconst Givini = ({\n  startingValue,\n  roundTwoInvestments = [],\n  decisions = {},\n}) => {\n  return (\n    <Addition\n      startingValue={startingValue}\n      dataSources={[\n        {\n          title: `Investments`,\n          dataSource: roundTwoInvestments\n            .filter(({ givini = 0 }) => givini !== 0)\n            .map(({ name, givini }) => {\n              return { label: name, values: [givini] };\n            })\n            .sort(({ label: a }, { label: b }) => a.localeCompare(b)),\n        },\n        {\n          title: `Other changes`,\n          dataSource: roundTwoChanges(decisions),\n        },\n      ]}\n    />\n  );\n};\n\nexport default Givini;\n","import Addition from '../../results/Addition';\nimport { roundTwoChanges, council } from '../../data/takkan';\nimport { Typography } from 'antd';\n\nconst { Text } = Typography;\n\nconst Takkan = ({\n  startingValue,\n  roundTwoInvestments = [],\n  decisions = {},\n  roundOneResearch,\n  previousInvestments = [],\n  takkanScore,\n}) => {\n  const councilResult = council({\n    researches: [roundOneResearch],\n    investments: [\n      ...previousInvestments,\n      ...roundTwoInvestments.map(({ name }) => name),\n    ],\n    takkan: takkanScore,\n  });\n\n  return (\n    <>\n      <Addition\n        startingValue={startingValue}\n        dataSources={[\n          {\n            title: `Investments`,\n            dataSource: roundTwoInvestments\n              .filter(({ takkan = 0 }) => takkan !== 0)\n              .map(({ name, takkan }) => {\n                return { label: name, values: [takkan] };\n              })\n              .sort(({ label: a }, { label: b }) => a.localeCompare(b)),\n          },\n          {\n            title: `Other changes`,\n            dataSource: roundTwoChanges(decisions),\n          },\n        ]}\n      />\n      <Text>\n        {`Orc council: `}\n        <Text type={councilResult >= 0.8 ? 'success' : 'warning'}>\n          {(councilResult * 100).toFixed(2)}\n          {`%`}\n        </Text>\n      </Text>\n    </>\n  );\n};\n\nexport default Takkan;\n","import Ledger from '../../results/Ledger';\nimport { Card } from 'antd';\nimport Givini from './Givini';\nimport Takkan from './Takkan';\n\nconst Result = ({\n  initialStandings,\n  nonInvestmentChanges,\n  investmentChanges,\n  decisions,\n  roundOneDecisions,\n}) => {\n  return (\n    <Card title={`Changes`} className=\"results\">\n      <Ledger\n        initialStandings={initialStandings}\n        nonInvestmentChanges={nonInvestmentChanges}\n        investmentChanges={investmentChanges}\n      />\n      <div>\n        <Card title={`New Givini`} type=\"inner\">\n          <Givini\n            startingValue={initialStandings.givini}\n            roundTwoInvestments={investmentChanges.investments}\n            decisions={decisions}\n          />\n        </Card>\n        <Card title={`Tak'Kan`} type=\"inner\">\n          <Takkan\n            startingValue={initialStandings.takkan}\n            roundTwoInvestments={investmentChanges.investments}\n            decisions={decisions}\n            takkanScore={initialStandings.takkan + investmentChanges.takkan}\n            roundOneResearch={roundOneDecisions.research}\n            previousInvestments={initialStandings.investments}\n          />\n        </Card>\n      </div>\n    </Card>\n  );\n};\n\nexport default Result;\n","import Form from './Form';\nimport { buildFinalStandings } from '../misc';\nimport Result from './results';\nimport { roundTwoValue as giviniRoundTwoValue } from '../data/givini';\nimport { price as headquartersPrice } from './Headquarters';\nimport { roundTwoValue as takkanRoundTwoValue } from '../data/takkan';\nimport { Typography } from 'antd';\nimport ScrollTo from '../results/ScrollTo';\n\nconst { Title } = Typography;\n\nconst socialRequirement = (initialSocial, decisions) => {\n  if (decisions.merchantSolution2 === 'neutral' && initialSocial < 40) {\n    return 40 - initialSocial;\n  }\n\n  return 0;\n};\n\nconst onFinish = async ({\n  setResult,\n  runInWoker,\n  setError,\n  firstRoundResult,\n  values,\n}) => {\n  const { finalStandings: initialStandings, misc } = firstRoundResult;\n\n  const {\n    merchantSolution2,\n    headquarters,\n    orcCouncil,\n    mandatory,\n    banned,\n    research,\n  } = values;\n  const decisions = { merchantSolution2, headquarters, orcCouncil, research };\n\n  const [military, magic] = decisions.headquarters\n    .split('/')\n    .map((x) => parseInt(x));\n  const headquartersUpgradesPrice = headquartersPrice({\n    research: firstRoundResult.decisions.research,\n    military,\n    magic,\n  });\n\n  const pronNote = 2500;\n\n  const nonInvestmentChanges = {\n    money: -headquartersUpgradesPrice + pronNote,\n    profits: 0,\n    social: 0,\n    givini: giviniRoundTwoValue(decisions),\n    takkan: takkanRoundTwoValue(decisions),\n    list: [\n      {\n        name: `Headquarters upgrades`,\n        money: -headquartersUpgradesPrice,\n      },\n      {\n        name: `Tower's chest ProN note`,\n        money: pronNote,\n      },\n    ],\n  };\n\n  const params = {\n    ...misc,\n    previousInvestments: initialStandings.investments,\n    money:\n      initialStandings.money +\n      initialStandings.profits -\n      headquartersUpgradesPrice,\n    giviniStart: initialStandings.givini,\n    giviniExtra: nonInvestmentChanges.givini,\n    takkan: initialStandings.takkan,\n    completedResearch: [firstRoundResult.decisions.research],\n    otherRequirements: {\n      social: socialRequirement(initialStandings.social, decisions),\n      orcCouncil: decisions.orcCouncil,\n      mandatory,\n      banned,\n    },\n  };\n\n  const result = await runInWoker(params);\n\n  if (!result) {\n    setResult(undefined);\n    setError(\n      `Couldn't find a working combination of investments for that strategy with these starting values, sorry.`\n    );\n    return;\n  }\n\n  const investmentChanges = { ...result, money: -result.price };\n\n  setResult({\n    initialStandings,\n    decisions,\n    nonInvestmentChanges,\n    investmentChanges,\n    finalStandings: buildFinalStandings({\n      initialStandings,\n      nonInvestmentChanges,\n      investmentChanges,\n    }),\n    misc,\n  });\n  setError(undefined);\n};\n\nconst SecondRound = ({\n  runInWoker,\n  loading,\n  result,\n  setResult,\n  setError,\n  firstRoundResult,\n}) => {\n  return (\n    <div className=\"round-two\">\n      <Title level={2}>{`Chapter 4  Round 2`}</Title>\n      <Form\n        onFinish={(values) => {\n          onFinish({\n            setResult,\n            runInWoker,\n            setError,\n            firstRoundResult,\n            values,\n          });\n        }}\n        loading={loading}\n        firstRoundDecisions={firstRoundResult.decisions}\n        purchasedInvestments={firstRoundResult.finalStandings.investments}\n      />\n      <ScrollTo data={result}>\n        <Result roundOneDecisions={firstRoundResult.decisions} {...result} />\n      </ScrollTo>\n    </div>\n  );\n};\n\nexport default SecondRound;\n","import { useEffect, useState } from 'react';\nimport { Form, Card, Radio, Select, Button, Alert, InputNumber } from 'antd';\nimport preGawnfallInvestments, {\n  postGawnfallInvestments,\n} from '../data/investments';\nimport Mandatory from '../components/form/Mandatory';\nimport Banned from '../components/form/Banned';\nimport { nF } from '../misc';\n\nconst initialValues = {\n  mandatory1: [],\n  yelarel: 'min',\n  gawnfallTakkan: 'major',\n  gawnfallMercantile: 'excellent',\n  gawnfallArdford: 'resolved',\n  gawnfallMother: 'full_unlock',\n  vera: true,\n  merchantSolution3: 'neutral',\n  mandatory: [],\n  banned: [],\n  gawnfallHigh: 'herin_overwhelming',\n  reserves: 5000000 + 125000 + 250000,\n  extra_reserves: 0,\n};\n\nconst CustomForm = ({\n  previousInvestments,\n  previousResearch,\n  onFinish,\n  loading,\n  merchantSolution,\n}) => {\n  const [form] = Form.useForm();\n  const [mandatory1, setMandatory1] = useState(initialValues.mandatory1);\n  const [mandatory, setMandatory] = useState(initialValues.mandatory);\n  const [lockedInvestments, setLockedInvestments] = useState([]);\n\n  const availableResearch = [\n    {\n      value: 'orc',\n      label: `Orc Diversification`,\n    },\n    {\n      value: 'unpeople',\n      label: `Unpeople Transformation`,\n    },\n    {\n      value: 'purity',\n      label: `Purity Magic`,\n    },\n    {\n      value: 'defense',\n      label: `Base Defense`,\n    },\n  ].filter(({ value }) => !previousResearch.includes(value));\n  useEffect(() => {\n    form.setFieldsValue({\n      research: availableResearch[0]['value'],\n    });\n  }, [form, availableResearch]);\n\n  return (\n    <Form\n      initialValues={initialValues}\n      className=\"round-form third-round-form\"\n      form={form}\n      onFinish={onFinish}\n      onValuesChange={(_, allValues) => {\n        setMandatory1(allValues.mandatory1);\n        setMandatory(allValues.mandatory);\n        setLockedInvestments(\n          postGawnfallInvestments\n            .filter(({ name, price }) => {\n              if (previousInvestments.includes(name)) {\n                return false;\n              }\n              if (typeof price !== 'function') {\n                return false;\n              }\n              return price(allValues) === Infinity;\n            })\n            .map(({ name }) => name)\n        );\n      }}\n    >\n      <Card title={`Gawnfall`} type=\"inner\" className=\"gawnfall\">\n        <div className=\"two-columns\">\n          <Card title={`Strategy`} type=\"inner\">\n            {!merchantSolution && (\n              <Form.Item label={`Merchant dispute`} name=\"merchantSolution3\">\n                <Select\n                  options={[\n                    {\n                      value: 'neutral',\n                      label: `Neutral compromise (force Social  40)`,\n                    },\n                    {\n                      value: 'givini',\n                      label: `Favor New Givini`,\n                    },\n                    {\n                      value: 'wait',\n                      label: `Wait`,\n                    },\n                  ]}\n                />\n              </Form.Item>\n            )}\n            <Form.Item label={`Research`} name=\"research\">\n              <Select options={availableResearch} />\n            </Form.Item>\n            {!previousInvestments.includes('Lustlord Temples') && (\n              <Form.Item label={`Yelarel-related investments`} name=\"yelarel\">\n                <Select\n                  options={[\n                    {\n                      value: 'none',\n                      label: `Don't invest in the Lustlord cult`,\n                    },\n                    {\n                      value: 'min',\n                      label: `Pay ${nF(50000)} ProN for New Lustlord Statues`,\n                    },\n                    {\n                      value: 'max',\n                      label: `Invest a total of ${nF(\n                        800000\n                      )} ProN in the Lustlord Temples`,\n                    },\n                  ]}\n                />\n              </Form.Item>\n            )}\n            <Form.Item\n              label={`Buy the Goddess of Magic Statue for ${nF(10000)} ProN?`}\n              name=\"vera\"\n            >\n              <Radio.Group\n                options={[\n                  {\n                    value: true,\n                    label: `Yes`,\n                  },\n                  {\n                    value: false,\n                    label: `No`,\n                  },\n                ]}\n              />\n            </Form.Item>\n            <Form.Item\n              label={`Other investments you wish to do before the Council (example: Givini Tunnels)`}\n              name=\"mandatory1\"\n            >\n              <Select\n                options={preGawnfallInvestments\n                  .filter(\n                    ({ name }) =>\n                      !previousInvestments.includes(name) &&\n                      'Lustlord Temples' !== name &&\n                      // FIXME: Removing investments whose price can change from the list for now\n                      // Should be handled for real later\n                      ![\n                        'Denmiel Archives',\n                        \"Tarran'Kan Housing + Tarran'Kan Trade Upgrade\",\n                      ].includes(name)\n                  )\n                  .map(({ name }) => {\n                    return { label: name, value: name };\n                  })}\n                mode=\"multiple\"\n              />\n            </Form.Item>\n          </Card>\n          <Card title={`Investments-related results`} type=\"inner\">\n            <Alert\n              message={`Only the Succubi Accepted path is supported as of now.`}\n              type=\"info\"\n              showIcon\n            />\n            <Form.Item label={`Support for Tak'Kan`} name=\"gawnfallTakkan\">\n              <Select\n                options={[\n                  {\n                    value: 'major',\n                    label: `Major`,\n                  },\n                  {\n                    value: 'minor',\n                    label: `Minor`,\n                  },\n                  {\n                    value: 'none',\n                    label: `None`,\n                  },\n                ]}\n              />\n            </Form.Item>\n            <Form.Item label={`Promotion vote`} name=\"gawnfallHigh\">\n              <Select\n                options={[\n                  {\n                    value: 'herin_overwhelming',\n                    label: `Overwhelming victory for Herin`,\n                  },\n                  {\n                    value: 'herin_promoted',\n                    label: `Herin promoted`,\n                  },\n                  {\n                    value: 'kaskia_promoted',\n                    label: `Kaskia promoted`,\n                  },\n                  {\n                    value: 'kaskia_overwhelming',\n                    label: `Overwhelming victory for Kaskia`,\n                  },\n                ]}\n              />\n            </Form.Item>\n            <Form.Item\n              label={`Mercantile issue resolution`}\n              name=\"gawnfallMercantile\"\n            >\n              <Select\n                options={[\n                  {\n                    value: 'excellent',\n                    label: `Excellent`,\n                  },\n                  {\n                    value: 'good',\n                    label: `Good`,\n                  },\n                  {\n                    value: 'fair',\n                    label: `Fair`,\n                  },\n                  {\n                    value: 'poor',\n                    label: `Poor`,\n                  },\n                ]}\n              />\n            </Form.Item>\n            <Form.Item label={`Ardford's ban`} name=\"gawnfallArdford\">\n              <Select\n                options={[\n                  {\n                    value: 'overkill',\n                    label: `Lifted, with an extra bit of acceptance`,\n                  },\n                  {\n                    value: 'resolved',\n                    label: `Lifted`,\n                  },\n                  {\n                    value: 'unresolved',\n                    label: `Unsolved`,\n                  },\n                ]}\n              />\n            </Form.Item>\n            <Form.Item label={`Mother's Guard`} name=\"gawnfallMother\">\n              <Select\n                options={[\n                  {\n                    value: 'full_unlock',\n                    label: `Crushed`,\n                  },\n                  {\n                    value: 'partial_unlock',\n                    label: `Dealt with`,\n                  },\n                  {\n                    value: 'locked',\n                    label: `Unrestrained`,\n                  },\n                ]}\n              />\n            </Form.Item>\n          </Card>\n        </div>\n      </Card>\n      <Card title={`Post Gawnfall`} type=\"inner\">\n        <div className=\"reserves\">\n          <Form.Item\n            label={`Keep enough cash in reserve, if need be, to:`}\n            name=\"reserves\"\n          >\n            <Select\n              options={[\n                {\n                  label: `Open the ruins after the war`,\n                  value: 0,\n                },\n                {\n                  label: `Open the ruins before the war (${nF(5000000)} ProN)`,\n                  value: 5000000,\n                },\n                {\n                  label: `Open the ruins and buy everything but the Smithing in Kyangan (${nF(\n                    5000000 + 125000\n                  )} ProN)`,\n                  value: 5000000 + 125000,\n                },\n                {\n                  label: `Open the ruins and buy everything in Kyangan (${nF(\n                    5000000 + 125000 + 250000\n                  )} ProN)`,\n                  value: 5000000 + 125000 + 250000,\n                },\n              ]}\n            />\n          </Form.Item>\n          <Form.Item\n            label={`Also make sure to have the additional amount available`}\n            name=\"extra_reserves\"\n            tooltip={\n              <>\n                {`For extra expanses not covered in the previous option.`}\n                <br />\n                {`For example, if you also plan to buy Armory Upgrade and Entity's Shield Upgrade before the war, enter their total cost i.e. 260000.`}\n              </>\n            }\n          >\n            <InputNumber />\n          </Form.Item>\n        </div>\n        <Mandatory\n          form={form}\n          purchased={[\n            ...previousInvestments,\n            ...mandatory1,\n            ...lockedInvestments,\n          ]}\n          list=\"gawnfall\"\n        />\n        <Banned\n          form={form}\n          purchased={[\n            ...previousInvestments,\n            ...mandatory1,\n            ...mandatory,\n            ...lockedInvestments,\n          ]}\n          list=\"gawnfall\"\n        />\n      </Card>\n      <Form.Item>\n        <Button type=\"primary\" htmlType=\"submit\" loading={loading}>\n          {`Submit`}\n        </Button>\n      </Form.Item>\n    </Form>\n  );\n};\n\nexport default CustomForm;\n","import Ledger from '../results/Ledger';\nimport { Card } from 'antd';\nimport Addition from '../results/Addition';\nimport { roundThreeChanges as giviniRoundThreeChanges } from '../data/givini';\nimport { roundThreeChanges as takkanRoundThreeChanges } from '../data/takkan';\n\nconst filterInvestmentsByCountry = (investments, country) => {\n  return investments\n    .filter((inv) => !!inv[country])\n    .map((inv) => {\n      return { label: inv['name'], values: [inv[country]] };\n    })\n    .sort(({ label: a }, { label: b }) => a.localeCompare(b));\n};\n\nconst Result = ({\n  initialStandings,\n  nonInvestmentChanges,\n  investmentChanges,\n  decisions,\n}) => {\n  const investments = investmentChanges.investments;\n\n  return (\n    <Card title={`Changes`} className=\"results\">\n      <Ledger\n        initialStandings={initialStandings}\n        nonInvestmentChanges={nonInvestmentChanges}\n        investmentChanges={investmentChanges}\n      />\n      <div>\n        <Card title={`New Givini`} type=\"inner\">\n          <Addition\n            startingValue={initialStandings.givini}\n            dataSources={[\n              {\n                title: `Investments`,\n                dataSource: filterInvestmentsByCountry(investments, 'givini'),\n              },\n              {\n                title: `Other changes`,\n                dataSource: giviniRoundThreeChanges(decisions),\n              },\n            ]}\n          />\n        </Card>\n        <Card title={`Tak'Kan`} type=\"inner\">\n          <Addition\n            startingValue={initialStandings.takkan}\n            dataSources={[\n              {\n                title: `Investments`,\n                dataSource: filterInvestmentsByCountry(investments, 'takkan'),\n              },\n              {\n                title: `Other changes`,\n                dataSource: takkanRoundThreeChanges(decisions),\n              },\n            ]}\n          />\n        </Card>\n      </div>\n    </Card>\n  );\n};\n\nexport default Result;\n","import Form from './Form';\nimport { Typography } from 'antd';\nimport { buildFinalStandings } from '../misc';\nimport Result from './Result';\nimport ScrollTo from '../results/ScrollTo';\nimport { roundThreeValue as giviniRoundThreeValue } from '../data/givini';\nimport { roundThreeValue as takkanRoundThreeValue } from '../data/takkan';\n\nconst { Title } = Typography;\n\nconst gawnfallSocial = ({ gawnfallMother, gawnfallHigh }) => {\n  let social = 0;\n\n  if (gawnfallMother === 'full_unlock') {\n    social += 2;\n  }\n  if (gawnfallMother === 'partial_unlock') {\n    social += 1;\n  }\n  if (gawnfallHigh === 'herin_overwhelming') {\n    social += 1;\n  }\n  if (gawnfallHigh === 'kaskia_overwhelming') {\n    social -= 1;\n  }\n\n  return social;\n};\n\nconst onFinish = async ({\n  runInWoker,\n  setResult,\n  setError,\n  secondRoundResult,\n  values,\n}) => {\n  const { finalStandings: initialStandings } = secondRoundResult;\n\n  const {\n    research,\n    mandatory1,\n    yelarel,\n    gawnfallTakkan,\n    gawnfallMercantile,\n    gawnfallArdford,\n    gawnfallMother,\n    vera,\n    merchantSolution3,\n    mandatory: mandatory2,\n    banned,\n    gawnfallHigh,\n    reserves,\n    extra_reserves,\n  } = values;\n  const decisions = {\n    research,\n    gawnfallTakkan,\n    gawnfallMercantile,\n    gawnfallArdford,\n    gawnfallMother,\n    merchantSolution3,\n    gawnfallHigh,\n  };\n  let mandatory = [...mandatory1, ...mandatory2];\n  if (yelarel === 'max') {\n    mandatory.push('Lustlord Temples');\n  }\n\n  const misc = {\n    ...secondRoundResult.misc,\n    gawnfallTakkan,\n    gawnfallMother,\n    gawnfallArdford,\n    lustlordStatuesBought: yelarel === 'min',\n  };\n\n  const mercantileMoney = (() => {\n    switch (decisions.gawnfallMercantile) {\n      case 'excellent':\n        return 250000;\n      case 'good':\n        return 100000;\n      case 'poor':\n        return -100000;\n      default:\n        return 0;\n    }\n  })();\n\n  const ardfordOpen = ['resolved', 'overkill'].includes(\n    decisions.gawnfallArdford\n  );\n  const preInvestmentsOrii =\n    ardfordOpen &&\n    initialStandings.investments.includes('Ardford Restaurant') &&\n    initialStandings.investments.includes('Givini Teahouse Chain');\n\n  const nonInvestmentChangesList = [\n    yelarel === 'min' && {\n      name: `New Lustlord Statues`,\n      money: -50000,\n    },\n    vera && {\n      name: `Goddess of Magic Statue`,\n      money: -10000,\n    },\n    {\n      name: `Gawnfall social influence`,\n      social: gawnfallSocial(decisions),\n    },\n    {\n      name: `One-time mercantile issue modifier`,\n      money: mercantileMoney,\n    },\n  ].filter(Boolean);\n\n  const nonInvestmentChanges = {\n    money: nonInvestmentChangesList.reduce(\n      (acc, { money }) => acc + (money || 0),\n      0\n    ),\n    profits: 0,\n    social: nonInvestmentChangesList.reduce(\n      (acc, { social }) => acc + (social || 0),\n      0\n    ),\n    givini: giviniRoundThreeValue(decisions),\n    takkan: takkanRoundThreeValue(decisions),\n    list: nonInvestmentChangesList,\n  };\n\n  const params = {\n    ...misc,\n    previousInvestments: initialStandings.investments,\n    money:\n      initialStandings.money +\n      initialStandings.profits +\n      (nonInvestmentChanges.money - mercantileMoney),\n    giviniStart: initialStandings.givini,\n    giviniExtra: nonInvestmentChanges.givini,\n    otherRequirements: {\n      mandatory,\n      banned,\n      social:\n        decisions.merchantSolution3 === 'neutral'\n          ? Math.max(40 - initialStandings.social, 0)\n          : 0,\n      reserve:\n        reserves +\n        extra_reserves -\n        (initialStandings.profits + nonInvestmentChanges.profits),\n    },\n    list: 'gawnfall',\n  };\n\n  const result = await runInWoker(params);\n\n  if (!result) {\n    setResult(undefined);\n    setError(\n      `Couldn't find a working combination of investments for that strategy with these starting values, sorry.`\n    );\n    return;\n  }\n\n  const investmentChanges = { ...result, money: -result.price };\n\n  const allInvestments = [\n    ...initialStandings.investments,\n    ...investmentChanges.investments.map(({ name }) => name),\n  ];\n  const postInvestmentsOrri =\n    !preInvestmentsOrii &&\n    ardfordOpen &&\n    allInvestments.includes('Ardford Restaurant') &&\n    allInvestments.includes('Givini Teahouse Chain');\n\n  if (preInvestmentsOrii || postInvestmentsOrri) {\n    const orri = {\n      name: `Orri's Quest`,\n      social: 1,\n      // Need to explictly add the profits if no investment is new\n      profits: preInvestmentsOrii ? 15000 : 0,\n    };\n    nonInvestmentChanges.profits += orri.profits;\n    nonInvestmentChanges.list.push(orri);\n  }\n\n  setResult({\n    initialStandings,\n    decisions,\n    nonInvestmentChanges,\n    investmentChanges,\n    finalStandings: buildFinalStandings({\n      initialStandings,\n      nonInvestmentChanges,\n      investmentChanges,\n    }),\n    misc,\n  });\n  setError(undefined);\n};\n\nconst ThirdRound = ({\n  firstRoundResult,\n  secondRoundResult,\n  runInWoker,\n  loading,\n  setResult,\n  setError,\n  result,\n}) => {\n  const previousInvestments = secondRoundResult.finalStandings.investments;\n  const previousResearch = [\n    firstRoundResult.decisions.research,\n    secondRoundResult.decisions.research,\n  ];\n  const merchantSolution = (() => {\n    if (firstRoundResult.decisions.merchantSolution !== 'wait') {\n      return firstRoundResult.decisions.merchantSolution;\n    }\n\n    if (secondRoundResult.decisions.merchantSolution2 !== 'wait') {\n      return secondRoundResult.decisions.merchantSolution2;\n    }\n\n    return undefined;\n  })();\n\n  return (\n    <div className=\"round-three\">\n      <Title level={2}>{`Chapter 4  Round 3`}</Title>\n      <Form\n        previousInvestments={previousInvestments}\n        previousResearch={previousResearch}\n        onFinish={(values) => {\n          onFinish({\n            runInWoker,\n            setResult,\n            setError,\n            secondRoundResult,\n            values,\n          });\n        }}\n        loading={loading}\n        merchantSolution={merchantSolution}\n      />\n      <ScrollTo data={result}>\n        <Result {...result} />\n      </ScrollTo>\n    </div>\n  );\n};\n\nexport default ThirdRound;\n","import './App.css';\nimport FirstRound from './first-round';\nimport { useEffect, useState } from 'react';\nimport worker from 'workerize-loader!./worker'; // eslint-disable-line import/no-webpack-loader-syntax\nimport Disclaimer from './Disclaimer';\nimport Loading from './Loading';\nimport Failure from './Failure';\nimport SecondRound from './second-round';\nimport ThirdRound from './third-round';\n\nlet dumbCache = {};\nconst dumbKey = (params) => JSON.stringify(params);\n\nconst buildRunInWorker =\n  ({\n    workerInstance,\n    setLoading,\n    setCombinationsCount,\n    setProgress,\n    setInvestmentsCount,\n    setPreprogress,\n  }) =>\n  async (params) => {\n    const cacheKey = dumbKey(params);\n    if (!!dumbCache[cacheKey]) {\n      return dumbCache[cacheKey];\n    }\n\n    setLoading(true);\n\n    const investmentsCount = await workerInstance.prepare(params);\n    setInvestmentsCount(investmentsCount);\n    setPreprogress(0);\n    let combinationsCount = 0;\n    for (let i = 0; i <= investmentsCount; i++) {\n      combinationsCount += await workerInstance.preprocess();\n      setPreprogress(i / investmentsCount);\n    }\n\n    setCombinationsCount(combinationsCount);\n    setProgress(0);\n    const batchSize = 10000;\n    let result;\n    for (let i = 0; i < Math.ceil(combinationsCount / batchSize); i++) {\n      const end = Math.min((i + 1) * batchSize, combinationsCount);\n      result = await workerInstance.process(i * batchSize, end);\n      setProgress(end / combinationsCount);\n    }\n\n    await workerInstance.clean();\n\n    setLoading(false);\n    setCombinationsCount(undefined);\n    setInvestmentsCount(undefined);\n    setProgress(0);\n    setPreprogress(0);\n\n    dumbCache[cacheKey] = result;\n\n    return result;\n  };\n\nconst App = () => {\n  const [workerInstance, setWorkerInstance] = useState();\n  const [loading, setLoading] = useState(false);\n  const [combinationsCount, setCombinationsCount] = useState();\n  const [progress, setProgress] = useState(0);\n  const [investmentsCount, setInvestmentsCount] = useState();\n  const [preprogress, setPreprogress] = useState(0);\n\n  const [firstRoundResult, setFirstRoundResult] = useState();\n  const [secondRoundResult, setSecondRoundResult] = useState();\n  const [thirdRoundResult, setThirdRoundResult] = useState();\n  const [error, setError] = useState();\n\n  useEffect(() => {\n    if (!workerInstance) {\n      setWorkerInstance(worker());\n    }\n\n    return () => {\n      workerInstance?.terminate();\n    };\n  }, [workerInstance]);\n\n  if (!workerInstance) {\n    return null;\n  }\n\n  const runInWoker = buildRunInWorker({\n    workerInstance,\n    setLoading,\n    setCombinationsCount,\n    setProgress,\n    setInvestmentsCount,\n    setPreprogress,\n  });\n\n  const abort = async () => {\n    workerInstance.terminate();\n\n    const newWorkerInstance = worker();\n    await newWorkerInstance.clean();\n\n    setWorkerInstance(newWorkerInstance);\n\n    setCombinationsCount(undefined);\n    setInvestmentsCount(undefined);\n    setProgress(0);\n    setPreprogress(0);\n\n    setLoading(false);\n  };\n\n  return (\n    <div>\n      <Disclaimer />\n      <FirstRound\n        runInWoker={runInWoker}\n        loading={loading}\n        result={firstRoundResult}\n        setResult={(data) => {\n          setSecondRoundResult(undefined);\n          setThirdRoundResult(undefined);\n          setFirstRoundResult(data);\n        }}\n        setError={(error) => {\n          setSecondRoundResult(undefined);\n          setThirdRoundResult(undefined);\n          setError(error);\n        }}\n      />\n      {firstRoundResult && (\n        <SecondRound\n          runInWoker={runInWoker}\n          loading={loading}\n          result={secondRoundResult}\n          setResult={(data) => {\n            setThirdRoundResult(undefined);\n            setSecondRoundResult(data);\n          }}\n          setError={(error) => {\n            setThirdRoundResult(undefined);\n            setError(error);\n          }}\n          firstRoundResult={firstRoundResult}\n        />\n      )}\n      {firstRoundResult && secondRoundResult && (\n        <ThirdRound\n          firstRoundResult={firstRoundResult}\n          secondRoundResult={secondRoundResult}\n          runInWoker={runInWoker}\n          loading={loading}\n          setResult={setThirdRoundResult}\n          setError={setError}\n          result={thirdRoundResult}\n        />\n      )}\n      {loading && (\n        <Loading\n          combinationsCount={combinationsCount}\n          progress={progress}\n          preprogress={preprogress}\n          investmentsCount={investmentsCount}\n          abort={abort}\n        />\n      )}\n      {error && <Failure message={error} />}\n    </div>\n  );\n};\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}