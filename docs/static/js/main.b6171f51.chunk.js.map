{"version":3,"sources":["worker.js","data/investments.js","components/form/Select.js","components/form/Banned.js","components/form/Mandatory.js","components/form/Extra.js","first-round/Form.js","misc.js","results/Ledger.js","results/Addition.js","data/givini.js","first-round/results/Givini.js","data/takkan.js","first-round/results/Takkan.js","data/chalice.js","first-round/results/Chalice.js","first-round/results/index.js","results/ScrollTo.js","first-round/index.js","Disclaimer.js","Loading.js","Failure.js","second-round/Headquarters.js","second-round/Form.js","second-round/results/Givini.js","second-round/results/Takkan.js","second-round/results/Chalice.js","second-round/results/index.js","second-round/index.js","third-round/Form.js","third-round/Result.js","third-round/index.js","App.js","reportWebVitals.js","index.js"],"names":["addMethods","methods","module","exports","w","Worker","name","investments","price","profits","chapter1x2Tower","social","givini","chalice","chapter3Infrastructure","chapter1Steel","chapter1Bank","gawnfallMother","chapter3Armorer","takkan","lustlordStatuesBought","giviniStart","newGiviniScore","giviniExtra","reduce","acc","investment","gawnfallTakkan","previousInvestments","guildScore","chapter3Tradesmasher","map","filter","includes","length","ardfordOpen","gawnfallArdford","ifArdfordOpen","params","Infinity","postGawnfallInvestments","CustomSelect","key","label","tooltip","purchased","form","list","useEffect","setFieldsValue","getFieldValue","inv","Item","options","sort","a","b","localeCompare","value","mode","Banned","Select","Mandatory","Extra","Title","Typography","possiblePrevious","initialValues","previous","remainingPron","baseProfit","strategy","startingSocial","merchantSolution","jhenno","magicalItems","mandatory","research","banned","spending","requiredRule","required","message","CustomForm","onFinish","loading","Form","useForm","useState","setPrevious","setMandatory","setStrategy","onValuesChange","_","allValues","className","level","rules","valuePropName","title","type","htmlType","buildFinalStandings","initialStandings","investmentChanges","nonInvestmentChanges","finalStandings","forEach","money","nF","number","toLocaleString","numberColWidth","NumberCell","children","formattedNumber","format","Math","abs","Investments","dataSource","data","columns","dataIndex","sorter","render","width","pagination","Others","Ledger","sum","extraProfits","category","otherList","bordered","expandable","expandedRowRender","rowExpandable","defaultExpandAllRows","summary","Summary","Row","Cell","colSpan","Addition","startingValue","dataSources","index","scope","values","explanation","join","toString","val","preliminaryChanges","Boolean","baseValue","chapter3Investments","roundOneChanges","roundOneValue","roundTwoChanges","merchantSolution2","roundTwoValue","roundThreeChanges","merchantSolution3","gawnfallMercantile","roundThreeValue","Givini","roundOneInvestments","decisions","Takkan","initialInvestments","Chalice","Result","ScrollTo","resultRef","useRef","current","scrollIntoView","behavior","ref","socialRequirement","buildNonInvestmentsChange","nonInvestmentChangesList","giviniRoundOneValue","takkanRoundOneValue","chaliceRoundOneValue","compute","runInWoker","misc","otherRequirements","atLeastOne","undefined","setResult","setError","giviniBaseValue","chaliceBaseValue","result","FirstRound","Disclaimer","href","description","showIcon","closable","Loading","combinationsCount","progress","investmentsCount","preprogress","abort","visible","centered","footer","percent","round","danger","icon","PoweroffOutlined","onClick","Failure","status","base","magic","military","defense","subsitute","plusTenMilitary","plusFifteenMilitary","renderPlus","Error","Headquarters","source","headquarters","orcCouncil","firstRoundDecisions","purchasedInvestments","hq","setHq","split","x","parseInt","previousResearch","headquartersPrice","roundTwoInvestments","Text","roundOneResearch","takkanScore","councilResult","researches","yes","no","council","toFixed","roundOneDecisions","initialSocial","firstRoundResult","headquartersUpgradesPrice","pronNote","giviniRoundTwoValue","takkanRoundTwoValue","chaliceRoundTwoValue","completedResearch","SecondRound","mandatory1","yelarel","vera","gawnfallHigh","reserves","extra_reserves","setMandatory1","lockedInvestments","setLockedInvestments","availableResearch","Group","preGawnfallInvestments","filterInvestmentsByCountry","country","giviniRoundThreeChanges","takkanRoundThreeChanges","chaliceRoundThreeChanges","gawnfallSocial","preInvestmentsOrii","preInvestmentsTradesmasher","pastInvestmentsUpdate","total","tradesmasherProfits","investmentsList","find","projectedPastInvestmentsUpdate","secondRoundResult","mandatory2","push","mercantileMoney","giviniRoundThreeValue","takkanRoundThreeValue","chaliceRoundThreeValue","max","reserve","allInvestments","ThirdRound","dumbCache","dumbKey","JSON","stringify","App","workerInstance","setWorkerInstance","setLoading","setCombinationsCount","setProgress","setInvestmentsCount","setPreprogress","setFirstRoundResult","setSecondRoundResult","thirdRoundResult","setThirdRoundResult","error","worker","terminate","cacheKey","prepare","i","preprocess","batchSize","ceil","end","min","process","clean","buildRunInWorker","newWorkerInstance","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","StrictMode","document","getElementById"],"mappings":"2HACI,IAAIA,EAAa,EAAQ,KACrBC,EAAU,CAAC,UAAU,aAAa,UAAU,SAChDC,EAAOC,QAAU,WAChB,IAAIC,EAAI,IAAIC,OAAO,IAA0B,iCAAkC,CAAEC,KAAM,qBAGvF,OAFAN,EAAWI,EAAGH,GAEPG,I,0QCLNG,EAAc,CAClB,CACED,KAAM,oBACNE,MAAO,IACPC,QAAS,MAEX,CACEH,KAAM,0BACNE,MAAO,IACPC,QAAS,MAEX,CACEH,KAAM,wBACNE,MAAO,IACPC,QAAS,KAEX,CACEH,KAAM,2BACNE,MAAO,YACL,OAD8B,EAAtBE,gBAEC,IAEF,KAETC,OAAQ,GAEV,CACEL,KAAM,wBACNE,MAAO,IACPC,QAAS,KAEX,CACEH,KAAM,oBACNE,MAAO,IACPC,QAAS,MACTG,OAAQ,EACRC,QAAS,GAEX,CACEP,KAAM,wBACNE,MAAO,qBAAGM,uBACiB,IAAS,MACpCL,QAAS,IACTI,QAAS,GAEX,CACEP,KAAM,yBACNE,MAAO,KACPC,QAAS,MAEX,CACEH,KAAM,sBACNE,MAAO,qBAAGO,cAAuC,KAAQ,KACzDN,QAAS,KAEX,CACEH,KAAM,2BACNE,MAAO,YACL,OAD2B,EAAnBQ,aAEC,KAEF,KAETP,QAAS,MAEX,CACEH,KAAM,oBACNE,MAAO,qBAAGM,uBACiB,KAAS,MACpCL,QAAS,KACTE,OAAQ,GAEV,CACEL,KAAM,mBACNE,MAAO,MACPC,QAAS,KACTE,OAAQ,GAEV,CACEL,KAAM,qBACNE,MAAO,KACPC,QAAS,KAEX,CACEH,KAAM,oBACNE,MAAO,MACPC,QAAS,KAEX,CACEH,KAAM,mBACNE,MAAO,YACL,MAAuB,gBADM,EAArBS,eAEC,KAEF,MAETR,QAAS,IACTE,OAAQ,GAEV,CACEL,KAAM,gBACNE,MAAO,IACPC,QAAS,MAEX,CACEH,KAAM,mBACNE,MAAO,YACL,OAD8B,EAAtBU,gBAEC,IAEF,MAETT,QAAS,IACTI,QAAS,GAEX,CACEP,KAAM,mBACNE,MAAO,MACPC,QAAS,KACTI,QAAS,GAEX,CACEP,KAAM,iBACNE,MAAO,KACPC,QAAS,IACTG,OAAQ,EACRO,OAAQ,EACRN,QAAS,GAEX,CACEP,KAAM,mBACNE,MAAO,YACL,OADoC,EAA5BY,sBAEC,KAEF,KAETX,QAAS,IACTI,QAAS,YACP,OADsC,EAA5BO,sBAED,EAEF,IAGX,CACEd,KAAM,qBACNE,MAAO,IACPC,QAAS,IACTG,OAAQ,EACRD,OAAQ,EACRQ,OAAQ,GAEV,CACEb,KAAM,2BACNE,MAAO,KACPG,OAAQ,EACRE,QAAS,GAEX,CACEP,KAAM,cACNE,MAAO,IACPG,OAAQ,EACRE,QAAS,GAEX,CACEP,KAAM,kBACNE,MAAO,IACPC,QAAS,IACTG,OAAQ,GAEV,CACEN,KAAM,sBACNE,MAAO,YAA0C,IAAD,IAAtCa,YAAaC,OAAyB,MAAR,EAAQ,EAC9C,OAAIA,EAAiB,GACZ,IAELA,EAAiB,GACZ,IAELA,EAAiB,GACZ,IAELA,EAAiB,GACZ,IAEF,KAETb,QAAS,YAAwD,IAAD,IAApDY,mBAAoD,MAAtC,EAAsC,MAAnCE,YACrBD,EACJD,QAF4D,MAArB,EAAqB,KAAlBd,YAI9BiB,QAAO,SAACC,EAAKC,GACvB,OAAOD,IAAiB,OAAVC,QAAU,IAAVA,OAAA,EAAAA,EAAYd,SAAU,KACnC,GACL,OAAIU,EAAiB,GACZ,KAELA,EAAiB,GACZ,IAELA,EAAiB,GACZ,IAELA,EAAiB,GACZ,KAEF,KAETV,OAAQ,GAEV,CACEN,KAAM,wBACNE,MAAO,MACPC,QAAS,IACTG,OAAQ,EACRD,OAAQ,EACRQ,OAAQ,EACRN,QAAS,GAEX,CACEP,KAAM,iBACNE,MAAO,KACPC,QAAS,IACTG,OAAQ,EACRO,OAAQ,EACRN,QAAS,GAEX,CACEP,KAAM,oBACNE,MAAO,IACPC,QAAS,IACTG,OAAQ,GAEV,CACEN,KAAM,eACNE,MAAO,IACPI,OAAQ,GACRD,OAAQ,EACRQ,OAAQ,EACRN,QAAS,GAEX,CACEP,KAAM,gDACNE,MAAO,YAAyB,IAAtBmB,EAAqB,EAArBA,eACR,MAAuB,UAAnBA,EACK,KAEc,UAAnBA,EACK,IAEF,MAETlB,QAAS,IACTE,OAAQ,EACRQ,OAAQ,GAEV,CACEb,KAAM,0BACNE,MAAO,IACPC,QAAS,KACTE,OAAQ,EACRQ,OAAQ,GAEV,CACEb,KAAM,cACNE,MAAO,KACPC,QAAS,IACTE,OAAQ,EACRQ,OAAQ,GAEV,CACEb,KAAM,uBACNE,MAAO,KACPC,QAAS,YAKF,IAAD,IAJJF,mBAII,MAJU,GAIV,MAHJqB,2BAGI,MAHkB,GAGlB,EAFJD,EAEI,EAFJA,eAGME,GADF,EADJC,qBAG0B,EAAI,GAC5B,sBAAIF,GAAJ,YAA4BrB,EAAYwB,KAAI,qBAAGzB,UAAkB0B,QAC/D,SAAC1B,GACC,MAAO,CACL,mBACA,yBACA,sBACA,mBACA,qBACA2B,SAAS3B,MAEb4B,QACkB,UAAnBP,EAA6B,EAAI,GAEpC,OAAIE,EAAa,EACR,KAEU,IAAfA,EACK,IAEU,IAAfA,EACK,KAEU,IAAfA,EACK,MAEU,IAAfA,EACK,KAEU,IAAfA,EACK,MAEF,KAETV,OAAQ,GAEV,CACEb,KAAM,yBACNE,MAAO,KACPC,QAAS,IACTE,OAAQ,EACRQ,OAAQ,GAEV,CACEb,KAAM,mBACNE,MAAO,IACPC,QAAS,IACTU,OAAQ,GAEV,CACEb,KAAM,mBACNE,MAAO,IACPG,OAAQ,EACRQ,OAAQ,IAEV,CACEb,KAAM,cACNE,MAAO,IACPG,OAAQ,EACRQ,OAAQ,GAEV,CACEb,KAAM,oBACNE,MAAO,IACPG,OAAQ,EACRQ,OAAQ,GAEV,CACEb,KAAM,wCACNE,MAAO,KACPI,OAAQ,GAEV,CACEN,KAAM,4EACNE,MAAO,IACPW,OAAQ,IAINgB,EAAc,SAAC,GAAyB,IAAvBC,EAAsB,EAAtBA,gBACrB,MAA2B,aAApBA,GAAsD,aAApBA,GAGrCC,EAAgB,SAAC7B,GACrB,OAAO,SAAC8B,GAAD,OAAaH,EAAYG,IAAW9B,GAAU+B,MAG1CC,EAAuB,UAC/BjC,EAD+B,CAElC,CACED,KAAM,eACNE,MAAO,YAAyB,IAAtBmB,EAAqB,EAArBA,eACR,MAAuB,UAAnBA,EACK,KAEc,UAAnBA,EACK,IAEFY,KAET9B,QAAS,MACTE,OAAQ,EACRQ,OAAQ,GAEV,CACEb,KAAM,cACNE,MAAO6B,EAAc,MACrB5B,QAAS,OAEX,CACEH,KAAM,qBACNE,MAAO6B,EAAc,KACrB5B,QAAS,MAEX,CACEH,KAAM,yBACNE,MAAO6B,EAAc,KACrB5B,QAAS,KAEX,CACEH,KAAM,kBACNE,MAAO6B,EAAc,KACrB5B,QAAS,MAEX,CACEH,KAAM,qBACNE,MAAO6B,EAAc,KACrB5B,QAAS,SAAC6B,GAAY,IACZ/B,EAA0C+B,EAA1C/B,YADW,EAC+B+B,EAA7BV,2BADF,MACwB,GADxB,EAEnB,OACEO,EAAYG,IACZ,sBACKV,GADL,YAEKrB,EAAYwB,KAAI,qBAAGzB,UACtB2B,SAAS,yBAEJ,KAEF,QAYE1B,I,OClZAkC,EA3BM,SAAC,GAAqD,IDsa5CC,ECtaPpC,EAAkD,EAAlDA,KAAMqC,EAA4C,EAA5CA,MAAOC,EAAqC,EAArCA,QAASC,EAA4B,EAA5BA,UAAWC,EAAiB,EAAjBA,KAAMC,EAAW,EAAXA,KAS7D,OARAC,qBAAU,WACRF,EAAKG,eAAL,eACG3C,EAAOwC,EACLI,cAAc5C,GACd0B,QAAO,SAACmB,GAAD,OAAUN,EAAUZ,SAASkB,UAExC,CAACL,EAAMD,EAAWvC,IAGnB,cAAC,IAAK8C,KAAN,CAAWT,MAAOA,EAAOrC,KAAMA,EAAMsC,QAASA,EAA9C,SACE,cAAC,IAAD,CACES,SD0ZuBX,EC1ZCK,ED2ZlB,aAARL,EACKF,EAEFjC,GC7ZEyB,QAAO,gBAAG1B,EAAH,EAAGA,KAAH,OAAeuC,EAAUZ,SAAS3B,MACzCgD,MAAK,kBAASC,EAAT,EAAGjD,KAAmBkD,EAAtB,EAAgBlD,KAAhB,OAA8BiD,EAAEE,cAAcD,MACnDzB,KAAI,YAAe,IAAZzB,EAAW,EAAXA,KACN,MAAO,CACLqC,MAAOrC,EACPoD,MAAOpD,MAGbqD,KAAK,gBCVEC,EAbA,SAAC,GAAwC,IAAtCf,EAAqC,EAArCA,UAAWC,EAA0B,EAA1BA,KAAMC,EAAoB,EAApBA,KAAMH,EAAc,EAAdA,QACvC,OACE,cAACiB,EAAD,CACEf,KAAMA,EACND,UAAWA,EACXF,MAAK,2DACLrC,KAAK,SACLsC,QAASA,EACTG,KAAMA,KCKGe,EAbG,SAAC,GAA+C,IAA7ChB,EAA4C,EAA5CA,KAAMD,EAAsC,EAAtCA,UAAWD,EAA2B,EAA3BA,QAASD,EAAkB,EAAlBA,MAAOI,EAAW,EAAXA,KACpD,OACE,cAACc,EAAD,CACEvD,KAAK,YACLwC,KAAMA,EACND,UAAWA,EACXF,MAAOA,GAAK,yDACZC,QAASA,EACTG,KAAMA,KCIGgB,EAZD,WACZ,OACE,cAAC,IAAKX,KAAN,CACET,MAAK,iBACLrC,KAAK,WACLsC,QAAO,qFAHT,SAKE,cAAC,IAAD,OCMEoB,EAAUC,IAAVD,MAEFE,EAAmB,CACvB,oBACA,wBACA,2BACA,oBACA,mBACA,qBACA,oBACA,mBACA,gBACA,mBACA,sBACA,cACA,qBACA,yBACA,kBACA,sBAGIC,EAAgB,CACpBC,SAAU,CACR,sBACA,oBACA,wBACA,gBACA,oBACA,cACA,kBACA,sBAEFC,cAAe,KACfC,WAAY,OACZvD,eAAe,EACfwD,SAAU,aACVC,eAAgB,GAChB1D,wBAAwB,EACxB2D,iBAAkB,OAClBC,OAAQ,WACRC,aAAc,SACdC,UAAW,CAAC,sBAAuB,kBACnCC,SAAU,MACVC,OAAQ,CACN,6EAEFC,SAAU,EACV/D,cAAc,EACdN,iBAAiB,EACjBQ,iBAAiB,EACjBY,sBAAsB,GAYlBkD,EAAe,CAAEC,UAAU,EAAMC,QAAQ,2BA4OhCC,EA1OI,SAAC,GAA2B,IAXtBpC,EAWHqC,EAAwB,EAAxBA,SAAUC,EAAc,EAAdA,QAAc,EAC7BC,IAAKC,UAAbzC,EADqC,sBAGZ0C,mBAASrB,EAAcC,UAHX,mBAGrCA,EAHqC,KAG3BqB,EAH2B,OAIVD,mBAASrB,EAAcS,WAJb,mBAIrCA,EAJqC,KAI1Bc,EAJ0B,OAKZF,mBAASrB,EAAcI,UALX,mBAKrCA,EALqC,KAK3BoB,EAL2B,KAoB5C,OAbA3C,qBAAU,WACJ,CAAC,SAAU,cAAcf,SAASsC,GACW,SAA3CzB,EAAKI,cAAc,qBACrBJ,EAAKG,eAAe,CAAEwB,iBAAkB,YAKG,YAA3C3B,EAAKI,cAAc,qBACrBJ,EAAKG,eAAe,CAAEwB,iBAAkB,WAEzC,CAAC3B,EAAMyB,IAGR,eAAC,IAAD,CACEJ,cAAeA,EACfiB,SAAUA,EACVQ,eAAgB,SAACC,EAAGC,GAClBL,EAAYK,EAAU1B,UACtBsB,EAAaI,EAAUlB,WACvBe,EAAYG,EAAUvB,WAExBwB,UAAU,8BACVjD,KAAMA,EATR,UAWE,sBAAKiD,UAAU,aAAf,UACE,cAAC/B,EAAD,CAAOgC,MAAO,EAAd,0BACA,eAAC,IAAD,WACE,sBAAKD,UAAU,UAAf,UACE,cAAC,IAAK3C,KAAN,CACET,MAAK,yCACLrC,KAAK,gBACLsC,QAAO,+FACPqD,MAAO,CAACjB,GAJV,SAME,cAAC,IAAD,MAEF,cAAC,IAAK5B,KAAN,CACET,MAAK,yCACLrC,KAAK,aACLsC,QAAO,2GACPqD,MAAO,CAACjB,GAJV,SAME,cAAC,IAAD,MAEF,cAAC,IAAK5B,KAAN,CACET,MAAK,iDACLrC,KAAK,iBACLsC,QAAO,6FACPqD,MAAO,CAACjB,GAJV,SAME,cAAC,IAAD,SAIJ,cAAC,IAAK5B,KAAN,CACET,MAAK,iDACLrC,KAAK,WAFP,SAIE,cAAC,IAAD,CACE+C,SA9EWN,EA8EcmB,EA7E9B,YAAInB,GAAMO,OAAOvB,KAAI,SAAC2B,GAC3B,MAAO,CACLf,MAAOe,EACPA,MAAOA,OA2ECC,KAAK,eAIT,sBAAKoC,UAAU,aAAf,UACE,cAAC,IAAK3C,KAAN,CAAW9C,KAAK,kBAAkB4F,cAAc,UAAhD,SACE,cAAC,IAAD,8EAEA9B,EAASnC,SAAS,wBAClB,cAAC,IAAKmB,KAAN,CAAW9C,KAAK,gBAAgB4F,cAAc,UAA9C,SACE,cAAC,IAAD,6EAGF9B,EAASnC,SAAS,6BAClB,cAAC,IAAKmB,KAAN,CAAW9C,KAAK,eAAe4F,cAAc,UAA7C,SACE,cAAC,IAAD,oEAIF9B,EAASnC,SAAS,0BAClBmC,EAASnC,SAAS,uBAElB,cAAC,IAAKmB,KAAN,CAAW9C,KAAK,yBAAyB4F,cAAc,UAAvD,SACE,cAAC,IAAD,mEAGJ,cAAC,IAAK9C,KAAN,CAAW9C,KAAK,kBAAkB4F,cAAc,UAAhD,SACE,cAAC,IAAD,mEAEF,cAAC,IAAK9C,KAAN,CAAW9C,KAAK,uBAAuB4F,cAAc,UAArD,SACE,cAAC,IAAD,gEAMR,cAAClC,EAAD,CAAOgC,MAAO,EAAd,sCACA,eAAC,IAAD,CAAMG,MAAK,WAAX,UACE,cAAC,IAAK/C,KAAN,CAAW9C,KAAK,WAAWqC,MAAK,oBAAhC,SACE,cAAC,IAAD,CACEU,QAAS,CACP,CACEV,MAAM,qGACNe,MAAO,SAET,CACEf,MAAM,mIACNe,MAAO,cAET,CACEf,MAAM,+HACNe,MAAO,UAET,CACEf,MAAM,wHACNe,MAAO,mBAKf,qBAAKqC,UAAU,UAAf,SACE,cAAC,IAAK3C,KAAN,CAAWT,MAAK,mBAAsBrC,KAAK,mBAA3C,SACE,cAAC,IAAD,CACE+C,QAAS,CACP,CACEK,MAAO,UACPf,MAAM,+CAER,CACEe,MAAO,SACPf,MAAM,oBAER,CACEe,MAAO,OACPf,MAAM,eAMhB,sBAAKoD,UAAU,UAAf,UACE,cAAC,IAAK3C,KAAN,CAAWT,MAAK,WAAcrC,KAAK,WAAnC,SACE,cAAC,IAAD,CACE+C,QAAS,CACP,CACEK,MAAO,MACPf,MAAM,uBAER,CACEe,MAAO,WACPf,MAAM,2BAER,CACEe,MAAO,SACPf,MAAM,gBAER,CACEe,MAAO,UACPf,MAAM,qBAKd,cAAC,IAAKS,KAAN,CAAWT,MAAK,uBAA0BrC,KAAK,SAA/C,SACE,cAAC,IAAD,CACE+C,QAAS,CACP,CACEK,MAAO,WACPf,MAAM,YAER,CACEe,MAAO,WACPf,MAAM,iBAKd,cAAC,IAAKS,KAAN,CAAWT,MAAK,6BAAgCrC,KAAK,eAArD,SACE,cAAC,IAAD,CACE+C,QAAS,CACP,CACEK,MAAO,UACPf,MAAM,kBAER,CACEe,MAAO,SACPf,MAAM,UAER,CACEe,MAAO,SACPf,MAAM,mBAOhB,cAAC,IAAD,IACA,cAAC,EAAD,CACEE,UAAWuB,EACXtB,KAAMA,EACNF,QAAO,6EAET,cAAC,EAAD,CACEC,UAAS,sBAAMuB,GAAN,YAAmBQ,IAC5B9B,KAAMA,EACNF,QACE,qLAEE,uBAFF,qKAOJ,cAAC,EAAD,IAEA,cAAC,IAAKQ,KAAN,UACE,cAAC,IAAD,CAAQgD,KAAK,UAAUC,SAAS,SAAShB,QAASA,EAAlD,6B,kBChTGiB,EAAsB,SAAC,GAI7B,IAHLC,EAGI,EAHJA,iBACAC,EAEI,EAFJA,kBACAC,EACI,EADJA,qBAEIC,EAAiB,GAoBrB,MAlBA,CAAC,UAAW,SAAU,SAAU,SAAU,WAAWC,SAAQ,SAACjE,GAC5DgE,EAAehE,GACb6D,EAAiB7D,IAChB8D,EAAkB9D,IAAQ,IAC1B+D,EAAqB/D,IAAQ,MAGlCgE,EAAc,YAAd,sBACKH,EAAiBhG,aADtB,YAEKiG,EAAkBjG,YAAYwB,KAAI,qBAAGzB,UAG1CoG,EAAc,MACZH,EAAiBK,MACjBL,EAAiB9F,QACjB+F,EAAkBhG,MAClBiG,EAAqBG,MAEhBF,GAGIG,EAAK,SAACC,GAAD,OAAYA,EAAOC,eAAe,UCzB9CC,EAAiB,IAEjBC,EAAa,SAAC,GAA0B,IACtCH,EADqC,EAAvBI,SAEdC,EAFqC,EAAbC,OAEKP,EAAGQ,KAAKC,IAAIR,IAAWO,KAAKC,IAAIR,GAEnE,MAAM,GAAN,OAAUA,EAAS,EAAT,SAAV,OAAmCK,IAG/BI,EAAc,SAAC,GAAqB,IAClCC,EADiC,EAAlBjH,YACUwB,KAAI,YAAwB,IAArBzB,EAAoB,EAApBA,KAASmH,EAAW,wBACxD,OAAO,aACL/E,IAAKpC,EACLA,QACGmH,MAIDC,EAAU,CACd,CACEvB,MAAM,OACNwB,UAAW,OACXC,OAAQ,SAACrE,EAAGC,GAAJ,OAAUD,EAAEjD,KAAKmD,cAAcD,EAAElD,QAE3C,CACE6F,MAAM,QACNwB,UAAW,QACXE,OAAQ,SAACrH,GAAD,OAAWqG,EAAGrG,IACtBoH,OAAQ,SAACrE,EAAGC,GAAJ,OAAUD,EAAE/C,MAAQgD,EAAEhD,OAC9BsH,MAAOd,GAET,CACEb,MAAM,UACNwB,UAAW,UACXE,OAAQ,SAACpH,GAAD,OAAaoG,EAAGpG,IACxBmH,OAAQ,SAACrE,EAAGC,GAAJ,OAAUD,EAAE9C,QAAU+C,EAAE/C,SAChCqH,MAAOd,GAET,CACEb,MAAM,SACNwB,UAAW,SACXE,OAAQ,eAAClH,EAAD,uDAAU,EAAV,OAAgB,cAAC,EAAD,UAAaA,KACrCmH,MAAOd,IAIX,OAAO,cAAC,IAAD,CAAOQ,WAAYA,EAAYE,QAASA,EAASK,YAAY,KAGhEC,EAAS,SAAC,GAAmB,IAAD,IAAhBjF,KACVyE,QAD0B,MAAT,GAAS,GACRzF,KAAI,YAAwB,IAArBzB,EAAoB,EAApBA,KAASmH,EAAW,wBACjD,OAAO,aACL/E,IAAKpC,EACLA,QACGmH,MAIDI,EAAS,eAACnE,EAAD,uDAAS,EAAT,OAAe,cAAC,EAAD,CAAY0D,QAAQ,EAApB,SAA2B1D,KAEnDgE,EAAU,CACd,CACEvB,MAAM,OACNwB,UAAW,QAEb,CACExB,MAAM,OACNwB,UAAW,QACXE,SACAC,MAAOd,GAET,CACEb,MAAM,UACNwB,UAAW,UACXE,SACAC,MAAOd,GAET,CACEb,MAAM,SACNwB,UAAW,SACXE,SACAC,MAAOd,IAIX,OAAO,cAAC,IAAD,CAAOQ,WAAYA,EAAYE,QAASA,EAASK,YAAY,KAgJvDE,EA7IA,SAAC,GAIT,IAHL1B,EAGI,EAHJA,iBACAE,EAEI,EAFJA,qBACAD,EACI,EADJA,kBAEMqB,EAAS,SAACnE,EAAD,GAAqB,IAAXhB,EAAU,EAAVA,IACvB,MAAI,CAAC,OAAQ,SAAST,SAASS,GACtBmE,EAAGnD,GAEL,cAAC,EAAD,CAAY0D,QAAQ,EAApB,SAA2B1D,KAG9BgE,EAAU,CACd,CACEC,UAAW,YAEb,CACExB,MAAM,OACNwB,UAAW,QACXE,SACAC,MAAOd,GAET,CACEb,MAAM,UACNwB,UAAW,UACXE,SACAC,MAAOd,GAET,CACEb,MAAM,SACNwB,UAAW,SACXE,SACAC,MAAOd,IAILkB,EAAM,SAACxF,GAAD,OACV6D,EAAiB7D,GAAO+D,EAAqB/D,GAAO8D,EAAkB9D,IAElEyF,EACJ3B,EAAkB/F,QAClB+F,EAAkBjG,YAAYiB,QAC5B,SAACC,EAAD,UAAsBA,EAAtB,EAAQhB,UACR,GAGE+G,EAAa,CAAC,2BAEbjB,GAFY,IAGf7D,IAAK,OACL0F,SAAS,eAEX,CACE1F,IAAK,uBACL0F,SAAS,qBACTxB,MAAOL,EAAiB9F,QACxBA,QAAS,EACTE,OAAQ,GAXO,2BAcZ6F,GAdY,IAef9D,IAAK,cACL0F,SAAS,+BACTxB,OAAQJ,EAAkBhG,MAC1BC,QAAS+F,EAAkB/F,QAAU0H,IAlBtB,2BAqBZ1B,GArBY,IAsBf/D,IAAK,QACL0F,SAAS,gBACT3H,QAASgG,EAAqBhG,QAAU0H,KAItCE,EACAF,EAAe,EACX,GAAN,mBACK1B,EAAqB1D,MAD1B,CAEE,CACEzC,KAAK,sCACLG,QAAS0H,KAKR1B,EAAqB1D,KAG9B,OACE,cAAC,IAAD,CACEyE,WAAYA,EACZE,QAASA,EACTK,YAAY,EACZO,UAAU,EACVC,WAAY,CACVC,kBAAmB,YAAc,IAAX9F,EAAU,EAAVA,IACpB,MAAY,gBAARA,EACK,cAAC,EAAD,CAAanC,YAAaiG,EAAkBjG,cAEzC,UAARmC,EACK,cAAC,EAAD,CAAQK,KAAMsF,IAEhB,MAETI,cAAe,YAAc,IAAD,EAAV/F,EAAU,EAAVA,IAChB,MAAY,gBAARA,KAIQ,UAARA,KAAoB,UAAC+D,EAAqB1D,YAAtB,aAAC,EAA2Bb,UAMtDwG,sBAAsB,GAExBC,QAAS,WACP,OACE,eAAC,IAAMC,QAAQC,IAAf,WACE,cAAC,IAAMD,QAAQE,KAAf,CACEC,QAAS,EADX,+CAGA,cAAC,IAAMH,QAAQE,KAAf,UACGjC,EACCN,EAAiBK,MACfL,EAAiB9F,QACjBgG,EAAqBG,MACrBJ,EAAkBhG,SAGxB,cAAC,IAAMoI,QAAQE,KAAf,UAAqBjC,EAAGqB,EAAI,cAC5B,cAAC,IAAMU,QAAQE,KAAf,UAAqBZ,EAAI,gBAI/BnC,UAAU,YC7KDiD,EAtDE,SAAC,GAAwC,IAAD,IAArCC,qBAAqC,MAArB,EAAqB,EAAlBC,EAAkB,EAAlBA,YACrC,OACE,wBAAOnD,UAAU,WAAjB,UACE,gCACE,+BACE,+CACA,6BAAKkD,IACL,4BAGHC,EACElH,QAAO,qBAAGwF,WAA4BtF,OAAS,KAC/CH,KAAI,WAAwBoH,GAAW,IAAhChD,EAA+B,EAA/BA,MAAOqB,EAAwB,EAAxBA,WACb,OACE,kCACE,6BACE,oBAAIuB,QAAQ,IAAIK,MAAM,MAAtB,SACGjD,MAGJqB,EAAWzF,KAAI,WAAiCoH,GAAW,IAAzCxG,EAAwC,EAAxCA,MAAO0G,EAAiC,EAAjCA,OAAQC,EAAyB,EAAzBA,YAChC,OACE,+BACE,6BAAK3G,IACL,6BAAK0G,EAAOtH,KAAI,SAAC2B,GAAD,iBAAeA,MAAS6F,KAAK,OAC7C,6BAAKD,MAHEH,EAAMK,iBARTL,EAAMK,eAkBxB,gCACE,+BACE,oBAAIJ,MAAM,MAAV,mBACA,6BACGH,EACCC,EAAY1H,QACV,SAACC,EAAD,UACEA,EADF,EAAQ+F,WAEKhG,QACT,SAACC,EAAD,UACEA,EADF,EAAQ4H,OACO7H,QAAO,SAACC,EAAKgI,GAAN,OAAchI,EAAMgI,OAC1C,KAEJ,cC7CVvB,EAAM,SAACnF,GAAD,OACVA,EAAKvB,QACH,SAACC,EAAD,UAAqBA,EAArB,EAAQ4H,OAA0B7H,QAAO,SAACC,EAAKiC,GAAN,OAAgBjC,EAAMiC,IAAO,KACtE,IAKSgG,EAAqB,SAAC,GACjC,MAAO,CACL,CAAE/G,MAAM,YAAc0G,OAAQ,CAAC,EAAG,EAAG,EAAG,EAAG,IAC3C,CACE1G,MAAM,mBACN0G,OAAQ,CAAC,GACTC,YAAY,eANqC,EAAlB/I,YAQrB0B,SAAS,sBAAwB,CAC3CU,MAAM,oBACN0G,OAAQ,CAAC,KAEXrH,OAAO2H,UAGEC,EAAY,SAAC,GAAD,IAAGC,EAAH,EAAGA,oBAAH,OAjBI,EAkBX3B,EAAIwB,EAAmB,CAAEnJ,YAAasJ,MAE3CC,EAAkB,SAAC,GAAwC,IAAtCrF,EAAqC,EAArCA,iBAChC,MAAO,CACY,WAFkD,EAAnBE,cAEnB,CAC3BhC,MAAM,qCACN0G,OAAQ,CAAC,IAEU,YAArB5E,GAAkC,CAChC9B,MAAM,uCACN0G,OAAQ,CAAC,IAEU,WAArB5E,GAAiC,CAC/B9B,MAAM,qCACN0G,OAAQ,CAAC,IAEX,CAAE1G,MAAM,mCAAqC0G,OAAQ,CAAC,IACtD,CAAE1G,MAAM,cAAgB0G,OAAQ,CAAC,IACjC,CACE1G,MAAM,mBACN0G,OAAQ,CAAC,GACTC,YAAY,uFAEdtH,OAAO2H,UAGEI,EAAgB,kBAAe7B,EAAI4B,EAAe,WAAf,eAEnCE,EAAkB,SAAC,GAA2B,IAAzBC,EAAwB,EAAxBA,kBAChC,MAAO,CACiB,YAAtBA,GAAmC,CACjCtH,MAAM,uCACN0G,OAAQ,CAAC,IAEW,WAAtBY,GAAkC,CAChCtH,MAAM,qCACN0G,OAAQ,CAAC,IAEX,CACE1G,MAAM,mBACN0G,OAAQ,CAAC,GACTC,YAAY,uFAEdtH,OAAO2H,UAGEO,EAAgB,kBAAehC,EAAI8B,EAAe,WAAf,eAEnCG,GAAoB,SAAC,GAI3B,IAHLC,EAGI,EAHJA,kBACAzI,EAEI,EAFJA,eACA0I,EACI,EADJA,mBAEA,MAAO,CACiB,YAAtBD,GAAmC,CACjCzH,MAAM,uCACN0G,OAAQ,CAAC,IAEW,WAAtBe,GAAkC,CAChCzH,MAAM,qCACN0G,OAAQ,CAAC,IAEQ,UAAnB1H,GAA8B,CAC5BgB,MAAM,yBACN0G,OAAQ,CAAC,IAEX,CAAC,YAAa,QAAQpH,SAASoI,IAAuB,CACpD1H,MAAM,gCACN0G,OAAQ,CAAC,IAEX,CACE1G,MAAM,mBACN0G,OAAQ,CAAC,GACTC,YAAY,uFAEdtH,OAAO2H,UAGEW,GAAkB,kBAAepC,EAAIiC,GAAiB,WAAjB,eChEnCI,GA/BA,SAAC,GAIT,IAAD,IAHJV,2BAGI,MAHkB,GAGlB,MAFJW,2BAEI,MAFkB,GAElB,MADJC,iBACI,MADQ,GACR,EACJ,OACE,cAAC,EAAD,CACExB,eDRuB,ECSvBC,YAAa,CACX,CACE/C,MAAM,gBACNqB,WAAYkC,EAAmB,CAAEnJ,YAAasJ,KAEhD,CACE1D,MAAM,cACNqB,WAAYgD,EACTxI,QAAO,oBAAGpB,OAAH,OAA+B,UAA/B,MAAY,EAAZ,MACPmB,KAAI,YACH,MAAO,CAAEY,MADgB,EAAnBrC,KACgB+I,OAAQ,CADL,EAAbzI,YAGb0C,MAAK,kBAAUC,EAAV,EAAGZ,MAAqBa,EAAxB,EAAiBb,MAAjB,OAAgCY,EAAEE,cAAcD,OAE1D,CACE2C,MAAM,gBACNqB,WAAYsC,EAAgBW,QC/BhCvC,GAAM,SAACnF,GAAD,OACVA,EAAKvB,QACH,SAACC,EAAD,UAAqBA,EAArB,EAAQ4H,OAA0B7H,QAAO,SAACC,EAAKiC,GAAN,OAAgBjC,EAAMiC,IAAO,KACtE,IAkBSoG,GAAkB,SAAC,GAC9B,MAAO,CACY,WAF0C,EAA7BnF,cAED,CAC3BhC,MAAM,sCACN0G,OAAQ,CAAC,IAEX,CACE1G,MAAM,gBACN0G,OAAQ,CAAC,GACTC,YAAY,2BAED,QAX8C,EAAfzE,UAWtB,CACpBlC,MAAM,gCACN0G,OAAQ,CAAC,KAEXrH,OAAO2H,UAGEI,GAAgB,kBAAe7B,GAAI4B,GAAe,WAAf,eAEnCE,GAAkB,SAAC,GAC9B,MAAO,CACL,CACErH,MAAM,gBACN0G,OAAQ,CAAC,GACTC,YAAY,2BAED,QAPgC,EAAfzE,UAOR,CACpBlC,MAAM,gCACN0G,OAAQ,CAAC,KAEXrH,OAAO2H,UAGEO,GAAgB,kBAAehC,GAAI8B,GAAe,WAAf,eA2CnCG,GAAoB,SAAC,GAI3B,IAHLtF,EAGI,EAHJA,SACAwF,EAEI,EAFJA,mBACA1I,EACI,EADJA,eAEA,MAAO,CACc,UAAnBA,GAA8B,CAC5BgB,MAAM,yBACN0G,OAAQ,CAAC,IAEQ,UAAnB1H,GAA8B,CAC5BgB,MAAM,yBACN0G,OAAQ,CAAC,IAEX,CAAC,YAAa,QAAQpH,SAASoI,IAAuB,CACpD1H,MAAM,gCACN0G,OAAQ,CAAC,IAEX,CACE1G,MAAM,gBACN0G,OAAQ,CAAC,GACTC,YAAY,2BAED,QAAbzE,GAAsB,CACpBlC,MAAM,gCACN0G,OAAQ,CAAC,KAEXrH,OAAO2H,UAGEW,GAAkB,kBAAepC,GAAIiC,GAAiB,WAAjB,eC9FnCO,GA3BA,SAAC,GAAkD,IAAD,IAA/CF,2BAA+C,MAAzB,GAAyB,MAArBC,iBAAqB,MAAT,GAAS,EAC/D,OACE,cAAC,EAAD,CACExB,eDJuB,ECKvBC,YAAa,CACX,CACE/C,MAAM,gBACNqB,WDLD,CACL,CAAE7E,MAAM,YAAc0G,OAAQ,CAAC,EAAG,EAAG,EAAG,IACxC,CACE1G,MAAM,gBACN0G,OAAQ,CAAC,GACTC,YAAY,iBCEV,CACEnD,MAAM,cACNqB,WAAYgD,EACTxI,QAAO,oBAAGb,OAAH,OAA+B,UAA/B,MAAY,EAAZ,MACPY,KAAI,YACH,MAAO,CAAEY,MADgB,EAAnBrC,KACgB+I,OAAQ,CADL,EAAblI,YAGbmC,MAAK,kBAAUC,EAAV,EAAGZ,MAAqBa,EAAxB,EAAiBb,MAAjB,OAAgCY,EAAEE,cAAcD,OAE1D,CACE2C,MAAM,gBACNqB,WAAYsC,GAAgBW,QC3BhCvC,GAAM,SAACnF,GAAD,OACVA,EAAKvB,QACH,SAACC,EAAD,UAAqBA,EAArB,EAAQ4H,OAA0B7H,QAAO,SAACC,EAAKiC,GAAN,OAAgBjC,EAAMiC,IAAO,KACtE,IAKSgG,GAAqB,SAAC,GAA4B,IAA1BiB,EAAyB,EAAzBA,mBACnC,MAAO,CACL,CAAEhI,MAAM,YAAc0G,OAAQ,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,IAC9C,CACE1G,MAAM,uBACN0G,OAAQ,CAAC,GACTC,YAAY,eAEdqB,EAAmB1I,SAAS,sBAAwB,CAClDU,MAAM,oBACN0G,OAAQ,CAAC,IAEXsB,EAAmB1I,SAAS,oBAAsB,CAChDU,MAAM,kBACN0G,OAAQ,CAAC,IAEXsB,EAAmB1I,SAAS,0BAA4B,CACtDU,MAAM,wBACN0G,OAAQ,CAAC,KAEXrH,OAAO2H,UAGEC,GAAY,SAAC,GAAD,IAAGe,EAAH,EAAGA,mBAAH,OAzBI,GA0BXzC,GAAIwB,GAAmB,CAAEiB,yBAE9Bb,GAAkB,SAAC,GAC9B,MAAO,CACY,YAFgC,EAAnBnF,cAEA,CAC5BhC,MAAM,6CACN0G,OAAQ,CAAC,IAEX,CACE1G,MAAM,uBACN0G,OAAQ,CAAC,GACTC,YAAY,4BAEdtH,OAAO2H,UAGEI,GAAgB,kBAAe7B,GAAI4B,GAAe,WAAf,eAEnCE,GAAkB,WAC7B,MAAO,CACL,CACErH,MAAM,uBACN0G,OAAQ,CAAC,GACTC,YAAY,6BAKLY,GAAgB,kBAAehC,GAAI8B,GAAe,WAAf,eAEnCG,GAAoB,SAAC,GAI3B,IAHLE,EAGI,EAHJA,mBACA1I,EAEI,EAFJA,eAGA,MAAO,CADH,EADJP,uBAG2B,CACvBuB,MAAM,uBACN0G,OAAQ,CAAC,IAEQ,UAAnB1H,GAA8B,CAC5BgB,MAAM,yBACN0G,OAAQ,CAAC,IAEX,CAAC,YAAa,QAAQpH,SAASoI,IAAuB,CACpD1H,MAAM,gCACN0G,OAAQ,CAAC,IAEX,CACE1G,MAAM,uBACN0G,OAAQ,CAAC,GACTC,YAAY,4BAEdtH,OAAO2H,UAGEW,GAAkB,kBAAepC,GAAIiC,GAAiB,WAAjB,eChDnCS,GAjCC,SAAC,GAIV,IAAD,IAHJf,2BAGI,MAHkB,GAGlB,MAFJW,2BAEI,MAFkB,GAElB,MADJC,iBACI,MADQ,GACR,EACJ,OACE,cAAC,EAAD,CACExB,cDRuB,GCSvBC,YAAa,CACX,CACE/C,MAAM,gBACNqB,WAAYkC,GAAmB,CAC7BiB,mBAAoBd,KAGxB,CACE1D,MAAM,cACNqB,WAAYgD,EACTxI,QAAO,oBAAGnB,QAAH,OAAiC,UAAjC,MAAa,EAAb,MACPkB,KAAI,YACH,MAAO,CAAEY,MADiB,EAApBrC,KACgB+I,OAAQ,CADJ,EAAdxI,aAGbyC,MAAK,kBAAUC,EAAV,EAAGZ,MAAqBa,EAAxB,EAAiBb,MAAjB,OAAgCY,EAAEE,cAAcD,OAE1D,CACE2C,MAAM,gBACNqB,WAAYsC,GAAgBW,QCYvBI,GAvCA,SAAC,GAKT,IAJLtE,EAII,EAJJA,iBACAE,EAGI,EAHJA,qBACAD,EAEI,EAFJA,kBACAiE,EACI,EADJA,UAEA,OACE,eAAC,IAAD,CAAMtE,MAAK,UAAaJ,UAAU,UAAlC,UACE,cAAC,EAAD,CACEQ,iBAAkBA,EAClBE,qBAAsBA,EACtBD,kBAAmBA,IAErB,gCACE,cAAC,IAAD,CAAML,MAAK,aAAgBC,KAAK,QAAhC,SACE,cAAC,GAAD,CACEyD,oBAAqBtD,EAAiBhG,YACtCiK,oBAAqBhE,EAAkBjG,YACvCkK,UAAWA,MAGf,cAAC,IAAD,CAAMtE,MAAK,UAAaC,KAAK,QAA7B,SACE,cAAC,GAAD,CACEoE,oBAAqBhE,EAAkBjG,YACvCkK,UAAWA,MAGf,cAAC,IAAD,CAAMtE,MAAK,iBAAoBC,KAAK,QAApC,SACE,cAAC,GAAD,CACEyD,oBAAqBtD,EAAiBhG,YACtCiK,oBAAqBhE,EAAkBjG,YACvCkK,UAAWA,aCnBRK,GAhBE,SAAC,GAAwB,IAAtB5D,EAAqB,EAArBA,SAAUO,EAAW,EAAXA,KACtBsD,EAAYC,iBAAO,MAQzB,OAPAhI,qBAAU,WACHyE,GAASsD,EAAUE,SAGxBF,EAAUE,QAAQC,eAAe,CAAEC,SAAU,aAC5C,CAAC1D,EAAMsD,IAELtD,EAIE,qBAAK2D,IAAKL,EAAV,SAAsB7D,IAHpB,MCKLmE,GAAoB,SACxB7G,EADwB,GAGpB,IADFD,EACC,EADDA,SAAUG,EACT,EADSA,OAAQD,EACjB,EADiBA,iBAEpB,MAAiB,UAAbF,EACK,EAEgB,YAArBE,EACK,GAAKD,GAEY,eAAbD,EAA4B,GAAK,KAE/BC,GADmB,aAAXE,EAAwB,EAAI,KAW/C4G,GAA4B,SAAC,GAA6B,IAA3Bb,EAA0B,EAA1BA,UAAW1F,EAAe,EAAfA,SAGxCwG,EAA2B,CACpB,aAHMd,EAAX/F,QAGmB,CACvBpE,KAAK,iCACLK,OAAQ,GAEV,CACEL,KAAK,0CACLK,OAAQ,GAEV,CACEL,KAAK,0CACLG,SAAU,OAEVsE,GAAY,CACZzE,KAAK,iBACLsG,OAAQ7B,IAEV/C,OAAO2H,SAET,MAAO,CACL/I,OAAQ4K,EAAoBf,GAC5BtJ,OAAQsK,GAAoBhB,GAC5B5J,QAAS6K,GAAqBjB,GAC9B7D,MAAO2E,EAAyB/J,QAC9B,SAACC,EAAD,WAAQmF,MAAR,OAAwBnF,QAAxB,MAAgB,EAAhB,KACA,GAEFhB,QAAS8K,EAAyB/J,QAChC,SAACC,EAAD,WAAQhB,QAAR,OAA0BgB,QAA1B,MAAkB,EAAlB,KACA,GAEFd,OAAQ4K,EAAyB/J,QAC/B,SAACC,EAAD,WAAQd,OAAR,OAAyBc,QAAzB,MAAiB,EAAjB,KACA,GAEFsB,KAAMwI,IAIJI,GAAO,uCAAG,+CAAApI,EAAA,6DACdqI,EADc,EACdA,WACArF,EAFc,EAEdA,iBACAkE,EAHc,EAGdA,UACAhE,EAJc,EAIdA,qBACA7B,EALc,EAKdA,UACAiH,EANc,EAMdA,KACA/G,EAPc,EAOdA,OAEMzD,EAAckF,EAAiB3F,OAC/BW,EAAckF,EAAqB7F,OAEnC0B,EAZQ,2BAaTuJ,GAbS,IAcZjK,oBAAqB2E,EAAiBhG,YACtCqG,MACEL,EAAiBK,MACjBL,EAAiB9F,QACjBgG,EAAqBG,MACvBkF,kBAAmB,CACjBnL,OAAQ0K,GAAkB9E,EAAiB5F,OAAQ8J,GACnD7J,QAtEqB,EAsEK,CACxBS,cACAE,eAvEsB,GAD8B,EAA/BF,YAA+B,EAAlBE,YAEzB,GAwEXqD,YACAmH,WACyB,eAAvBtB,EAAUlG,SACN,CAAC,eAAgB,0BACjByH,EACNlH,UAEFzD,cACAE,gBAjCY,kBAoCPqK,EAAWtJ,IApCJ,iCAjDU,IAAC,IAiDX,OAAH,sDAuCP8C,GAAQ,uCAAG,qFAAA7B,EAAA,6DAAS8F,EAAT,EAASA,OAAQ4C,EAAjB,EAAiBA,UAAWL,EAA5B,EAA4BA,YAAYM,EAAxC,EAAwCA,eAC9CF,GADM,EAyBX3C,EArBFjF,gBAJa,MAIF,GAJE,EAKbC,EAoBEgF,EApBFhF,cACAC,EAmBE+E,EAnBF/E,WACAE,EAkBE6E,EAlBF7E,eAEAD,EAgBE8E,EAhBF9E,SACAE,EAeE4E,EAfF5E,iBACAC,EAcE2E,EAdF3E,OACAC,EAaE0E,EAbF1E,aACAE,EAYEwE,EAZFxE,SAEAD,EAUEyE,EAVFzE,UACAE,EASEuE,EATFvE,OACAC,EAQEsE,EARFtE,SAEAhE,EAMEsI,EANFtI,cACAD,EAKEuI,EALFvI,uBACAE,EAIEqI,EAJFrI,aACAN,EAGE2I,EAHF3I,gBACAQ,EAEEmI,EAFFnI,gBACAY,EACEuH,EADFvH,qBAGIyE,EAAmB,CACvBK,MAAOvC,EACP5D,QAAS6D,EACT/D,YAAa6D,EACbzD,OAAQ6D,EACR5D,OAAQuL,EAAgB,CAAEtC,oBAAqBzF,IAC/CjD,QNnJyB,EAakB+G,GAVtC,CACL,CAAEvF,MAAM,YAAc0G,OAAQ,CAAC,EAAG,EAAG,EAAG,IACxC,CACE1G,MAAM,gBACN0G,OAAQ,CAAC,GACTC,YAAY,iBM4IdzI,QAASuL,GAAiB,CAAEzB,mBAAoBvG,KAW5CyH,EAAO,CACX9K,gBACAD,yBACAE,eACAN,kBACAQ,kBACAY,wBAGI2E,EAAuB6E,GAA0B,CACrDb,UAlBIA,EAAY,CAChBlG,WACAE,mBACAE,eACAE,WACAH,UAcAK,aAxDa,SA2DM4G,GAAQ,CAC3BC,aACArF,mBACAkE,YACAhE,uBACA7B,YACAiH,OACA/G,WAlEa,UA2DTuH,EA3DS,+BAsEbJ,OAAUD,GACVE,EAAS,2GAvEI,2BA6ET1F,EA7ES,2BA6EgB6F,GA7EhB,IA6EwBzF,OAAQyF,EAAO7L,QAEtDyL,EAAU,CACR1F,mBACAkE,YACAhE,uBACAD,oBACAE,eAAgBJ,EAAoB,CAClCC,mBACAE,uBACAD,sBAEFqF,SAEFK,OAASF,GA3FM,4CAAH,sDA8GCM,GAhBI,SAAC,GAA0D,IAAxDV,EAAuD,EAAvDA,WAAYvG,EAA2C,EAA3CA,QAASgH,EAAkC,EAAlCA,OAAQJ,EAA0B,EAA1BA,UAAWC,EAAe,EAAfA,SAC5D,OACE,sBAAKnG,UAAU,YAAf,UACE,cAACT,EAAD,CACEF,SAAU,SAACiE,GACTjE,GAAS,CAAEiE,SAAQ4C,YAAWL,aAAYM,cAE5C7G,QAASA,IAEX,cAAC,GAAD,CAAUoC,KAAM4E,EAAhB,SACE,cAAC,GAAD,eAAYA,U,+BC9NZrI,GAAUC,IAAVD,MAuDOuI,GArDI,WACjB,OACE,sBAAKxG,UAAU,aAAf,UACE,sBAAKA,UAAU,WAAf,UACE,cAAC,GAAD,iCACA,2HAEE,mBAAGyG,KAAK,2CAAR,gCAFF,OAKA,kTACA,mIAEE,mBAAGA,KAAK,0DAAR,4BAFF,sBAOE,mBAAGA,KAAK,wDAAR,wBAPF,uFAWF,cAAC,KAAD,CACEtH,QAAO,cACPuH,YACE,qCACE,4BACE,mBAAGD,KAAK,qDAAR,mFAEF,ufACA,4VACA,4FACA,+BACE,uFACA,4IACA,uIACA,0JACA,kJACA,sEAEF,iNACA,mFAGJpG,KAAK,OACLsG,UAAU,EACV3G,UAAU,cACV4G,UAAU,Q,8BCNHC,GA1CC,SAAC,GAMV,IALLC,EAKI,EALJA,kBACAC,EAII,EAJJA,SACAC,EAGI,EAHJA,iBACAC,EAEI,EAFJA,YACAC,EACI,EADJA,MAEA,OAAKF,EAKH,eAAC,KAAD,CAAOG,SAAS,EAAMC,UAAU,EAAMR,UAAU,EAAOS,OAAQ,KAA/D,UACE,gCACE,qDACmB,SAAC,EAAKL,GAAkBhG,eAAe,SAD1D,OAEE,8BAAMgG,IAFR,2BAKA,cAAC,KAAD,CAAUM,QAAShG,KAAKiG,MAAoB,IAAdN,UAE7BH,GACD,qCACE,cAAC,IAAD,IACA,gCACE,iDAAkBA,EAAkB9F,eAClC,SADF,oCAGA,cAAC,KAAD,CAAUsG,QAAShG,KAAKiG,MAAiB,IAAXR,GAAoB,YAIxD,cAAC,IAAD,CACES,QAAQ,EACRC,KAAM,cAACC,GAAA,EAAD,IACNC,QAAST,EACTlH,UAAU,eAJZ,sBAxBK,M,UCDI4H,GARC,SAAC,GAAiB,IAAfzI,EAAc,EAAdA,QACjB,OACE,cAAC,IAAD,UACE,cAAC,KAAD,CAAQ0I,OAAO,UAAUzH,MAAOjB,OCFhC2I,GAAO,CACX,CACEnL,IAAI,yBACJoL,MAAO,EACPC,SAAU,EACVvN,MAAO,GAET,CACEkC,IAAI,8BACJoL,MAAO,EACPC,SAAU,EACVvN,MAAO,KAET,CACEkC,IAAI,YACJoL,MAAO,EACPC,SAAU,EACVvN,MAAO,KAET,CACEkC,IAAI,kBACJoL,MAAO,EACPC,SAAU,EACVvN,MAAO,MAET,CACEkC,IAAI,4BACJoL,MAAO,EACPC,SAAU,EACVvN,MAAO,MAILwN,GAAU,CACd,CACEtL,IAAI,yBACJqL,SAAU,EACVD,MAAO,GACPtN,MAAO,IAILyN,GAAY,CAChB,CACEvL,IAAI,wBACJoL,MAAO,EACPC,SAAU,EACVvN,MAAO,KAET,CACEkC,IAAI,8BACJoL,MAAO,EACPC,SAAU,EACVvN,MAAO,QAIL0N,GAAkB,CACtB,CACExL,IAAI,iBACJqL,SAAU,EACVD,MAAO,EACPtN,MAAO,KAET,CACEkC,IAAI,kBACJqL,SAAU,EACVD,MAAO,EACPtN,MAAO,KAET,CACEkC,IAAI,mBACJqL,SAAU,EACVD,MAAO,EACPtN,MAAO,MAIL2N,GAAsB,CAC1B,CACEzL,IAAI,iBACJqL,SAAU,EACVD,MAAO,EACPtN,MAAO,KAET,CACEkC,IAAI,kBACJqL,SAAU,EACVD,MAAO,EACPtN,MAAO,KAET,CACEkC,IAAI,cACJqL,SAAU,EACVD,MAAO,EACPtN,MAAO,KAET,CACEkC,IAAI,cACJqL,SAAU,EACVD,MAAO,EACPtN,MAAO,OAIL4N,GAAa,SAACtH,GAAD,iBAAgBA,IAE7BY,GAAU,CACd,CACEvB,MAAM,UACNwB,UAAW,OAEb,CACExB,MAAM,QACNwB,UAAW,QACXE,OAAQ,SAACf,GAAD,OAAYD,EAAGC,IACvBc,OAAQ,SAACrE,EAAGC,GAAJ,OAAUD,EAAE/C,MAAQgD,EAAEhD,QAEhC,CACE2F,MAAM,WACNwB,UAAW,WACXE,OAAQuG,GACRxG,OAAQ,SAACrE,EAAGC,GAAJ,OAAUD,EAAEwK,SAAWvK,EAAEuK,WAEnC,CACE5H,MAAM,QACNwB,UAAW,QACXE,OAAQuG,GACRxG,OAAQ,SAACrE,EAAGC,GAAJ,OAAUD,EAAEuK,MAAQtK,EAAEsK,SAI5BtG,GAAa,SAAC,GAAmC,IAAjC3C,EAAgC,EAAhCA,SAAUkJ,EAAsB,EAAtBA,SAAUD,EAAY,EAAZA,MACxC,GAAiB,YAAbjJ,EAAwB,CAC1B,GAAIkJ,GAAY,IAAgB,KAAVD,EACpB,MAAM,GAAN,OAAWE,GAAYH,IAGzB,GAAiB,KAAbE,GAAmBD,GAAS,GAC9B,MAAM,GAAN,OAAWE,GAAYG,IAGzB,GAAiB,KAAbJ,GAA6B,KAAVD,EACrB,MAAM,GAAN,OAAWE,GAAYH,GAASK,IAIpC,GAAIH,GAAY,IAAgB,KAAVD,EACpB,MAAM,GAAN,OAAWD,GAASI,IAGtB,GAAiB,KAAbF,GAAmBD,GAAS,GAC9B,MAAM,GAAN,OAAWD,GAASM,IAGtB,GAAiB,KAAbJ,GAA6B,KAAVD,EACrB,MAAM,GAAN,OAAWD,GAASI,GAAcC,IAGpC,MAAM,IAAIG,MAAM,gBAEZnG,GAAM,SAACnF,EAAML,GAAP,OAAeK,EAAKvB,QAAO,SAACC,EAAKgG,GAAN,OAAehG,EAAMgG,EAAK/E,KAAM,IAE1DlC,GAAQ,SAAC8B,GAAD,OAAY4F,GAAIV,GAAWlF,GAAS,UA4B1CgM,GA1BM,SAAC,GAAmC,IAAjCzJ,EAAgC,EAAhCA,SAAUkJ,EAAsB,EAAtBA,SAAUD,EAAY,EAAZA,MACpCS,EAAS/G,GAAW,CAAE3C,WAAUkJ,WAAUD,UAEhD,OACE,qBAAK/H,UAAU,wBAAf,SACE,cAAC,IAAD,CACEyB,WAAY+G,EACZ7G,QAASA,GACTK,YAAY,EACZY,QAAS,WACP,OACE,eAAC,IAAMC,QAAQC,IAAf,WACE,cAAC,IAAMD,QAAQE,KAAf,oBACA,cAAC,IAAMF,QAAQE,KAAf,UACGjC,EAAGqB,GAAIqG,EAAQ,YAElB,cAAC,IAAM3F,QAAQE,KAAf,UAAqBZ,GAAIqG,EAAQ,cACjC,cAAC,IAAM3F,QAAQE,KAAf,UAAqBZ,GAAIqG,EAAQ,oBCjLzCpK,GAAgB,CACpB8F,kBAAmB,UACnBuE,aAAc,QACdC,WAAY,GACZ7J,UAAW,GACXE,OAAQ,GACRC,SAAU,GA4JGI,GAzJI,SAAC,GAKb,IAJLC,EAII,EAJJA,SACAC,EAGI,EAHJA,QACAqJ,EAEI,EAFJA,oBACAC,EACI,EADJA,qBACI,EACWrJ,IAAKC,UAAbzC,EADH,sBAGgB0C,mBAASrB,GAAcqK,cAHvC,mBAGGI,EAHH,KAGOC,EAHP,OAIsBD,EAAGE,MAAM,KAAK/M,KAAI,SAACgN,GAAD,OAAOC,SAASD,MAJxD,mBAIGhB,EAJH,KAIaD,EAJb,OAK8BtI,mBAASrB,GAAcS,WALrD,mBAKGA,EALH,KAKcc,EALd,KAOEuJ,EAAmBP,EAAoB7J,SAO7C,OANA7B,qBAAU,WACRF,EAAKG,eAAe,CAClB4B,SAA+B,WAArBoK,EAAgC,MAAQ,aAEnD,CAACnM,EAAMmM,IAGR,cAAC,IAAD,CACE9K,cAAeA,GACfiB,SAAUA,EACVW,UAAU,+BACVjD,KAAMA,EACN8C,eAAgB,SAACC,EAAGC,GAClB+I,EAAM/I,EAAU0I,cAChB9I,EAAaI,EAAUlB,YAP3B,SAUE,eAAC,IAAD,CAAMuB,MAAK,UAAaC,KAAK,QAA7B,UACE,sBAAKL,UAAU,cAAf,UACE,gCAC4C,SAAzC2I,EAAoBjK,kBACnB,cAAC,IAAKrB,KAAN,CAAWT,MAAK,mBAAsBrC,KAAK,oBAA3C,SACE,cAAC,IAAD,CACE+C,QAAS,CACP,CACEK,MAAO,UACPf,MAAM,+CAER,CACEe,MAAO,SACPf,MAAM,oBAER,CACEe,MAAO,OACPf,MAAM,aAMhB,cAAC,IAAKS,KAAN,CAAW9C,KAAK,aAAaqC,MAAK,cAAlC,SACE,cAAC,IAAD,CACEU,QAAS,CACP,CACEV,MAAM,oCACNe,MAAO,KAET,CACEf,MAAM,qCACNe,MAAO,SAKf,cAAC,IAAKN,KAAN,CAAW9C,KAAK,eAAeqC,MAAK,eAApC,SACE,cAAC,IAAD,CACEU,QAAS,CACP,CACEV,MAAM,OAAD,OAASkE,EACZqI,GAAkB,CAChBrK,SAAUoK,EACVlB,SAAU,GACVD,MAAO,MAJN,kDAOLpK,MAAO,SAET,CACEf,MAAM,OAAD,OAASkE,EACZqI,GAAkB,CAChBrK,SAAUoK,EACVlB,SAAU,EACVD,MAAO,MAJN,iDAOLpK,MAAO,QAET,CACEf,MAAM,OAAD,OAASkE,EACZqI,GAAkB,CAChBrK,SAAUoK,EACVlB,SAAU,GACVD,MAAO,MAJN,kDAOLpK,MAAO,cAKf,cAAC,IAAKN,KAAN,CAAWT,MAAK,WAAcrC,KAAK,WAAnC,SACE,cAAC,IAAD,CACE+C,QAAS,CACP,CACEK,MAAO,MACPf,MAAM,uBAER,CACEe,MAAO,WACPf,MAAM,2BAER,CACEe,MAAO,SACPf,MAAM,gBAER,CACEe,MAAO,UACPf,MAAM,iBAERX,QAAO,qBAAG0B,QAAsBuL,SAGtC,cAAC,EAAD,CACEtM,MAAK,iEACLG,KAAMA,EACND,UAAW8L,IAEb,cAAC,EAAD,CACE9L,UAAS,sBAAM8L,GAAN,YAA+B/J,IACxC9B,KAAMA,IAER,cAAC,EAAD,OAEF,cAAC,GAAD,CACE+B,SAAUoK,EACVlB,SAAUA,EACVD,MAAOA,OAIX,cAAC,IAAK1K,KAAN,UACE,cAAC,IAAD,CAAQgD,KAAK,UAAUC,SAAS,SAAShB,QAASA,EAAlD,4BCnIKkF,GA3BA,SAAC,GAIT,IAHLtB,EAGI,EAHJA,cAGI,IAFJkG,2BAEI,MAFkB,GAElB,MADJ1E,iBACI,MADQ,GACR,EACJ,OACE,cAAC,EAAD,CACExB,cAAeA,EACfC,YAAa,CACX,CACE/C,MAAM,cACNqB,WAAY2H,EACTnN,QAAO,oBAAGpB,OAAH,OAA+B,UAA/B,MAAY,EAAZ,MACPmB,KAAI,YACH,MAAO,CAAEY,MADgB,EAAnBrC,KACgB+I,OAAQ,CADL,EAAbzI,YAGb0C,MAAK,kBAAUC,EAAV,EAAGZ,MAAqBa,EAAxB,EAAiBb,MAAjB,OAAgCY,EAAEE,cAAcD,OAE1D,CACE2C,MAAM,gBACNqB,WAAYwC,EAAgBS,QCnB9B2E,GAASnL,IAATmL,KAkDO1E,GAhDA,SAAC,GAOT,IANLzB,EAMI,EANJA,cAMI,IALJkG,2BAKI,MALkB,GAKlB,MAJJ1E,iBAII,MAJQ,GAIR,EAHJ4E,EAGI,EAHJA,iBAGI,IAFJzN,2BAEI,MAFkB,GAElB,EADJ0N,EACI,EADJA,YAEMC,Eb2Ce,SAAC,GAAmD,IAAD,IAAhDhP,mBAAgD,MAAlC,GAAkC,EAA9BY,EAA8B,EAA9BA,OAA8B,IAAtBqO,WAC9CC,EAAM,EACNC,EAAK,EAoCT,OAlCIvO,GAAU,GACZsO,GAAO,EACEtO,GAAU,IACnBsO,GAAO,EACPC,GAAM,GACGvO,GAAU,IACnBsO,GAAO,EACPC,GAAM,GACGvO,GAAU,IACnBsO,GAAO,EACPC,GAAM,GAENA,GAAM,QAhBgE,MAAT,GAAS,GAmBzDzN,SAAS,OACtBwN,GAAO,EAEPC,GAAM,EAGRD,GAAOlP,EAAYyB,QAAO,SAAC1B,GACzB,MAAO,CACL,oBACA,gDACA,0BACA,eACA2B,SAAS3B,MACV4B,OAEC3B,EAAY0B,SAAS,sBACvBwN,EAAM,GAGDA,GAAOA,EAAMC,GajFEC,CAAQ,CAC5BH,WAAY,CAACH,GACb9O,YAAY,GAAD,mBACNqB,GADM,YAENuN,EAAoBpN,KAAI,qBAAGzB,UAEhCa,OAAQmO,IAGV,OACE,qCACE,cAAC,EAAD,CACErG,cAAeA,EACfC,YAAa,CACX,CACE/C,MAAM,cACNqB,WAAY2H,EACTnN,QAAO,oBAAGb,OAAH,OAA+B,UAA/B,MAAY,EAAZ,MACPY,KAAI,YACH,MAAO,CAAEY,MADgB,EAAnBrC,KACgB+I,OAAQ,CADL,EAAblI,YAGbmC,MAAK,kBAAUC,EAAV,EAAGZ,MAAqBa,EAAxB,EAAiBb,MAAjB,OAAgCY,EAAEE,cAAcD,OAE1D,CACE2C,MAAM,gBACNqB,WAAYwC,GAAgBS,OAIlC,eAAC2E,GAAD,2BAEE,eAACA,GAAD,CAAMhJ,KAAMmJ,GAAiB,GAAM,UAAY,UAA/C,WACoB,IAAhBA,GAAqBK,QAAQ,GADjC,cCfOhF,GA3BC,SAAC,GAIV,IAHL3B,EAGI,EAHJA,cAGI,IAFJkG,2BAEI,MAFkB,GAElB,IADJ1E,UAEA,OACE,cAAC,EAAD,CACExB,cAAeA,EACfC,YAAa,CACX,CACE/C,MAAM,cACNqB,WAAY2H,EACTnN,QAAO,oBAAGnB,QAAH,OAAiC,UAAjC,MAAa,EAAb,MACPkB,KAAI,YACH,MAAO,CAAEY,MADiB,EAApBrC,KACgB+I,OAAQ,CADJ,EAAdxI,aAGbyC,MAAK,kBAAUC,EAAV,EAAGZ,MAAqBa,EAAxB,EAAiBb,MAAjB,OAAgCY,EAAEE,cAAcD,OAE1D,CACE2C,MAAM,gBACNqB,WZ4BD,CACL,CACE7E,MAAM,uBACN0G,OAAQ,CAAC,GACTC,YAAY,iCaLHuB,GA5CA,SAAC,GAMT,IALLtE,EAKI,EALJA,iBACAE,EAII,EAJJA,qBACAD,EAGI,EAHJA,kBACAiE,EAEI,EAFJA,UACAoF,EACI,EADJA,kBAEA,OACE,eAAC,IAAD,CAAM1J,MAAK,UAAaJ,UAAU,UAAlC,UACE,cAAC,EAAD,CACEQ,iBAAkBA,EAClBE,qBAAsBA,EACtBD,kBAAmBA,IAErB,gCACE,cAAC,IAAD,CAAML,MAAK,aAAgBC,KAAK,QAAhC,SACE,cAAC,GAAD,CACE6C,cAAe1C,EAAiB3F,OAChCuO,oBAAqB3I,EAAkBjG,YACvCkK,UAAWA,MAGf,cAAC,IAAD,CAAMtE,MAAK,UAAaC,KAAK,QAA7B,SACE,cAAC,GAAD,CACE6C,cAAe1C,EAAiBpF,OAChCgO,oBAAqB3I,EAAkBjG,YACvCkK,UAAWA,EACX6E,YAAa/I,EAAiBpF,OAASqF,EAAkBrF,OACzDkO,iBAAkBQ,EAAkBhL,SACpCjD,oBAAqB2E,EAAiBhG,gBAG1C,cAAC,IAAD,CAAM4F,MAAK,iBAAoBC,KAAK,QAApC,SACE,cAAC,GAAD,CACE6C,cAAe1C,EAAiB1F,QAChCsO,oBAAqB3I,EAAkBjG,YACvCkK,UAAWA,aChCfzG,GAAUC,IAAVD,MAEFqH,GAAoB,SAACyE,EAAerF,GACxC,MAAoC,YAAhCA,EAAUR,mBAAmC6F,EAAgB,GACxD,GAAKA,EAGP,GAGH1K,GAAQ,uCAAG,+EAAA7B,EAAA,6DACf0I,EADe,EACfA,UACAL,EAFe,EAEfA,WACAM,EAHe,EAGfA,SACA6D,EAJe,EAIfA,iBACA1G,EALe,EAKfA,OAEwB9C,EAA2BwJ,EAA3CrJ,eAAkCmF,EAASkE,EAATlE,KAGxC5B,EAOEZ,EAPFY,kBACAuE,EAMEnF,EANFmF,aACAC,EAKEpF,EALFoF,WACA7J,EAIEyE,EAJFzE,UACAE,EAGEuE,EAHFvE,OACAD,EAEEwE,EAFFxE,SACAE,EACEsE,EADFtE,SAhBa,GAkBT0F,EAAY,CAAER,oBAAmBuE,eAAcC,aAAY5J,aAE7B2J,aACjCM,MAAM,KACN/M,KAAI,SAACgN,GAAD,OAAOC,SAASD,MAtBR,mBAoBRhB,EApBQ,KAoBED,EApBF,KAuBTkC,EAA4Bd,GAAkB,CAClDrK,SAAUkL,EAAiBtF,UAAU5F,SACrCkJ,WACAD,UAKIvC,EAA2B,CAC/B,CACEjL,KAAK,wBACLsG,OAAQoJ,KAERjL,GAAY,CACZzE,KAAK,iBACLsG,OAAQ7B,GAEV,CACEzE,KAAK,0BACLsG,MAbEqJ,EAAW,OAefjO,OAAO2H,SAEHlD,EAAuB,CAC3BG,MAAO2E,EAAyB/J,QAC9B,SAACC,EAAD,WAAQmF,MAAR,OAAwBnF,QAAxB,MAAgB,EAAhB,KACA,GAEFhB,QAAS,EACTE,OAAQ,EACRC,OAAQsP,EAAoBzF,GAC5BtJ,OAAQgP,GAAoB1F,GAC5B5J,QAASuP,GAAqB3F,GAC9B1H,KAAMwI,GAGFjJ,EA3DS,2BA4DVuJ,GA5DU,IA6DbjK,oBAAqB2E,EAAiBhG,YACtCqG,MACEL,EAAiBK,MACjBL,EAAiB9F,SAChBgG,EAAqBG,MAAQqJ,GAChC5O,YAAakF,EAAiB3F,OAC9BW,YAAakF,EAAqB7F,OAClCO,OAAQoF,EAAiBpF,OACzBkP,kBAAmB,CAACN,EAAiBtF,UAAU5F,UAC/CiH,kBAAmB,CACjBnL,OAAQ0K,GAAkB9E,EAAiB5F,OAAQ8J,GACnDgE,WAAYhE,EAAUgE,WACtB7J,YACAE,YA1EW,UA8EM8G,EAAWtJ,GA9EjB,WA8ET+J,EA9ES,+BAiFbJ,OAAUD,GACVE,EAAS,2GAlFI,2BAwFT1F,EAxFS,2BAwFgB6F,GAxFhB,IAwFwBzF,OAAQyF,EAAO7L,QAEtDyL,EAAU,CACR1F,mBACAkE,YACAhE,uBACAD,oBACAE,eAAgBJ,EAAoB,CAClCC,mBACAE,uBACAD,sBAEFqF,SAEFK,OAASF,GAtGM,4CAAH,sDAyICsE,GAhCK,SAAC,GAOd,IANL1E,EAMI,EANJA,WACAvG,EAKI,EALJA,QACAgH,EAII,EAJJA,OACAJ,EAGI,EAHJA,UACAC,EAEI,EAFJA,SACA6D,EACI,EADJA,iBAEA,OACE,sBAAKhK,UAAU,YAAf,UACE,cAAC,GAAD,CAAOC,MAAO,EAAd,sCACA,cAAC,GAAD,CACEZ,SAAU,SAACiE,GACTjE,GAAS,CACP6G,YACAL,aACAM,WACA6D,mBACA1G,YAGJhE,QAASA,EACTqJ,oBAAqBqB,EAAiBtF,UACtCkE,qBAAsBoB,EAAiBrJ,eAAenG,cAExD,cAAC,GAAD,CAAUkH,KAAM4E,EAAhB,SACE,cAAC,GAAD,aAAQwD,kBAAmBE,EAAiBtF,WAAe4B,U,UCpI7DlI,GAAgB,CACpBoM,WAAY,GACZC,QAAS,MACT7O,eAAgB,QAChB0I,mBAAoB,YACpBjI,gBAAiB,WACjBnB,eAAgB,cAChBwP,MAAM,EACNrG,kBAAmB,UACnBxF,UAAW,GACXE,OAAQ,GACR4L,aAAc,qBACdC,SAAU,OACVC,eAAgB,EAChB7L,SAAU,GAkVGI,GA/UI,SAAC,GAMb,IALLvD,EAKI,EALJA,oBACAqN,EAII,EAJJA,iBACA7J,EAGI,EAHJA,SACAC,EAEI,EAFJA,QACAZ,EACI,EADJA,iBACI,EACWa,IAAKC,UAAbzC,EADH,sBAEgC0C,mBAASrB,GAAcoM,YAFvD,mBAEGA,EAFH,KAEeM,EAFf,OAG8BrL,mBAASrB,GAAcS,WAHrD,mBAGGA,EAHH,KAGcc,EAHd,OAI8CF,mBAAS,IAJvD,mBAIGsL,EAJH,KAIsBC,EAJtB,KAMEC,EAAoB,CACxB,CACEtN,MAAO,MACPf,MAAM,uBAER,CACEe,MAAO,WACPf,MAAM,2BAER,CACEe,MAAO,SACPf,MAAM,gBAER,CACEe,MAAO,UACPf,MAAM,iBAERX,QAAO,gBAAG0B,EAAH,EAAGA,MAAH,OAAgBuL,EAAiBhN,SAASyB,MAOnD,OANAV,qBAAU,WACRF,EAAKG,eAAe,CAClB4B,SAAUmM,EAAkB,GAAlB,UAEX,CAAClO,EAAMkO,IAGR,eAAC,IAAD,CACE7M,cAAeA,GACf4B,UAAU,8BACVjD,KAAMA,EACNsC,SAAUA,EACVQ,eAAgB,SAACC,EAAGC,GAClB+K,EAAc/K,EAAUyK,YACxB7K,EAAaI,EAAUlB,WACvBmM,EACEvO,EACGR,QAAO,YAAsB,IAAnB1B,EAAkB,EAAlBA,KAAME,EAAY,EAAZA,MACf,OAAIoB,EAAoBK,SAAS3B,KAGZ,oBAAVE,GAGJA,EAAMsF,KAAevD,QAE7BR,KAAI,qBAAGzB,UAnBhB,UAuBE,cAAC,IAAD,CAAM6F,MAAK,WAAcC,KAAK,QAAQL,UAAU,WAAhD,SACE,sBAAKA,UAAU,cAAf,UACE,eAAC,IAAD,CAAMI,MAAK,WAAcC,KAAK,QAA9B,WACI3B,GACA,cAAC,IAAKrB,KAAN,CAAWT,MAAK,mBAAsBrC,KAAK,oBAA3C,SACE,cAAC,IAAD,CACE+C,QAAS,CACP,CACEK,MAAO,UACPf,MAAM,+CAER,CACEe,MAAO,SACPf,MAAM,oBAER,CACEe,MAAO,OACPf,MAAM,aAMhB,cAAC,IAAKS,KAAN,CAAWT,MAAK,WAAcrC,KAAK,WAAnC,SACE,cAAC,IAAD,CAAQ+C,QAAS2N,OAEjBpP,EAAoBK,SAAS,qBAC7B,cAAC,IAAKmB,KAAN,CAAWT,MAAK,8BAAiCrC,KAAK,UAAtD,SACE,cAAC,IAAD,CACE+C,QAAS,CACP,CACEK,MAAO,OACPf,MAAM,qCAER,CACEe,MAAO,MACPf,MAAM,OAAD,OAASkE,EAAG,KAAZ,mCAEP,CACEnD,MAAO,MACPf,MAAM,qBAAD,OAAuBkE,EAC1B,KADG,uCAQf,cAAC,IAAKzD,KAAN,CACET,MAAK,8CAAyCkE,EAAG,KAA5C,UACLvG,KAAK,OAFP,SAIE,cAAC,KAAM2Q,MAAP,CACE5N,QAAS,CACP,CACEK,OAAO,EACPf,MAAM,OAER,CACEe,OAAO,EACPf,MAAM,WAKd,cAAC,IAAKS,KAAN,CACET,MAAK,gFACLrC,KAAK,aAFP,SAIE,cAAC,IAAD,CACE+C,QAAS6N,EACNlP,QACC,gBAAG1B,EAAH,EAAGA,KAAH,OACGsB,EAAoBK,SAAS3B,IAC9B,qBAAuBA,IAGtB,CACC,mBACA,iDACA2B,SAAS3B,MAEdyB,KAAI,YAAe,IAAZzB,EAAW,EAAXA,KACN,MAAO,CAAEqC,MAAOrC,EAAMoD,MAAOpD,MAEjCqD,KAAK,kBAIX,eAAC,IAAD,CAAMwC,MAAK,8BAAiCC,KAAK,QAAjD,UACE,cAAC,KAAD,CACElB,QAAO,yDACPkB,KAAK,OACLsG,UAAQ,IAEV,cAAC,IAAKtJ,KAAN,CAAWT,MAAK,sBAAyBrC,KAAK,iBAA9C,SACE,cAAC,IAAD,CACE+C,QAAS,CACP,CACEK,MAAO,QACPf,MAAM,SAER,CACEe,MAAO,QACPf,MAAM,SAER,CACEe,MAAO,OACPf,MAAM,aAKd,cAAC,IAAKS,KAAN,CAAWT,MAAK,iBAAoBrC,KAAK,eAAzC,SACE,cAAC,IAAD,CACE+C,QAAS,CACP,CACEK,MAAO,qBACPf,MAAM,kCAER,CACEe,MAAO,iBACPf,MAAM,kBAER,CACEe,MAAO,kBACPf,MAAM,mBAER,CACEe,MAAO,sBACPf,MAAM,wCAKd,cAAC,IAAKS,KAAN,CACET,MAAK,8BACLrC,KAAK,qBAFP,SAIE,cAAC,IAAD,CACE+C,QAAS,CACP,CACEK,MAAO,YACPf,MAAM,aAER,CACEe,MAAO,OACPf,MAAM,QAER,CACEe,MAAO,OACPf,MAAM,QAER,CACEe,MAAO,OACPf,MAAM,aAKd,cAAC,IAAKS,KAAN,CAAWT,MAAK,gBAAmBrC,KAAK,kBAAxC,SACE,cAAC,IAAD,CACE+C,QAAS,CACP,CACEK,MAAO,WACPf,MAAM,2CAER,CACEe,MAAO,WACPf,MAAM,UAER,CACEe,MAAO,aACPf,MAAM,iBAKd,cAAC,IAAKS,KAAN,CAAWT,MAAK,iBAAoBrC,KAAK,iBAAzC,SACE,cAAC,IAAD,CACE+C,QAAS,CACP,CACEK,MAAO,cACPf,MAAM,WAER,CACEe,MAAO,iBACPf,MAAM,cAER,CACEe,MAAO,SACPf,MAAM,6BAQpB,eAAC,IAAD,CAAMwD,MAAK,gBAAmBC,KAAK,QAAnC,UACE,sBAAKL,UAAU,WAAf,UACE,cAAC,IAAK3C,KAAN,CACET,MAAK,+CACLrC,KAAK,WAFP,SAIE,cAAC,IAAD,CACE+C,QAAS,CACP,CACEV,MAAM,+BACNe,MAAO,GAET,CACEf,MAAM,kCAAD,OAAoCkE,EAAG,KAAvC,UACLnD,MAAO,KAET,CACEf,MAAM,kEAAD,OAAoEkE,EACvE,QADG,UAGLnD,MAAO,QAET,CACEf,MAAM,iDAAD,OAAmDkE,EACtD,QADG,UAGLnD,MAAO,aAKf,cAAC,IAAKN,KAAN,CACET,MAAK,yDACLrC,KAAK,iBACLsC,QACE,8FAEE,uBAFF,yIAJJ,SAWE,cAAC,IAAD,SAGJ,cAAC,IAAD,IACA,cAAC,EAAD,CACEE,KAAMA,EACND,UAAS,sBACJjB,GADI,YAEJ2O,GAFI,YAGJO,IAEL/N,KAAK,aAEP,cAAC,EAAD,CACED,KAAMA,EACND,UAAS,sBACJjB,GADI,YAEJ2O,GAFI,YAGJ3L,GAHI,YAIJkM,IAEL/N,KAAK,aAEP,cAAC,EAAD,OAEF,cAAC,IAAKK,KAAN,UACE,cAAC,IAAD,CAAQgD,KAAK,UAAUC,SAAS,SAAShB,QAASA,EAAlD,0BCpWF8L,GAA6B,SAAC5Q,EAAa6Q,GAC/C,OAAO7Q,EACJyB,QAAO,SAACmB,GAAD,QAAWA,EAAIiO,MACtBrP,KAAI,SAACoB,GACJ,MAAO,CAAER,MAAOQ,EAAG,KAAUkG,OAAQ,CAAClG,EAAIiO,QAE3C9N,MAAK,kBAAUC,EAAV,EAAGZ,MAAqBa,EAAxB,EAAiBb,MAAjB,OAAgCY,EAAEE,cAAcD,OAqE3CqH,GAlEA,SAAC,GAKT,IAJLtE,EAII,EAJJA,iBACAE,EAGI,EAHJA,qBACAD,EAEI,EAFJA,kBACAiE,EACI,EADJA,UAEMlK,EAAciG,EAAkBjG,YAEtC,OACE,eAAC,IAAD,CAAM4F,MAAK,UAAaJ,UAAU,UAAlC,UACE,cAAC,EAAD,CACEQ,iBAAkBA,EAClBE,qBAAsBA,EACtBD,kBAAmBA,IAErB,gCACE,cAAC,IAAD,CAAML,MAAK,aAAgBC,KAAK,QAAhC,SACE,cAAC,EAAD,CACE6C,cAAe1C,EAAiB3F,OAChCsI,YAAa,CACX,CACE/C,MAAM,cACNqB,WAAY2J,GAA2B5Q,EAAa,WAEtD,CACE4F,MAAM,gBACNqB,WAAY6J,GAAwB5G,SAK5C,cAAC,IAAD,CAAMtE,MAAK,UAAaC,KAAK,QAA7B,SACE,cAAC,EAAD,CACE6C,cAAe1C,EAAiBpF,OAChC+H,YAAa,CACX,CACE/C,MAAM,cACNqB,WAAY2J,GAA2B5Q,EAAa,WAEtD,CACE4F,MAAM,gBACNqB,WAAY8J,GAAwB7G,SAK5C,cAAC,IAAD,CAAMtE,MAAK,iBAAoBC,KAAK,QAApC,SACE,cAAC,EAAD,CACE6C,cAAe1C,EAAiB1F,QAChCqI,YAAa,CACX,CACE/C,MAAM,cACNqB,WAAY2J,GAA2B5Q,EAAa,YAEtD,CACE4F,MAAM,gBACNqB,WAAY+J,GAAyB9G,gBC9D7CzG,GAAUC,IAAVD,MAEFwN,GAAiB,SAAC,GAAsC,IAApCvQ,EAAmC,EAAnCA,eAAgByP,EAAmB,EAAnBA,aACpC/P,EAAS,EAeb,MAbuB,gBAAnBM,IACFN,GAAU,GAEW,mBAAnBM,IACFN,GAAU,GAES,uBAAjB+P,IACF/P,GAAU,GAES,wBAAjB+P,IACF/P,GAAU,GAGLA,GAGHwB,GAAc,SAACsI,GAAD,MAClB,CAAC,WAAY,YAAYxI,SAASwI,EAAUrI,kBAExCqP,GAAqB,SAAC,GAAqC,IAAnChH,EAAkC,EAAlCA,UAAWlE,EAAuB,EAAvBA,iBACvC,OACEpE,GAAYsI,IACZlE,EAAiBhG,YAAY0B,SAAS,uBACtCsE,EAAiBhG,YAAY0B,SAAS,0BAIpCyP,GAA6B,SAAC,GAAqC,IAAnCjH,EAAkC,EAAlCA,UACpC,OADsE,EAAvBlE,iBAE5BhG,YAAY0B,SAAS,yBACT,UAA7BwI,EAAU9I,gBAIRgQ,GAAwB,SAAC,GAIxB,IAHLlH,EAGI,EAHJA,UACAlE,EAEI,EAFJA,iBACAC,EACI,EADJA,kBAEIoL,EAAQ,EAIZ,GAHIH,GAAmB,CAAEhH,YAAWlE,uBAClCqL,GAAS,MAEPF,GAA2B,CAAEjH,YAAWlE,qBAAqB,CAC/D,IAAMsL,EAAsBC,EAAgBC,MAC1C,kBAAuB,yBAAvB,EAAGzR,QACHG,QACFmR,GACEC,EAAoB,CAClBtR,YAAaiG,EAAkBjG,YAC/BqB,oBAAqB2E,EAAiBhG,YACtCoB,eAAgB,UAElBkQ,EAAoB,CAClBtR,YAAaiG,EAAkBjG,YAC/BqB,oBAAqB2E,EAAiBhG,cAI5C,OAAOqR,GAGHI,GAAiC,SAAC,GAAqC,IAAnCvH,EAAkC,EAAlCA,UAAWlE,EAAuB,EAAvBA,iBAC/CqL,EAAQ,EAcZ,OAZIH,GAAmB,CAAEhH,YAAWlE,uBAClCqL,GAAS,MAGPF,GAA2B,CAAEjH,YAAWlE,uBAK1CqL,GAAS,MAGJA,GAGHxM,GAAQ,uCAAG,yFAAA7B,EAAA,6DACfqI,EADe,EACfA,WACAK,EAFe,EAEfA,UACAC,EAHe,EAGfA,SACA+F,EAJe,EAIfA,kBACA5I,EALe,EAKfA,OAEwB9C,EAAqB0L,EAArCvL,eAGN7B,EAeEwE,EAfFxE,SACA0L,EAcElH,EAdFkH,WACAC,EAaEnH,EAbFmH,QACA7O,EAYE0H,EAZF1H,eACA0I,EAWEhB,EAXFgB,mBACAjI,EAUEiH,EAVFjH,gBACAnB,EASEoI,EATFpI,eACAwP,EAQEpH,EARFoH,KACArG,EAOEf,EAPFe,kBACW8H,EAMT7I,EANFzE,UACAE,EAKEuE,EALFvE,OACA4L,EAIErH,EAJFqH,aACAC,EAGEtH,EAHFsH,SACAC,EAEEvH,EAFFuH,eACA7L,EACEsE,EADFtE,SAEI0F,EAAY,CAChB5F,WACAlD,iBACA0I,qBACAjI,kBACAnB,iBACAmJ,oBACAsG,eACAtP,sBAAmC,QAAZoP,GAErB5L,EApCW,sBAoCK2L,GApCL,YAoCoB2B,IACnB,QAAZ1B,GACF5L,EAAUuN,KAAK,oBAGXtG,EAzCS,2BA0CVoG,EAAkBpG,MA1CR,IA2CblK,iBACAV,iBACAmB,kBACAhB,sBAAuBqJ,EAAUrJ,wBAG7BgR,EAAmB,WACvB,OAAQ3H,EAAUJ,oBAChB,IAAK,YACH,OAAO,KACT,IAAK,OACH,OAAO,IACT,IAAK,OACH,OAAQ,IACV,QACE,OAAO,GATY,GAanBkB,EAA2B,CACnB,QAAZiF,GAAqB,CACnBlQ,KAAK,uBACLsG,OAAQ,KAEV6J,GAAQ,CACNnQ,KAAK,0BACLsG,OAAQ,KAEV,CACEtG,KAAK,4BACLK,OAAQ6Q,GAAe/G,IAEzB,CACEnK,KAAK,qCACLsG,MAAOwL,KAEPrN,GAAY,CACZzE,KAAK,iBACLsG,OAAQ7B,IAEV/C,OAAO2H,SAEHlD,EAAuB,CAC3BG,MAAO2E,EAAyB/J,QAC9B,SAACC,EAAD,UAAoBA,GAApB,EAAQmF,OAA4B,KACpC,GAEFnG,QAAS,EACTE,OAAQ4K,EAAyB/J,QAC/B,SAACC,EAAD,UAAqBA,GAArB,EAAQd,QAA8B,KACtC,GAEFC,OAAQyR,GAAsB5H,GAC9BtJ,OAAQmR,GAAsB7H,GAC9B5J,QAAS0R,GAAuB9H,GAChC1H,KAAMwI,GAGFjJ,EArGS,2BAsGVuJ,GAtGU,IAuGbjK,oBAAqB2E,EAAiBhG,YACtCqG,MACEL,EAAiBK,MACjBL,EAAiB9F,SAChBgG,EAAqBG,MAAQwL,GAChC/Q,YAAakF,EAAiB3F,OAC9BW,YAAakF,EAAqB7F,OAClCkL,kBAAmB,CACjBlH,YACAE,SACAnE,OACkC,YAAhC8J,EAAUL,kBACN/C,KAAKmL,IAAI,GAAKjM,EAAiB5F,OAAQ,GACvC,EACN8R,QACE9B,EACAC,GACCrK,EAAiB9F,QAChBgG,EAAqBG,MACrBH,EAAqBhG,QACrBuR,GAA+B,CAAEvH,YAAWlE,uBAElDxD,KAAM,aA7HO,UAgIM6I,EAAWtJ,GAhIjB,WAgIT+J,EAhIS,+BAmIbJ,OAAUD,GACVE,EAAS,2GApII,4BA0IT1F,EA1IS,2BA0IgB6F,GA1IhB,IA0IwBzF,OAAQyF,EAAO7L,SAEpCC,SAAWkR,GAAsB,CACjDlH,YACAlE,mBACAC,sBAIIkM,EAnJS,sBAoJVnM,EAAiBhG,aApJP,YAqJViG,EAAkBjG,YAAYwB,KAAI,qBAAGzB,WAGxCmR,GAAmB,CAAEhH,YAAWlE,sBAE/BpE,GAAYsI,IACXiI,EAAezQ,SAAS,uBACxByQ,EAAezQ,SAAS,2BAE1BwE,EAAqB1D,KAAKoP,KAAK,CAC7B7R,KAAK,eACLK,OAAQ,IAIZsL,EAAU,CACR1F,mBACAkE,YACAhE,uBACAD,oBACAE,eAAgBJ,EAAoB,CAClCC,mBACAE,uBACAD,sBAEFqF,SAEFK,OAASF,GAhLM,4CAAH,sDAsOC2G,GAnDI,SAAC,GAQb,IAPL5C,EAOI,EAPJA,iBACAkC,EAMI,EANJA,kBACArG,EAKI,EALJA,WACAvG,EAII,EAJJA,QACA4G,EAGI,EAHJA,UACAC,EAEI,EAFJA,SACAG,EACI,EADJA,OAEMzK,EAAsBqQ,EAAkBvL,eAAenG,YACvD0O,EAAmB,CACvBc,EAAiBtF,UAAU5F,SAC3BoN,EAAkBxH,UAAU5F,UAExBJ,EACgD,SAAhDsL,EAAiBtF,UAAUhG,iBACtBsL,EAAiBtF,UAAUhG,iBAGkB,SAAlDwN,EAAkBxH,UAAUR,kBACvBgI,EAAkBxH,UAAUR,uBADrC,EAOF,OACE,sBAAKlE,UAAU,cAAf,UACE,cAAC,GAAD,CAAOC,MAAO,EAAd,sCACA,cAAC,GAAD,CACEpE,oBAAqBA,EACrBqN,iBAAkBA,EAClB7J,SAAU,SAACiE,GACTjE,GAAS,CACPwG,aACAK,YACAC,WACA+F,oBACA5I,YAGJhE,QAASA,EACTZ,iBAAkBA,IAEpB,cAAC,GAAD,CAAUgD,KAAM4E,EAAhB,SACE,cAAC,GAAD,eAAYA,UCrThBuG,GAAY,GACVC,GAAU,SAACvQ,GAAD,OAAYwQ,KAAKC,UAAUzQ,IAkK5B0Q,GA/GH,WAAO,IAAD,EAC4BxN,qBAD5B,mBACTyN,EADS,KACOC,EADP,OAEc1N,oBAAS,GAFvB,mBAETH,EAFS,KAEA8N,EAFA,OAGkC3N,qBAHlC,mBAGTqH,EAHS,KAGUuG,EAHV,OAIgB5N,mBAAS,GAJzB,mBAITsH,EAJS,KAICuG,EAJD,OAKgC7N,qBALhC,mBAKTuH,EALS,KAKSuG,EALT,OAMsB9N,mBAAS,GAN/B,mBAMTwH,EANS,KAMIuG,EANJ,OAQgC/N,qBARhC,mBAQTuK,EARS,KAQSyD,EART,OASkChO,qBATlC,mBASTyM,EATS,KASUwB,EATV,OAUgCjO,qBAVhC,mBAUTkO,EAVS,KAUSC,EAVT,OAWUnO,qBAXV,mBAWToO,EAXS,KAWF1H,EAXE,KAuBhB,GAVAlJ,qBAAU,WAKR,OAJKiQ,GACHC,EAAkBW,QAGb,WACS,OAAdZ,QAAc,IAAdA,KAAgBa,eAEjB,CAACb,KAECA,EACH,OAAO,KAGT,IAAMrH,EA3EN,SAAC,GAAD,IACEqH,EADF,EACEA,eACAE,EAFF,EAEEA,WACAC,EAHF,EAGEA,qBACAC,EAJF,EAIEA,YACAC,EALF,EAKEA,oBACAC,EANF,EAMEA,eANF,8CAQA,WAAOjR,GAAP,6BAAAiB,EAAA,yDACQwQ,EAAWlB,GAAQvQ,IACnBsQ,GAAUmB,GAFlB,yCAGWnB,GAAUmB,IAHrB,cAMEZ,GAAW,GANb,SAQiCF,EAAee,QAAQ1R,GARxD,OAQQyK,EARR,OASEuG,EAAoBvG,GACpBwG,EAAe,GACX1G,EAAoB,EACfoH,EAAI,EAZf,aAYkBA,GAAKlH,GAZvB,6BAaIF,EAbJ,UAa+BoG,EAAeiB,aAb9C,QAaIrH,EAbJ,aAcI0G,EAAeU,EAAIlH,GAdvB,QAYyCkH,IAZzC,wBAiBEb,EAAqBvG,GACrBwG,EAAY,GACNc,EAAY,IAETF,EAAI,EArBf,aAqBkBA,EAAI5M,KAAK+M,KAAKvH,EAAoBsH,IArBpD,wBAsBUE,EAAMhN,KAAKiN,KAAKL,EAAI,GAAKE,EAAWtH,GAtB9C,UAuBmBoG,EAAesB,QAAQN,EAAIE,EAAWE,GAvBzD,QAuBIhI,EAvBJ,OAwBIgH,EAAYgB,EAAMxH,GAxBtB,QAqBgEoH,IArBhE,yCA2BQhB,EAAeuB,QA3BvB,eA6BErB,GAAW,GACXC,OAAqBpH,GACrBsH,OAAoBtH,GACpBqH,EAAY,GACZE,EAAe,GAEfX,GAAUmB,GAAY1H,EAnCxB,kBAqCSA,GArCT,4CARA,sDA2EmBoI,CAAiB,CAClCxB,iBACAE,aACAC,uBACAC,cACAC,sBACAC,mBAGItG,EAAK,uCAAG,4BAAA1J,EAAA,6DACZ0P,EAAea,YAETY,EAAoBb,OAHd,SAINa,EAAkBF,QAJZ,OAMZtB,EAAkBwB,GAElBtB,OAAqBpH,GACrBsH,OAAoBtH,GACpBqH,EAAY,GACZE,EAAe,GAEfJ,GAAW,GAbC,4CAAH,qDAgBX,OACE,gCACE,cAAC,GAAD,IACA,cAAC,GAAD,CACEvH,WAAYA,EACZvG,QAASA,EACTgH,OAAQ0D,EACR9D,UAAW,SAACxE,GACVgM,OAAqBzH,GACrB2H,OAAoB3H,GACpBwH,EAAoB/L,IAEtByE,SAAU,SAAC0H,GACTH,OAAqBzH,GACrB2H,OAAoB3H,GACpBE,EAAS0H,MAGZ7D,GACC,cAAC,GAAD,CACEnE,WAAYA,EACZvG,QAASA,EACTgH,OAAQ4F,EACRhG,UAAW,SAACxE,GACVkM,OAAoB3H,GACpByH,EAAqBhM,IAEvByE,SAAU,SAAC0H,GACTD,OAAoB3H,GACpBE,EAAS0H,IAEX7D,iBAAkBA,IAGrBA,GAAoBkC,GACnB,cAAC,GAAD,CACElC,iBAAkBA,EAClBkC,kBAAmBA,EACnBrG,WAAYA,EACZvG,QAASA,EACT4G,UAAW0H,EACXzH,SAAUA,EACVG,OAAQqH,IAGXrO,GACC,cAAC,GAAD,CACEwH,kBAAmBA,EACnBC,SAAUA,EACVE,YAAaA,EACbD,iBAAkBA,EAClBE,MAAOA,IAGV2G,GAAS,cAAC,GAAD,CAAS1O,QAAS0O,QC5JnBe,GAZS,SAAAC,GAClBA,GAAeA,aAAuBC,UACxC,8BAAqBC,MAAK,YAAkD,IAA/CC,EAA8C,EAA9CA,OAAQC,EAAsC,EAAtCA,OAAQC,EAA8B,EAA9BA,OAAQC,EAAsB,EAAtBA,OAAQC,EAAc,EAAdA,QAC3DJ,EAAOH,GACPI,EAAOJ,GACPK,EAAOL,GACPM,EAAON,GACPO,EAAQP,OCDdQ,IAASvN,OACP,cAAC,IAAMwN,WAAP,UACE,cAAC,GAAD,MAEFC,SAASC,eAAe,SAM1BZ,O","file":"static/js/main.b6171f51.chunk.js","sourcesContent":["\n\t\t\t\tvar addMethods = require(\"../node_modules/workerize-loader/dist/rpc-wrapper.js\")\n\t\t\t\tvar methods = [\"prepare\",\"preprocess\",\"process\",\"clean\"]\n\t\t\t\tmodule.exports = function() {\n\t\t\t\t\tvar w = new Worker(__webpack_public_path__ + \"91b249b4f26007b51626.worker.js\", { name: \"[hash].worker.js\" })\n\t\t\t\t\taddMethods(w, methods)\n\t\t\t\t\t\n\t\t\t\t\treturn w\n\t\t\t\t}\n\t\t\t","// Ref: https://thelastsovereign.miraheze.org/wiki/Investments\n\nconst investments = [\n  {\n    name: 'Bank of Stineford',\n    price: 400000,\n    profits: 240000,\n  },\n  {\n    name: 'Stineford Weapons Store',\n    price: 200000,\n    profits: 75000,\n  },\n  {\n    name: 'Trading Pillar Rights',\n    price: 300000,\n    profits: 100000,\n  },\n  {\n    name: 'Stineford Succubus Tower',\n    price: ({ chapter1x2Tower }) => {\n      if (chapter1x2Tower) {\n        return 800000;\n      }\n      return 1000000;\n    },\n    social: 2,\n  },\n  {\n    name: 'Yhilini Airship Fleet',\n    price: 1000000,\n    profits: 100000,\n  },\n  {\n    name: \"Min's Trade Route\",\n    price: 400000,\n    profits: 185000,\n    givini: 1,\n    chalice: 1,\n  },\n  {\n    name: 'Yhilini Succubi Trade',\n    price: ({ chapter3Infrastructure }) =>\n      chapter3Infrastructure ? 400000 : 550000,\n    profits: 200000,\n    chalice: 2,\n  },\n  {\n    name: 'Yhilini Brothel Reform',\n    price: 25000,\n    profits: 35000,\n  },\n  {\n    name: 'Premium Steel Owner',\n    price: ({ chapter1Steel }) => (!!chapter1Steel ? 75000 : 100000),\n    profits: 10000,\n  },\n  {\n    name: 'Yhilini Bank Core Lender',\n    price: ({ chapter1Bank }) => {\n      if (chapter1Bank) {\n        return 450000;\n      }\n      return 500000;\n    },\n    profits: 150000,\n  },\n  {\n    name: 'Mercenary Offices',\n    price: ({ chapter3Infrastructure }) =>\n      chapter3Infrastructure ? 150000 : 250000,\n    profits: 15000,\n    social: 2,\n  },\n  {\n    name: 'Theltiar Rentals',\n    price: 425000,\n    profits: 95000,\n    social: 1,\n  },\n  {\n    name: 'Theltiar Flowhouse',\n    price: 250000,\n    profits: 80000,\n  },\n  {\n    name: 'Denmiel Mushrooms',\n    price: 105000,\n    profits: 40000,\n  },\n  {\n    name: 'Denmiel Archives',\n    price: ({ gawnfallMother }) => {\n      if (gawnfallMother === 'full_unlock') {\n        return 150000;\n      }\n      return 250000;\n    },\n    profits: 20000,\n    social: 1,\n  },\n  {\n    name: 'Eustrin Guild',\n    price: 600000,\n    profits: 250000,\n  },\n  {\n    name: 'Succubus Armorer',\n    price: ({ chapter3Armorer }) => {\n      if (chapter3Armorer) {\n        return 100000;\n      }\n      return 150000;\n    },\n    profits: 10000,\n    chalice: 2,\n  },\n  {\n    name: 'Gasm Falls Trade',\n    price: 275000,\n    profits: 110000,\n    chalice: 2,\n  },\n  {\n    name: 'Givini Tunnels',\n    price: 1500000,\n    profits: 300000,\n    givini: 3,\n    takkan: 3,\n    chalice: 3,\n  },\n  {\n    name: 'Lustlord Temples',\n    price: ({ lustlordStatuesBought }) => {\n      if (lustlordStatuesBought) {\n        return 750000;\n      }\n      return 50000 + 750000;\n    },\n    profits: 50000,\n    chalice: ({ lustlordStatuesBought }) => {\n      if (lustlordStatuesBought) {\n        return 5;\n      }\n      return 2 + 5;\n    },\n  },\n  {\n    name: 'Succubus Band Tour',\n    price: 100000,\n    profits: 2000,\n    givini: 2,\n    social: 1,\n    takkan: 2,\n  },\n  {\n    name: 'Gasm Falls Water Cleanup',\n    price: 250000,\n    social: 1,\n    chalice: 5,\n  },\n  {\n    name: 'Orc Tunnels',\n    price: 200000,\n    social: 1,\n    chalice: 5,\n  },\n  {\n    name: 'Givini Smithing',\n    price: 200000,\n    profits: 10000,\n    givini: 2,\n  },\n  {\n    name: 'Givini Orc Merchant',\n    price: ({ giviniStart: newGiviniScore = 0 }) => {\n      if (newGiviniScore < 20) {\n        return 100000;\n      }\n      if (newGiviniScore < 25) {\n        return 200000;\n      }\n      if (newGiviniScore < 35) {\n        return 300000;\n      }\n      if (newGiviniScore < 45) {\n        return 400000;\n      }\n      return 500000;\n    },\n    profits: ({ giviniStart = 0, giviniExtra = 0, investments }) => {\n      const newGiviniScore =\n        giviniStart +\n        giviniExtra +\n        investments.reduce((acc, investment) => {\n          return acc + (investment?.givini || 0);\n        }, 0);\n      if (newGiviniScore < 20) {\n        return 25000;\n      }\n      if (newGiviniScore < 30) {\n        return 50000;\n      }\n      if (newGiviniScore < 40) {\n        return 100000;\n      }\n      if (newGiviniScore < 50) {\n        return 150000;\n      }\n      return 200000;\n    },\n    givini: 5,\n  },\n  {\n    name: 'Givini Teahouse Chain',\n    price: 275000,\n    profits: 30000,\n    givini: 2,\n    social: 1,\n    takkan: 1,\n    chalice: 1,\n  },\n  {\n    name: 'Bank of Givini',\n    price: 350000,\n    profits: 300000,\n    givini: 5,\n    takkan: 2,\n    chalice: 2,\n  },\n  {\n    name: 'Givini Mage Guild',\n    price: 1000000,\n    profits: 40000,\n    givini: 5,\n  },\n  {\n    name: 'War Monument',\n    price: 1000000,\n    givini: 10,\n    social: 3,\n    takkan: 2,\n    chalice: 2,\n  },\n  {\n    name: \"Tarran'Kan Housing + Tarran'Kan Trade Upgrade\",\n    price: ({ gawnfallTakkan }) => {\n      if (gawnfallTakkan === 'major') {\n        return 750000 + 100000;\n      }\n      if (gawnfallTakkan === 'minor') {\n        return 900000 + 100000;\n      }\n      return 1000000 + 100000;\n    },\n    profits: 50000 + 50000,\n    social: 1,\n    takkan: 5 + 2,\n  },\n  {\n    name: 'Hall of Mental Strength',\n    price: 200000,\n    profits: 25000,\n    social: 1,\n    takkan: 3,\n  },\n  {\n    name: 'Booze Shack',\n    price: 150000,\n    profits: 50000,\n    social: 1,\n    takkan: 2,\n  },\n  {\n    name: \"Tradesmasher's Guild\",\n    price: 350000,\n    profits: ({\n      investments = [],\n      previousInvestments = [],\n      gawnfallTakkan,\n      chapter3Tradesmasher,\n    }) => {\n      const guildScore =\n        (chapter3Tradesmasher ? 1 : 0) +\n        [...previousInvestments, ...investments.map(({ name }) => name)].filter(\n          (name) => {\n            return [\n              \"Cee'Kan Shipping\",\n              'Lonely Sailor Services',\n              'Givini Orc Merchant',\n              'Orcish Democracy',\n              'Orc Pools Upgrade',\n            ].includes(name);\n          }\n        ).length +\n        (gawnfallTakkan === 'major' ? 1 : 0);\n\n      if (guildScore < 1) {\n        return 25000;\n      }\n      if (guildScore === 1) {\n        return 50000;\n      }\n      if (guildScore === 2) {\n        return 75000;\n      }\n      if (guildScore === 3) {\n        return 125000;\n      }\n      if (guildScore === 4) {\n        return 150000;\n      }\n      if (guildScore === 5) {\n        return 175000;\n      }\n      return 200000;\n    },\n    takkan: 5,\n  },\n  {\n    name: 'Lonely Sailor Services',\n    price: 250000,\n    profits: 100000,\n    social: 1,\n    takkan: 5,\n  },\n  {\n    name: \"Cee'Kan Shipping\",\n    price: 700000,\n    profits: 200000,\n    takkan: 5,\n  },\n  {\n    name: 'Orcish Democracy',\n    price: 1000000,\n    social: 5,\n    takkan: 10,\n  },\n  {\n    name: 'Imp Offices',\n    price: 100000,\n    social: 1,\n    takkan: 1,\n  },\n  {\n    name: 'Orc Pools Upgrade',\n    price: 500000,\n    social: 2,\n    takkan: 5,\n  },\n  {\n    name: 'Givini Banners + Givini Dragon Statue',\n    price: 1000 + 2500,\n    givini: 1,\n  },\n  {\n    name: 'Orcish Drake Statue + Orcish Gargoyle Statue + Orcish Golden Drake Statue',\n    price: 1000 + 2000 + 5000,\n    takkan: 1,\n  },\n];\n\nconst ardfordOpen = ({ gawnfallArdford }) => {\n  return gawnfallArdford === 'resolved' || gawnfallArdford === 'overkill';\n};\n\nconst ifArdfordOpen = (price) => {\n  return (params) => (ardfordOpen(params) && price) || Infinity;\n};\n\nexport const postGawnfallInvestments = [\n  ...investments,\n  {\n    name: \"Tak'Kan Mine\",\n    price: ({ gawnfallTakkan }) => {\n      if (gawnfallTakkan === 'major') {\n        return 250000;\n      }\n      if (gawnfallTakkan === 'minor') {\n        return 500000;\n      }\n      return Infinity;\n    },\n    profits: 125000,\n    social: 1,\n    takkan: 5,\n  },\n  {\n    name: 'Ivalan Bank',\n    price: ifArdfordOpen(550000),\n    profits: 225000,\n  },\n  {\n    name: 'Mercenary Flotilla',\n    price: ifArdfordOpen(500000),\n    profits: 25000,\n  },\n  {\n    name: 'Sanitation Mages Guild',\n    price: ifArdfordOpen(100000),\n    profits: 5000,\n  },\n  {\n    name: 'Crystal Refiner',\n    price: ifArdfordOpen(400000),\n    profits: 55000,\n  },\n  {\n    name: 'Ardford Restaurant',\n    price: ifArdfordOpen(100000),\n    profits: (params) => {\n      const { investments, previousInvestments = [] } = params;\n      if (\n        ardfordOpen(params) &&\n        [\n          ...previousInvestments,\n          ...investments.map(({ name }) => name),\n        ].includes('Givini Teahouse Chain')\n      ) {\n        return 25000;\n      }\n      return 10000;\n    },\n  },\n];\n\nexport const getInvestments = (key) => {\n  if (key === 'gawnfall') {\n    return postGawnfallInvestments;\n  }\n  return investments;\n};\n\nexport default investments;\n","import { Form, Select } from 'antd';\nimport { getInvestments } from '../../data/investments';\nimport { useEffect } from 'react';\n\nconst CustomSelect = ({ name, label, tooltip, purchased, form, list }) => {\n  useEffect(() => {\n    form.setFieldsValue({\n      [name]: form\n        .getFieldValue(name)\n        .filter((inv) => !purchased.includes(inv)),\n    });\n  }, [form, purchased, name]);\n\n  return (\n    <Form.Item label={label} name={name} tooltip={tooltip}>\n      <Select\n        options={getInvestments(list)\n          .filter(({ name }) => !purchased.includes(name))\n          .sort(({ name: a }, { name: b }) => a.localeCompare(b))\n          .map(({ name }) => {\n            return {\n              label: name,\n              value: name,\n            };\n          })}\n        mode=\"multiple\"\n      />\n    </Form.Item>\n  );\n};\n\nexport default CustomSelect;\n","import Select from './Select';\n\nconst Banned = ({ purchased, form, list, tooltip }) => {\n  return (\n    <Select\n      form={form}\n      purchased={purchased}\n      label={`Investments you explicitly refuse to buy, for any reason`}\n      name=\"banned\"\n      tooltip={tooltip}\n      list={list}\n    />\n  );\n};\n\nexport default Banned;\n","import Select from './Select';\n\nconst Mandatory = ({ form, purchased, tooltip, label, list }) => {\n  return (\n    <Select\n      name=\"mandatory\"\n      form={form}\n      purchased={purchased}\n      label={label || `Investments you explicitly want to buy, for any reason`}\n      tooltip={tooltip}\n      list={list}\n    />\n  );\n};\n\nexport default Mandatory;\n","import { Form, InputNumber } from 'antd';\n\nconst Extra = () => {\n  return (\n    <Form.Item\n      label={`Other spending`}\n      name=\"spending\"\n      tooltip={`Money to be spent on investments not listed elsewhere, like headquarters upgrades.`}\n    >\n      <InputNumber />\n    </Form.Item>\n  );\n};\n\nexport default Extra;\n","import {\n  Form,\n  Select,\n  InputNumber,\n  Button,\n  Card,\n  Checkbox,\n  Typography,\n  Divider,\n} from 'antd';\nimport { useEffect, useState } from 'react';\nimport Banned from '../components/form/Banned';\nimport Mandatory from '../components/form/Mandatory';\nimport Extra from '../components/form/Extra';\n\nconst { Title } = Typography;\n\nconst possiblePrevious = [\n  \"Min's Trade Route\",\n  'Yhilini Succubi Trade',\n  'Yhilini Bank Core Lender',\n  'Mercenary Offices',\n  'Theltiar Rentals',\n  'Theltiar Flowhouse',\n  'Denmiel Mushrooms',\n  'Denmiel Archives',\n  'Eustrin Guild',\n  'Gasm Falls Trade',\n  'Premium Steel Owner',\n  'Ivalan Bank',\n  'Mercenary Flotilla',\n  'Sanitation Mages Guild',\n  'Crystal Refiner',\n  'Ardford Restaurant',\n];\n\nconst initialValues = {\n  previous: [\n    'Premium Steel Owner',\n    \"Min's Trade Route\",\n    'Yhilini Succubi Trade',\n    'Eustrin Guild',\n    'Denmiel Mushrooms',\n    'Ivalan Bank',\n    'Crystal Refiner',\n    'Ardford Restaurant',\n  ],\n  remainingPron: 7500,\n  baseProfit: 2435000,\n  chapter1Steel: false,\n  strategy: 'compromise',\n  startingSocial: 34,\n  chapter3Infrastructure: true,\n  merchantSolution: 'wait',\n  jhenno: 'religion',\n  magicalItems: 'givini',\n  mandatory: ['Givini Orc Merchant', 'Bank of Givini'],\n  research: 'orc',\n  banned: [\n    'Orcish Drake Statue + Orcish Gargoyle Statue + Orcish Golden Drake Statue',\n  ],\n  spending: 0,\n  chapter1Bank: true,\n  chapter1x2Tower: true,\n  chapter3Armorer: true,\n  chapter3Tradesmasher: true,\n};\n\nconst toSelectOptions = (list) => {\n  return [...list].sort().map((value) => {\n    return {\n      label: value,\n      value: value,\n    };\n  });\n};\n\nconst requiredRule = { required: true, message: `Please provide a value.` };\n\nconst CustomForm = ({ onFinish, loading }) => {\n  const [form] = Form.useForm();\n\n  const [previous, setPrevious] = useState(initialValues.previous);\n  const [mandatory, setMandatory] = useState(initialValues.mandatory);\n  const [strategy, setStrategy] = useState(initialValues.strategy);\n\n  useEffect(() => {\n    if (['social', 'succession'].includes(strategy)) {\n      if (form.getFieldValue('merchantSolution') === 'wait') {\n        form.setFieldsValue({ merchantSolution: 'neutral' });\n      }\n      return;\n    }\n\n    if (form.getFieldValue('merchantSolution') === 'neutral') {\n      form.setFieldsValue({ merchantSolution: 'wait' });\n    }\n  }, [form, strategy]);\n\n  return (\n    <Form\n      initialValues={initialValues}\n      onFinish={onFinish}\n      onValuesChange={(_, allValues) => {\n        setPrevious(allValues.previous);\n        setMandatory(allValues.mandatory);\n        setStrategy(allValues.strategy);\n      }}\n      className=\"round-form first-round-form\"\n      form={form}\n    >\n      <div className=\"past-block\">\n        <Title level={2}>{`Chapters 1-3`}</Title>\n        <Card>\n          <div className=\"numbers\">\n            <Form.Item\n              label={`ProN remaining at the end of chapter 3`}\n              name=\"remainingPron\"\n              tooltip={`In the Calculator, go to \"War Investment Phase\" and copy the value next to \"ProN available\".`}\n              rules={[requiredRule]}\n            >\n              <InputNumber />\n            </Form.Item>\n            <Form.Item\n              label={`Total profit at the start of chapter 4`}\n              name=\"baseProfit\"\n              tooltip={`In the Calculator, go to \"First Tower Run and Investment and copy the value next to \"Total ProN Return\".`}\n              rules={[requiredRule]}\n            >\n              <InputNumber />\n            </Form.Item>\n            <Form.Item\n              label={`Your social standing at the start of chapter 4`}\n              name=\"startingSocial\"\n              tooltip={`In the Calculator, go to \"War Investment Phase\" and copy the value next to \"Social Score\".`}\n              rules={[requiredRule]}\n            >\n              <InputNumber />\n            </Form.Item>\n          </div>\n\n          <Form.Item\n            label={`Investments already bought during chapters 2/3`}\n            name=\"previous\"\n          >\n            <Select\n              options={toSelectOptions(possiblePrevious)}\n              mode=\"multiple\"\n            />\n          </Form.Item>\n\n          <div className=\"checkboxes\">\n            <Form.Item name=\"chapter1x2Tower\" valuePropName=\"checked\">\n              <Checkbox>{`You visited the Stineford Succubus Tower during chapter 1/2.`}</Checkbox>\n            </Form.Item>\n            {!previous.includes('Premium Steel Owner') && (\n              <Form.Item name=\"chapter1Steel\" valuePropName=\"checked\">\n                <Checkbox>{`You invested 20,000 ProN in Premium Steel during chapter 1.`}</Checkbox>\n              </Form.Item>\n            )}\n            {!previous.includes('Yhilini Bank Core Lender') && (\n              <Form.Item name=\"chapter1Bank\" valuePropName=\"checked\">\n                <Checkbox>{`You invested in the Yhilin Bank during chapter 1.`}</Checkbox>\n              </Form.Item>\n            )}\n            {!(\n              previous.includes('Yhilini Succubi Trade') &&\n              previous.includes('Mercenary Offices')\n            ) && (\n              <Form.Item name=\"chapter3Infrastructure\" valuePropName=\"checked\">\n                <Checkbox>{`You funded Yhilin Infrastructure during chapter 3.`}</Checkbox>\n              </Form.Item>\n            )}\n            <Form.Item name=\"chapter3Armorer\" valuePropName=\"checked\">\n              <Checkbox>{`You visited the Succubus Armorer during chapter 3.`}</Checkbox>\n            </Form.Item>\n            <Form.Item name=\"chapter3Tradesmasher\" valuePropName=\"checked\">\n              <Checkbox>{`You met Tradesmasher during chapter 3.`}</Checkbox>\n            </Form.Item>\n          </div>\n        </Card>\n      </div>\n\n      <Title level={2}>{`Chapter 4 – Round 1`}</Title>\n      <Card title={`Strategy`}>\n        <Form.Item name=\"strategy\" label={`Succession crisis`}>\n          <Select\n            options={[\n              {\n                label: `Focus on profits; do only the bare minimum for the Ardan succession crisis (New Givini ≥ 25).`,\n                value: 'money',\n              },\n              {\n                label: `Reach most thresholds for the Ardan succession crisis while keeping a focus on profits (New Givini ≥ 25, Social ≥ 30).`,\n                value: 'compromise',\n              },\n              {\n                label: `Mix profits and social to achieve almost everything in the Ardan succession crisis (New Givini ≥ 25, Social ≥ 40).`,\n                value: 'social',\n              },\n              {\n                label: `Go all in on the Ardan succession crisis (New Givini ≥ 25, Social ≥ 40, War Monument or Givini Mage Guild).`,\n                value: 'succession',\n              },\n            ]}\n          />\n        </Form.Item>\n        <div className=\"selects\">\n          <Form.Item label={`Merchant dispute`} name=\"merchantSolution\">\n            <Select\n              options={[\n                {\n                  value: 'neutral',\n                  label: `Neutral compromise (force Social ≥ 40)`,\n                },\n                {\n                  value: 'givini',\n                  label: `Favor New Givini`,\n                },\n                {\n                  value: 'wait',\n                  label: `Wait`,\n                },\n              ]}\n            />\n          </Form.Item>\n        </div>\n        <div className=\"selects\">\n          <Form.Item label={`Research`} name=\"research\">\n            <Select\n              options={[\n                {\n                  value: 'orc',\n                  label: `Orc Diversification`,\n                },\n                {\n                  value: 'unpeople',\n                  label: `Unpeople Transformation`,\n                },\n                {\n                  value: 'purity',\n                  label: `Purity Magic`,\n                },\n                {\n                  value: 'defense',\n                  label: `Base Defense`,\n                },\n              ]}\n            />\n          </Form.Item>\n          <Form.Item label={`Jhenno's cooperation`} name=\"jhenno\">\n            <Select\n              options={[\n                {\n                  value: 'politics',\n                  label: `Politics`,\n                },\n                {\n                  value: 'religion',\n                  label: `Religion`,\n                },\n              ]}\n            />\n          </Form.Item>\n          <Form.Item label={`Rose's house magical items`} name=\"magicalItems\">\n            <Select\n              options={[\n                {\n                  value: 'chalice',\n                  label: `Chalice States`,\n                },\n                {\n                  value: 'givini',\n                  label: `Givini`,\n                },\n                {\n                  value: 'takkan',\n                  label: `Tak'Kan`,\n                },\n              ]}\n            />\n          </Form.Item>\n        </div>\n\n        <Divider />\n        <Mandatory\n          purchased={previous}\n          form={form}\n          tooltip={`Forcing a few certain investments can improve performances tremendously.`}\n        />\n        <Banned\n          purchased={[...previous, ...mandatory]}\n          form={form}\n          tooltip={\n            <>\n              {`For cases where a particular investment might be more of a curse than a blessing in the long run and you want to see what happens without it.`}\n              <br />\n              {`Banning an investment that you know to be useless at that particular point can also improve performances quite a bit, especially if said investment is cheap.`}\n            </>\n          }\n        />\n        <Extra />\n\n        <Form.Item>\n          <Button type=\"primary\" htmlType=\"submit\" loading={loading}>\n            {`Submit`}\n          </Button>\n        </Form.Item>\n      </Card>\n    </Form>\n  );\n};\n\nexport default CustomForm;\n","export const buildFinalStandings = ({\n  initialStandings,\n  investmentChanges,\n  nonInvestmentChanges,\n}) => {\n  let finalStandings = {};\n\n  ['profits', 'givini', 'social', 'takkan', 'chalice'].forEach((key) => {\n    finalStandings[key] =\n      initialStandings[key] +\n      (investmentChanges[key] || 0) +\n      (nonInvestmentChanges[key] || 0);\n  });\n\n  finalStandings['investments'] = [\n    ...initialStandings.investments,\n    ...investmentChanges.investments.map(({ name }) => name),\n  ];\n\n  finalStandings['money'] =\n    initialStandings.money +\n    initialStandings.profits -\n    investmentChanges.price +\n    nonInvestmentChanges.money;\n\n  return finalStandings;\n};\n\nexport const nF = (number) => number.toLocaleString('en-US');\n","import { Table } from 'antd';\nimport { nF } from '../misc';\n\nconst numberColWidth = 120;\n\nconst NumberCell = ({ children, format }) => {\n  const number = children;\n  const formattedNumber = !!format ? nF(Math.abs(number)) : Math.abs(number);\n\n  return `${number < 0 ? `-` : `+`}${formattedNumber}`;\n};\n\nconst Investments = ({ investments }) => {\n  const dataSource = investments.map(({ name, ...data }) => {\n    return {\n      key: name,\n      name,\n      ...data,\n    };\n  });\n\n  const columns = [\n    {\n      title: `Name`,\n      dataIndex: 'name',\n      sorter: (a, b) => a.name.localeCompare(b.name),\n    },\n    {\n      title: `Price`,\n      dataIndex: 'price',\n      render: (price) => nF(price),\n      sorter: (a, b) => a.price - b.price,\n      width: numberColWidth,\n    },\n    {\n      title: `Profits`,\n      dataIndex: 'profits',\n      render: (profits) => nF(profits),\n      sorter: (a, b) => a.profits - b.profits,\n      width: numberColWidth,\n    },\n    {\n      title: `Social`,\n      dataIndex: 'social',\n      render: (social = 0) => <NumberCell>{social}</NumberCell>,\n      width: numberColWidth,\n    },\n  ];\n\n  return <Table dataSource={dataSource} columns={columns} pagination={false} />;\n};\n\nconst Others = ({ list = [] }) => {\n  const dataSource = list.map(({ name, ...data }) => {\n    return {\n      key: name,\n      name,\n      ...data,\n    };\n  });\n\n  const render = (value = 0) => <NumberCell format={true}>{value}</NumberCell>;\n\n  const columns = [\n    {\n      title: `Name`,\n      dataIndex: 'name',\n    },\n    {\n      title: `ProN`,\n      dataIndex: 'money',\n      render,\n      width: numberColWidth,\n    },\n    {\n      title: `Profits`,\n      dataIndex: 'profits',\n      render,\n      width: numberColWidth,\n    },\n    {\n      title: `Social`,\n      dataIndex: 'social',\n      render,\n      width: numberColWidth,\n    },\n  ];\n\n  return <Table dataSource={dataSource} columns={columns} pagination={false} />;\n};\n\nconst Ledger = ({\n  initialStandings,\n  nonInvestmentChanges,\n  investmentChanges,\n}) => {\n  const render = (value, { key }) => {\n    if (['base', 'total'].includes(key)) {\n      return nF(value);\n    }\n    return <NumberCell format={true}>{value}</NumberCell>;\n  };\n\n  const columns = [\n    {\n      dataIndex: 'category',\n    },\n    {\n      title: `ProN`,\n      dataIndex: 'money',\n      render,\n      width: numberColWidth,\n    },\n    {\n      title: `Profits`,\n      dataIndex: 'profits',\n      render,\n      width: numberColWidth,\n    },\n    {\n      title: `Social`,\n      dataIndex: 'social',\n      render,\n      width: numberColWidth,\n    },\n  ];\n\n  const sum = (key) =>\n    initialStandings[key] + nonInvestmentChanges[key] + investmentChanges[key];\n\n  const extraProfits =\n    investmentChanges.profits -\n    investmentChanges.investments.reduce(\n      (acc, { profits }) => acc + profits,\n      0\n    );\n\n  const dataSource = [\n    {\n      ...initialStandings,\n      key: 'base',\n      category: `Previously`,\n    },\n    {\n      key: 'previous_investments',\n      category: `Start of the round`,\n      money: initialStandings.profits,\n      profits: 0,\n      social: 0,\n    },\n    {\n      ...investmentChanges,\n      key: 'investments',\n      category: `Changes from new investments`,\n      money: -investmentChanges.price,\n      profits: investmentChanges.profits - extraProfits,\n    },\n    {\n      ...nonInvestmentChanges,\n      key: 'other',\n      category: `Other changes`,\n      profits: nonInvestmentChanges.profits + extraProfits,\n    },\n  ];\n\n  const otherList = (() => {\n    if (extraProfits > 0) {\n      return [\n        ...nonInvestmentChanges.list,\n        {\n          name: `Extra profits from past investments`,\n          profits: extraProfits,\n        },\n      ];\n    }\n\n    return nonInvestmentChanges.list;\n  })();\n\n  return (\n    <Table\n      dataSource={dataSource}\n      columns={columns}\n      pagination={false}\n      bordered={true}\n      expandable={{\n        expandedRowRender: ({ key }) => {\n          if (key === 'investments') {\n            return <Investments investments={investmentChanges.investments} />;\n          }\n          if (key === 'other') {\n            return <Others list={otherList} />;\n          }\n          return null;\n        },\n        rowExpandable: ({ key }) => {\n          if (key === 'investments') {\n            return true;\n          }\n\n          if (key === 'other' && !!nonInvestmentChanges.list?.length) {\n            return true;\n          }\n\n          return false;\n        },\n        defaultExpandAllRows: true,\n      }}\n      summary={() => {\n        return (\n          <Table.Summary.Row>\n            <Table.Summary.Cell\n              colSpan={2}\n            >{`Standings at the end of the round`}</Table.Summary.Cell>\n            <Table.Summary.Cell>\n              {nF(\n                initialStandings.money +\n                  initialStandings.profits +\n                  nonInvestmentChanges.money -\n                  investmentChanges.price\n              )}\n            </Table.Summary.Cell>\n            <Table.Summary.Cell>{nF(sum('profits'))}</Table.Summary.Cell>\n            <Table.Summary.Cell>{sum('social')}</Table.Summary.Cell>\n          </Table.Summary.Row>\n        );\n      }}\n      className=\"ledger\"\n    />\n  );\n};\n\nexport default Ledger;\n","const Addition = ({ startingValue = 0, dataSources }) => {\n  return (\n    <table className=\"addition\">\n      <tbody>\n        <tr>\n          <td>{`Initial value`}</td>\n          <td>{startingValue}</td>\n          <td></td>\n        </tr>\n      </tbody>\n      {dataSources\n        .filter(({ dataSource }) => dataSource.length > 0)\n        .map(({ title, dataSource }, index) => {\n          return (\n            <tbody key={index.toString()}>\n              <tr>\n                <th colSpan=\"3\" scope=\"col\">\n                  {title}\n                </th>\n              </tr>\n              {dataSource.map(({ label, values, explanation }, index) => {\n                return (\n                  <tr key={index.toString()}>\n                    <td>{label}</td>\n                    <td>{values.map((value) => `+${value}`).join(' ')}</td>\n                    <td>{explanation}</td>\n                  </tr>\n                );\n              })}\n            </tbody>\n          );\n        })}\n      <tfoot>\n        <tr>\n          <th scope=\"row\">{`Total`}</th>\n          <td>\n            {startingValue +\n              dataSources.reduce(\n                (acc, { dataSource }) =>\n                  acc +\n                  dataSource.reduce(\n                    (acc, { values }) =>\n                      acc + values.reduce((acc, val) => acc + val),\n                    0\n                  ),\n                0\n              )}\n          </td>\n        </tr>\n      </tfoot>\n    </table>\n  );\n};\n\nexport default Addition;\n","const sum = (list) =>\n  list.reduce(\n    (acc, { values }) => acc + values.reduce((acc, value) => acc + value, 0),\n    0\n  );\n\nexport const startingValue = -5;\n\nexport const preliminaryChanges = ({ investments }) => {\n  return [\n    { label: `Petitions`, values: [5, 5, 2, 2, 2] },\n    {\n      label: `New Givini Trade`,\n      values: [5],\n      explanation: `On purchase`,\n    },\n    investments.includes(\"Min's Trade Route\") && {\n      label: `Min's Trade Route`,\n      values: [1],\n    },\n  ].filter(Boolean);\n};\n\nexport const baseValue = ({ chapter3Investments }) =>\n  startingValue + sum(preliminaryChanges({ investments: chapter3Investments }));\n\nexport const roundOneChanges = ({ merchantSolution, magicalItems }) => {\n  return [\n    magicalItems === 'givini' && {\n      label: `House Rose's magical items: Givini`,\n      values: [2],\n    },\n    merchantSolution === 'neutral' && {\n      label: `Merchant dispute: Neutral compromise`,\n      values: [1],\n    },\n    merchantSolution === 'givini' && {\n      label: `Merchant dispute: Favor New Givini`,\n      values: [2],\n    },\n    { label: `Givino Vinai equipment shop girl`, values: [1] },\n    { label: `Givini king`, values: [1] },\n    {\n      label: `New Givini Trade`,\n      values: [1],\n      explanation: `At the end of the round (before profits from the Givini Orc Merchant are computed)`,\n    },\n  ].filter(Boolean);\n};\n\nexport const roundOneValue = (...params) => sum(roundOneChanges(...params));\n\nexport const roundTwoChanges = ({ merchantSolution2 }) => {\n  return [\n    merchantSolution2 === 'neutral' && {\n      label: `Merchant dispute: Neutral compromise`,\n      values: [1],\n    },\n    merchantSolution2 === 'givini' && {\n      label: `Merchant dispute: Favor New Givini`,\n      values: [2],\n    },\n    {\n      label: `New Givini Trade`,\n      values: [1],\n      explanation: `At the end of the round (before profits from the Givini Orc Merchant are computed)`,\n    },\n  ].filter(Boolean);\n};\n\nexport const roundTwoValue = (...params) => sum(roundTwoChanges(...params));\n\nexport const roundThreeChanges = ({\n  merchantSolution3,\n  gawnfallTakkan,\n  gawnfallMercantile,\n}) => {\n  return [\n    merchantSolution3 === 'neutral' && {\n      label: `Merchant dispute: Neutral compromise`,\n      values: [1],\n    },\n    merchantSolution3 === 'givini' && {\n      label: `Merchant dispute: Favor New Givini`,\n      values: [2],\n    },\n    gawnfallTakkan === 'major' && {\n      label: `Gawnfall: Tak'Kan vote`,\n      values: [1],\n    },\n    ['excellent', 'good'].includes(gawnfallMercantile) && {\n      label: `Gawnfall: Mercantile solution`,\n      values: [1],\n    },\n    {\n      label: `New Givini Trade`,\n      values: [1],\n      explanation: `At the end of the round (before profits from the Givini Orc Merchant are computed)`,\n    },\n  ].filter(Boolean);\n};\n\nexport const roundThreeValue = (...params) => sum(roundThreeChanges(...params));\n","import Addition from '../../results/Addition';\nimport {\n  startingValue,\n  preliminaryChanges,\n  roundOneChanges,\n} from '../../data/givini';\n\nconst Givini = ({\n  chapter3Investments = [],\n  roundOneInvestments = [],\n  decisions = {},\n}) => {\n  return (\n    <Addition\n      startingValue={startingValue}\n      dataSources={[\n        {\n          title: `Chapter start`,\n          dataSource: preliminaryChanges({ investments: chapter3Investments }),\n        },\n        {\n          title: `Investments`,\n          dataSource: roundOneInvestments\n            .filter(({ givini = 0 }) => givini !== 0)\n            .map(({ name, givini }) => {\n              return { label: name, values: [givini] };\n            })\n            .sort(({ label: a }, { label: b }) => a.localeCompare(b)),\n        },\n        {\n          title: `Other changes`,\n          dataSource: roundOneChanges(decisions),\n        },\n      ]}\n    />\n  );\n};\n\nexport default Givini;\n","const sum = (list) =>\n  list.reduce(\n    (acc, { values }) => acc + values.reduce((acc, value) => acc + value, 0),\n    0\n  );\n\nexport const startingValue = -5;\n\nexport const preliminaryChanges = () => {\n  return [\n    { label: `Petitions`, values: [5, 2, 2, 5] },\n    {\n      label: `Tak'Kan Trade`,\n      values: [5],\n      explanation: `On purchase`,\n    },\n  ];\n};\n\nexport const baseValue = () => startingValue + sum(preliminaryChanges());\n\nexport const roundOneChanges = ({ magicalItems, research }) => {\n  return [\n    magicalItems === 'takkan' && {\n      label: `House Rose's magical items: Tak'Kan`,\n      values: [2],\n    },\n    {\n      label: `Tak'Kan Trade`,\n      values: [1],\n      explanation: `At the end of the round`,\n    },\n    research === 'orc' && {\n      label: `Research: Orc Diversification`,\n      values: [5],\n    },\n  ].filter(Boolean);\n};\n\nexport const roundOneValue = (...params) => sum(roundOneChanges(...params));\n\nexport const roundTwoChanges = ({ research }) => {\n  return [\n    {\n      label: `Tak'Kan Trade`,\n      values: [1],\n      explanation: `At the end of the round`,\n    },\n    research === 'orc' && {\n      label: `Research: Orc Diversification`,\n      values: [5],\n    },\n  ].filter(Boolean);\n};\n\nexport const roundTwoValue = (...params) => sum(roundTwoChanges(...params));\n\nexport const council = ({ investments = [], takkan, researches = [] }) => {\n  let yes = 3 + 1 + 1; //Base, Elleani, Impaler\n  let no = 2;\n\n  if (takkan >= 40) {\n    yes += 4;\n  } else if (takkan >= 30) {\n    yes += 3;\n    no += 1;\n  } else if (takkan >= 20) {\n    yes += 2;\n    no += 2;\n  } else if (takkan >= 10) {\n    yes += 1;\n    no += 3;\n  } else {\n    no += 4;\n  }\n\n  if (researches.includes('orc')) {\n    yes += 1;\n  } else {\n    no += 1;\n  }\n\n  yes += investments.filter((name) => {\n    return [\n      'Orc Pools Upgrade',\n      \"Tarran'Kan Housing + Tarran'Kan Trade Upgrade\",\n      'Hall of Mental Strength',\n      'Imp Offices',\n    ].includes(name);\n  }).length;\n\n  if (investments.includes('Orcish Democracy')) {\n    yes = +2;\n  }\n\n  return yes / (yes + no);\n};\n\nexport const roundThreeChanges = ({\n  research,\n  gawnfallMercantile,\n  gawnfallTakkan,\n}) => {\n  return [\n    gawnfallTakkan === 'minor' && {\n      label: `Gawnfall: Tak'Kan vote`,\n      values: [2],\n    },\n    gawnfallTakkan === 'major' && {\n      label: `Gawnfall: Tak'Kan vote`,\n      values: [5],\n    },\n    ['excellent', 'good'].includes(gawnfallMercantile) && {\n      label: `Gawnfall: Mercantile solution`,\n      values: [1],\n    },\n    {\n      label: `Tak'Kan Trade`,\n      values: [1],\n      explanation: `At the end of the round`,\n    },\n    research === 'orc' && {\n      label: `Research: Orc Diversification`,\n      values: [5],\n    },\n  ].filter(Boolean);\n};\n\nexport const roundThreeValue = (...params) => sum(roundThreeChanges(...params));\n","import Addition from '../../results/Addition';\nimport {\n  startingValue,\n  preliminaryChanges,\n  roundOneChanges,\n} from '../../data/takkan';\n\nconst Takkan = ({ roundOneInvestments = [], decisions = {} }) => {\n  return (\n    <Addition\n      startingValue={startingValue}\n      dataSources={[\n        {\n          title: `Chapter start`,\n          dataSource: preliminaryChanges(),\n        },\n        {\n          title: `Investments`,\n          dataSource: roundOneInvestments\n            .filter(({ takkan = 0 }) => takkan !== 0)\n            .map(({ name, takkan }) => {\n              return { label: name, values: [takkan] };\n            })\n            .sort(({ label: a }, { label: b }) => a.localeCompare(b)),\n        },\n        {\n          title: `Other changes`,\n          dataSource: roundOneChanges(decisions),\n        },\n      ]}\n    />\n  );\n};\n\nexport default Takkan;\n","const sum = (list) =>\n  list.reduce(\n    (acc, { values }) => acc + values.reduce((acc, value) => acc + value, 0),\n    0\n  );\n\nexport const startingValue = 10;\n\nexport const preliminaryChanges = ({ initialInvestments }) => {\n  return [\n    { label: `Petitions`, values: [5, 5, 1, 5, 2, 2] },\n    {\n      label: `Chalice States Trade`,\n      values: [5],\n      explanation: `On purchase`,\n    },\n    initialInvestments.includes(\"Min's Trade Route\") && {\n      label: `Min's Trade Route`,\n      values: [1],\n    },\n    initialInvestments.includes('Gasm Falls Shop') && {\n      label: `Gasm Falls Shop`,\n      values: [2],\n    },\n    initialInvestments.includes('Yhilini Succubi Trade') && {\n      label: `Yhilini Succubi Trade`,\n      values: [2],\n    },\n  ].filter(Boolean);\n};\n\nexport const baseValue = ({ initialInvestments }) =>\n  startingValue + sum(preliminaryChanges({ initialInvestments }));\n\nexport const roundOneChanges = ({ magicalItems }) => {\n  return [\n    magicalItems === 'chalice' && {\n      label: `House Rose's magical items: Chalice States`,\n      values: [2],\n    },\n    {\n      label: `Chalice States Trade`,\n      values: [1],\n      explanation: `At the end of the round`,\n    },\n  ].filter(Boolean);\n};\n\nexport const roundOneValue = (...params) => sum(roundOneChanges(...params));\n\nexport const roundTwoChanges = () => {\n  return [\n    {\n      label: `Chalice States Trade`,\n      values: [1],\n      explanation: `At the end of the round`,\n    },\n  ];\n};\n\nexport const roundTwoValue = (...params) => sum(roundTwoChanges(...params));\n\nexport const roundThreeChanges = ({\n  gawnfallMercantile,\n  gawnfallTakkan,\n  lustlordStatuesBought,\n}) => {\n  return [\n    lustlordStatuesBought && {\n      label: `New Lustlord Statues`,\n      values: [2],\n    },\n    gawnfallTakkan === 'major' && {\n      label: `Gawnfall: Tak'Kan vote`,\n      values: [2],\n    },\n    ['excellent', 'good'].includes(gawnfallMercantile) && {\n      label: `Gawnfall: Mercantile solution`,\n      values: [1],\n    },\n    {\n      label: `Chalice States Trade`,\n      values: [1],\n      explanation: `At the end of the round`,\n    },\n  ].filter(Boolean);\n};\n\nexport const roundThreeValue = (...params) => sum(roundThreeChanges(...params));\n","import Addition from '../../results/Addition';\nimport {\n  startingValue,\n  preliminaryChanges,\n  roundOneChanges,\n} from '../../data/chalice';\n\nconst Chalice = ({\n  chapter3Investments = [],\n  roundOneInvestments = [],\n  decisions = {},\n}) => {\n  return (\n    <Addition\n      startingValue={startingValue}\n      dataSources={[\n        {\n          title: `Chapter start`,\n          dataSource: preliminaryChanges({\n            initialInvestments: chapter3Investments,\n          }),\n        },\n        {\n          title: `Investments`,\n          dataSource: roundOneInvestments\n            .filter(({ chalice = 0 }) => chalice !== 0)\n            .map(({ name, chalice }) => {\n              return { label: name, values: [chalice] };\n            })\n            .sort(({ label: a }, { label: b }) => a.localeCompare(b)),\n        },\n        {\n          title: `Other changes`,\n          dataSource: roundOneChanges(decisions),\n        },\n      ]}\n    />\n  );\n};\n\nexport default Chalice;\n","import Ledger from '../../results/Ledger';\nimport { Card } from 'antd';\nimport Givini from './Givini';\nimport Takkan from './Takkan';\nimport Chalice from './Chalice';\n\nconst Result = ({\n  initialStandings,\n  nonInvestmentChanges,\n  investmentChanges,\n  decisions,\n}) => {\n  return (\n    <Card title={`Changes`} className=\"results\">\n      <Ledger\n        initialStandings={initialStandings}\n        nonInvestmentChanges={nonInvestmentChanges}\n        investmentChanges={investmentChanges}\n      />\n      <div>\n        <Card title={`New Givini`} type=\"inner\">\n          <Givini\n            chapter3Investments={initialStandings.investments}\n            roundOneInvestments={investmentChanges.investments}\n            decisions={decisions}\n          />\n        </Card>\n        <Card title={`Tak'Kan`} type=\"inner\">\n          <Takkan\n            roundOneInvestments={investmentChanges.investments}\n            decisions={decisions}\n          />\n        </Card>\n        <Card title={`Chalice States`} type=\"inner\">\n          <Chalice\n            chapter3Investments={initialStandings.investments}\n            roundOneInvestments={investmentChanges.investments}\n            decisions={decisions}\n          />\n        </Card>\n      </div>\n    </Card>\n  );\n};\n\nexport default Result;\n","import { useEffect, useRef } from 'react';\n\nconst ScrollTo = ({ children, data }) => {\n  const resultRef = useRef(null);\n  useEffect(() => {\n    if (!data || !resultRef.current) {\n      return;\n    }\n    resultRef.current.scrollIntoView({ behavior: 'smooth' });\n  }, [data, resultRef]);\n\n  if (!data) {\n    return null;\n  }\n\n  return <div ref={resultRef}>{children}</div>;\n};\n\nexport default ScrollTo;\n","import Form from './Form';\nimport Result from './results';\nimport {\n  baseValue as giviniBaseValue,\n  roundOneValue as giviniRoundOneValue,\n} from '../data/givini';\nimport { buildFinalStandings } from '../misc';\nimport {\n  baseValue as takkanBaseValue,\n  roundOneValue as takkanRoundOneValue,\n} from '../data/takkan';\nimport ScrollTo from '../results/ScrollTo';\nimport {\n  baseValue as chaliceBaseValue,\n  roundOneValue as chaliceRoundOneValue,\n} from '../data/chalice';\n\nconst socialRequirement = (\n  startingSocial,\n  { strategy, jhenno, merchantSolution }\n) => {\n  if (strategy === 'money') {\n    return 0;\n  }\n  if (merchantSolution === 'neutral') {\n    return 40 - startingSocial;\n  }\n  const base = strategy === 'compromise' ? 30 : 40;\n  const jhennoModifier = jhenno === 'politics' ? 1 : 0;\n  return base - (startingSocial + jhennoModifier);\n};\n\nconst giviniRequirement = ({ giviniStart, giviniExtra }) => {\n  const absoluteRequirement = 25;\n  const offset = 3; // Points earned after the requirement matters\n\n  return absoluteRequirement - giviniStart - giviniExtra + offset;\n};\n\nconst buildNonInvestmentsChange = ({ decisions, spending }) => {\n  const { jhenno } = decisions;\n\n  const nonInvestmentChangesList = [\n    jhenno === 'politics' && {\n      name: `Jhenno's political cooperation`,\n      social: 1,\n    },\n    {\n      name: `Succession crisis' reward (best result)`,\n      social: 3,\n    },\n    {\n      name: `The Three Trades become less profitable`,\n      profits: -300000,\n    },\n    !!spending && {\n      name: `Other spending`,\n      money: -spending,\n    },\n  ].filter(Boolean);\n\n  return {\n    givini: giviniRoundOneValue(decisions),\n    takkan: takkanRoundOneValue(decisions),\n    chalice: chaliceRoundOneValue(decisions),\n    money: nonInvestmentChangesList.reduce(\n      (acc, { money = 0 }) => acc + money,\n      0\n    ),\n    profits: nonInvestmentChangesList.reduce(\n      (acc, { profits = 0 }) => acc + profits,\n      0\n    ),\n    social: nonInvestmentChangesList.reduce(\n      (acc, { social = 0 }) => acc + social,\n      0\n    ),\n    list: nonInvestmentChangesList,\n  };\n};\n\nconst compute = async ({\n  runInWoker,\n  initialStandings,\n  decisions,\n  nonInvestmentChanges,\n  mandatory,\n  misc,\n  banned,\n}) => {\n  const giviniStart = initialStandings.givini;\n  const giviniExtra = nonInvestmentChanges.givini;\n\n  const params = {\n    ...misc,\n    previousInvestments: initialStandings.investments,\n    money:\n      initialStandings.money +\n      initialStandings.profits +\n      nonInvestmentChanges.money,\n    otherRequirements: {\n      social: socialRequirement(initialStandings.social, decisions),\n      givini: giviniRequirement({\n        giviniStart,\n        giviniExtra,\n      }),\n      mandatory,\n      atLeastOne:\n        decisions.strategy === 'succession'\n          ? ['War Monument', 'Givini Mage Guild']\n          : undefined,\n      banned,\n    },\n    giviniStart,\n    giviniExtra,\n  };\n\n  return runInWoker(params);\n};\n\nconst onFinish = async ({ values, setResult, runInWoker, setError }) => {\n  setError(undefined);\n\n  const {\n    previous = [],\n    remainingPron,\n    baseProfit,\n    startingSocial,\n\n    strategy,\n    merchantSolution,\n    jhenno,\n    magicalItems,\n    research,\n\n    mandatory,\n    banned,\n    spending,\n\n    chapter1Steel,\n    chapter3Infrastructure,\n    chapter1Bank,\n    chapter1x2Tower,\n    chapter3Armorer,\n    chapter3Tradesmasher,\n  } = values;\n\n  const initialStandings = {\n    money: remainingPron,\n    profits: baseProfit,\n    investments: previous,\n    social: startingSocial,\n    givini: giviniBaseValue({ chapter3Investments: previous }),\n    takkan: takkanBaseValue(),\n    chalice: chaliceBaseValue({ initialInvestments: previous }),\n  };\n\n  const decisions = {\n    strategy,\n    merchantSolution,\n    magicalItems,\n    research,\n    jhenno,\n  };\n\n  const misc = {\n    chapter1Steel,\n    chapter3Infrastructure,\n    chapter1Bank,\n    chapter1x2Tower,\n    chapter3Armorer,\n    chapter3Tradesmasher,\n  };\n\n  const nonInvestmentChanges = buildNonInvestmentsChange({\n    decisions,\n    spending,\n  });\n\n  const result = await compute({\n    runInWoker,\n    initialStandings,\n    decisions,\n    nonInvestmentChanges,\n    mandatory,\n    misc,\n    banned,\n  });\n\n  if (!result) {\n    setResult(undefined);\n    setError(\n      `Couldn't find a working combination of investments for that strategy with these starting values, sorry.`\n    );\n    return;\n  }\n\n  const investmentChanges = { ...result, money: -result.price };\n\n  setResult({\n    initialStandings,\n    decisions,\n    nonInvestmentChanges,\n    investmentChanges,\n    finalStandings: buildFinalStandings({\n      initialStandings,\n      nonInvestmentChanges,\n      investmentChanges,\n    }),\n    misc,\n  });\n  setError(undefined);\n};\n\nconst FirstRound = ({ runInWoker, loading, result, setResult, setError }) => {\n  return (\n    <div className=\"round-one\">\n      <Form\n        onFinish={(values) => {\n          onFinish({ values, setResult, runInWoker, setError });\n        }}\n        loading={loading}\n      />\n      <ScrollTo data={result}>\n        <Result {...result} />\n      </ScrollTo>\n    </div>\n  );\n};\n\nexport default FirstRound;\n","import { Alert, Typography } from 'antd';\n\nconst { Title } = Typography;\n\nconst Disclaimer = () => {\n  return (\n    <div className=\"disclaimer\">\n      <div className=\"preamble\">\n        <Title>{`Investment Advisor`}</Title>\n        <p>\n          {`A tool to help you choose the best theoretical best possible investments for chapter 4 of `}\n          <a href=\"https://the-last-sovereign.blogspot.com/\">{`The Last Sovereign`}</a>\n          {`.`}\n        </p>\n        <p>{`Just fill in the requested information, choose your strategy and let a quasi-brute force algorithm determine what's best for you (assuming a definition of best here as highest short term returns, then lowest price, while still fulfilling the requirements of your strategy).`}</p>\n        <p>\n          {`This is definetely an advanced tool, intended for people who are already familiar with the game's `}\n          <a href=\"https://thelastsovereign.miraheze.org/wiki/Secret_stats\">\n            {`inner workings`}\n          </a>\n          {`, with the awesome `}\n\n          <a href=\"https://thelastsovereign.flarum.cloud/d/15-calculator\">{`Calculator`}</a>\n          {`, and are now looking for the last lousy optimizations they might have missed.`}\n        </p>\n      </div>\n      <Alert\n        message={`Assumptions`}\n        description={\n          <>\n            <p>\n              <a href=\"https://www.patreon.com/posts/demographics-8851324\">{`About 85% of players have only ever played TLS with Reshaped Varia.`}</a>\n            </p>\n            <p>{`That means if I was to write a walkthrough for TLS that only covered a \"Reshaped Varia\" strategy, it'll still be usable by 85% of players. Of course, I will have to release a \"Dominated Varia\" variant eventually to account for the remaining 15%. But in the meantime, that's already 85% of people that can start playing with my walkthrough without waiting any further. Meanwhile, if I had tried to cover both cases from the start, 100% of people would have had to wait.`}</p>\n            <p>{`While I'm writing a software and not a walkthrough here, it will play by the same logic: Focus first on the \"general case\", by making a few (many) assumptions that hopefully will be true of most \"good\" saves, so to be able to release it to the public early. Then slowly cover the other cases in subsequent updates.`}</p>\n            <p>{`Therefore, at the moment, this tool takes for granted that:`}</p>\n            <ol>\n              <li>{`The Iron Cudgel was hired (in either chapter 1 or 2).`}</li>\n              <li>{`Through chapter 2, the AriGarda was bribed, the Merchant's Guild joined, and the Ardan Bank invested into.`}</li>\n              <li>{`The three unique Trades (New Givini, Tak'Kan and Chalice States) were bought at the end of chapter 3.`}</li>\n              <li>{`Chapter 3 in general was good enough for Yhilin to reach its final state during the first investment phase of Chapter 4.`}</li>\n              <li>{`Chapter 3 in general and the war in particular were good enough for all petitions favorable to Givini to appear.`}</li>\n              <li>{`All such petitions were approved.`}</li>\n            </ol>\n            <p>{`Note that the final version of the advisor will likely still have a few assumptions in it, so as to keep the complexity in check. Namely, \"disaster runs\" will never be covered.`}</p>\n            <p>{`tl;dr The Advisor is currently in early access.`}</p>\n          </>\n        }\n        type=\"info\"\n        showIcon={true}\n        className=\"assumptions\"\n        closable={true}\n      />\n    </div>\n  );\n};\n\nexport default Disclaimer;\n","import { Progress, Divider, Modal, Button } from 'antd';\nimport { PoweroffOutlined } from '@ant-design/icons';\n\nconst Loading = ({\n  combinationsCount,\n  progress,\n  investmentsCount,\n  preprogress,\n  abort,\n}) => {\n  if (!investmentsCount) {\n    return null;\n  }\n\n  return (\n    <Modal visible={true} centered={true} closable={false} footer={null}>\n      <div>\n        <p>\n          {`Prefiltering ${(2 ** investmentsCount).toLocaleString('en-US')} (2`}\n          <sup>{investmentsCount}</sup>\n          {`) possibilities…`}\n        </p>\n        <Progress percent={Math.round(preprogress * 100)} />\n      </div>\n      {!!combinationsCount && (\n        <>\n          <Divider />\n          <div>\n            <p>{`Processing ${combinationsCount.toLocaleString(\n              'en-US'\n            )} remaining possibilities…`}</p>\n            <Progress percent={Math.round(progress * 10000) / 100} />\n          </div>\n        </>\n      )}\n      <Button\n        danger={true}\n        icon={<PoweroffOutlined />}\n        onClick={abort}\n        className=\"abort-button\"\n      >{`Abort`}</Button>\n    </Modal>\n  );\n};\n\nexport default Loading;\n","import { Result, Card } from 'antd';\n\nconst Failure = ({ message }) => {\n  return (\n    <Card>\n      <Result status=\"warning\" title={message} />\n    </Card>\n  );\n};\n\nexport default Failure;\n","import { Table } from 'antd';\nimport { nF } from '../misc';\n\nconst base = [\n  {\n    key: `Tower Little Girl talk`,\n    magic: 1,\n    military: 0,\n    price: 0,\n  },\n  {\n    key: `Deluxe Givini Dragon Statue`,\n    magic: 1,\n    military: 0,\n    price: 5000,\n  },\n  {\n    key: `HQ Shrine`,\n    magic: 1,\n    military: 0,\n    price: 5000,\n  },\n  {\n    key: `Orc Lab Upgrade`,\n    magic: 2,\n    military: 5,\n    price: 25000,\n  },\n  {\n    key: `Magical Shielding Upgrade`,\n    magic: 5,\n    military: 0,\n    price: 100000,\n  },\n];\n\nconst defense = [\n  {\n    key: `Research: Base Defense`,\n    military: 5,\n    magic: 10,\n    price: 0,\n  },\n];\n\nconst subsitute = [\n  {\n    key: `Wynn's Shield Upgrade`,\n    magic: 5,\n    military: 0,\n    price: 100000,\n  },\n  {\n    key: `Extradimensional Foundation`,\n    magic: 5,\n    military: 5,\n    price: 225000,\n  },\n];\n\nconst plusTenMilitary = [\n  {\n    key: `Armory Upgrade`,\n    military: 5,\n    magic: 0,\n    price: 10000,\n  },\n  {\n    key: `Orc Guard Posts`,\n    military: 3,\n    magic: 0,\n    price: 5000,\n  },\n  {\n    key: `Supplies Upgrade`,\n    military: 2,\n    magic: 0,\n    price: 10000,\n  },\n];\n\nconst plusFifteenMilitary = [\n  {\n    key: `Armory Upgrade`,\n    military: 5,\n    magic: 0,\n    price: 10000,\n  },\n  {\n    key: `Orc Guard Posts`,\n    military: 3,\n    magic: 0,\n    price: 5000,\n  },\n  {\n    key: `Second Well`,\n    military: 3,\n    magic: 0,\n    price: 10000,\n  },\n  {\n    key: `Iron Cudgel`,\n    military: 4,\n    magic: 0,\n    price: 15000,\n  },\n];\n\nconst renderPlus = (number) => `+${number}`;\n\nconst columns = [\n  {\n    title: `Upgrade`,\n    dataIndex: 'key',\n  },\n  {\n    title: `Price`,\n    dataIndex: 'price',\n    render: (number) => nF(number),\n    sorter: (a, b) => a.price - b.price,\n  },\n  {\n    title: `Military`,\n    dataIndex: 'military',\n    render: renderPlus,\n    sorter: (a, b) => a.military - b.military,\n  },\n  {\n    title: `Magic`,\n    dataIndex: 'magic',\n    render: renderPlus,\n    sorter: (a, b) => a.magic - b.magic,\n  },\n];\n\nconst dataSource = ({ research, military, magic }) => {\n  if (research === 'defense') {\n    if (military <= 10 && magic === 20) {\n      return [...defense, ...base];\n    }\n\n    if (military === 20 && magic <= 10) {\n      return [...defense, ...plusFifteenMilitary];\n    }\n\n    if (military === 20 && magic === 20) {\n      return [...defense, ...base, ...plusTenMilitary];\n    }\n  }\n\n  if (military <= 10 && magic === 20) {\n    return [...base, ...subsitute];\n  }\n\n  if (military === 20 && magic <= 10) {\n    return [...base, ...plusFifteenMilitary];\n  }\n\n  if (military === 20 && magic === 20) {\n    return [...base, ...subsitute, ...plusTenMilitary];\n  }\n\n  throw new Error('Unsupported');\n};\nconst sum = (list, key) => list.reduce((acc, data) => acc + data[key], 0);\n\nexport const price = (params) => sum(dataSource(params), 'price');\n\nconst Headquarters = ({ research, military, magic }) => {\n  const source = dataSource({ research, military, magic });\n\n  return (\n    <div className=\"headquarters-upgrades\">\n      <Table\n        dataSource={source}\n        columns={columns}\n        pagination={false}\n        summary={() => {\n          return (\n            <Table.Summary.Row>\n              <Table.Summary.Cell>{`Total`}</Table.Summary.Cell>\n              <Table.Summary.Cell>\n                {nF(sum(source, 'price'))}\n              </Table.Summary.Cell>\n              <Table.Summary.Cell>{sum(source, 'military')}</Table.Summary.Cell>\n              <Table.Summary.Cell>{sum(source, 'magic')}</Table.Summary.Cell>\n            </Table.Summary.Row>\n          );\n        }}\n      />\n    </div>\n  );\n};\n\nexport default Headquarters;\n","import { useState, useEffect } from 'react';\nimport { Form, Button, Card, Select } from 'antd';\nimport Headquarters, { price as headquartersPrice } from './Headquarters';\nimport { nF } from '../misc';\nimport Banned from '../components/form/Banned';\nimport Mandatory from '../components/form/Mandatory';\nimport Extra from '../components/form/Extra';\n\nconst initialValues = {\n  merchantSolution2: 'neutral',\n  headquarters: '20/10',\n  orcCouncil: 0.8,\n  mandatory: [],\n  banned: [],\n  spending: 0,\n};\n\nconst CustomForm = ({\n  onFinish,\n  loading,\n  firstRoundDecisions,\n  purchasedInvestments,\n}) => {\n  const [form] = Form.useForm();\n\n  const [hq, setHq] = useState(initialValues.headquarters);\n  const [military, magic] = hq.split('/').map((x) => parseInt(x));\n  const [mandatory, setMandatory] = useState(initialValues.mandatory);\n\n  const previousResearch = firstRoundDecisions.research;\n  useEffect(() => {\n    form.setFieldsValue({\n      research: previousResearch === 'purity' ? 'orc' : 'purity',\n    });\n  }, [form, previousResearch]);\n\n  return (\n    <Form\n      initialValues={initialValues}\n      onFinish={onFinish}\n      className=\"round-form second-round-form\"\n      form={form}\n      onValuesChange={(_, allValues) => {\n        setHq(allValues.headquarters);\n        setMandatory(allValues.mandatory);\n      }}\n    >\n      <Card title={`Stategy`} type=\"inner\">\n        <div className=\"two-columns\">\n          <div>\n            {firstRoundDecisions.merchantSolution === 'wait' && (\n              <Form.Item label={`Merchant dispute`} name=\"merchantSolution2\">\n                <Select\n                  options={[\n                    {\n                      value: 'neutral',\n                      label: `Neutral compromise (force Social ≥ 40)`,\n                    },\n                    {\n                      value: 'givini',\n                      label: `Favor New Givini`,\n                    },\n                    {\n                      value: 'wait',\n                      label: `Wait`,\n                    },\n                  ]}\n                />\n              </Form.Item>\n            )}\n            <Form.Item name=\"orcCouncil\" label={`Orc council`}>\n              <Select\n                options={[\n                  {\n                    label: `Substantial majority (≥ 65%)`,\n                    value: 0.65,\n                  },\n                  {\n                    label: `Overwhelming majority (≥ 80%)`,\n                    value: 0.8,\n                  },\n                ]}\n              />\n            </Form.Item>\n            <Form.Item name=\"headquarters\" label={`Headquarters`}>\n              <Select\n                options={[\n                  {\n                    label: `Pay ${nF(\n                      headquartersPrice({\n                        research: previousResearch,\n                        military: 20,\n                        magic: 10,\n                      })\n                    )} ProN for Military ≥ 20, Magic ≥ 10.`,\n                    value: '20/10',\n                  },\n                  {\n                    label: `Pay ${nF(\n                      headquartersPrice({\n                        research: previousResearch,\n                        military: 5,\n                        magic: 20,\n                      })\n                    )} ProN for Military ≥ 5, Magic ≥ 20.`,\n                    value: '5/20',\n                  },\n                  {\n                    label: `Pay ${nF(\n                      headquartersPrice({\n                        research: previousResearch,\n                        military: 20,\n                        magic: 20,\n                      })\n                    )} ProN for Military ≥ 20, Magic ≥ 20.`,\n                    value: '20/20',\n                  },\n                ]}\n              />\n            </Form.Item>\n            <Form.Item label={`Research`} name=\"research\">\n              <Select\n                options={[\n                  {\n                    value: 'orc',\n                    label: `Orc Diversification`,\n                  },\n                  {\n                    value: 'unpeople',\n                    label: `Unpeople Transformation`,\n                  },\n                  {\n                    value: 'purity',\n                    label: `Purity Magic`,\n                  },\n                  {\n                    value: 'defense',\n                    label: `Base Defense`,\n                  },\n                ].filter(({ value }) => value !== previousResearch)}\n              />\n            </Form.Item>\n            <Mandatory\n              label={`Investments you explicitly want to buy now (example: Airships)`}\n              form={form}\n              purchased={purchasedInvestments}\n            />\n            <Banned\n              purchased={[...purchasedInvestments, ...mandatory]}\n              form={form}\n            />\n            <Extra />\n          </div>\n          <Headquarters\n            research={previousResearch}\n            military={military}\n            magic={magic}\n          />\n        </div>\n\n        <Form.Item>\n          <Button type=\"primary\" htmlType=\"submit\" loading={loading}>\n            {`Submit`}\n          </Button>\n        </Form.Item>\n      </Card>\n    </Form>\n  );\n};\n\nexport default CustomForm;\n","import Addition from '../../results/Addition';\nimport { roundTwoChanges } from '../../data/givini';\n\nconst Givini = ({\n  startingValue,\n  roundTwoInvestments = [],\n  decisions = {},\n}) => {\n  return (\n    <Addition\n      startingValue={startingValue}\n      dataSources={[\n        {\n          title: `Investments`,\n          dataSource: roundTwoInvestments\n            .filter(({ givini = 0 }) => givini !== 0)\n            .map(({ name, givini }) => {\n              return { label: name, values: [givini] };\n            })\n            .sort(({ label: a }, { label: b }) => a.localeCompare(b)),\n        },\n        {\n          title: `Other changes`,\n          dataSource: roundTwoChanges(decisions),\n        },\n      ]}\n    />\n  );\n};\n\nexport default Givini;\n","import Addition from '../../results/Addition';\nimport { roundTwoChanges, council } from '../../data/takkan';\nimport { Typography } from 'antd';\n\nconst { Text } = Typography;\n\nconst Takkan = ({\n  startingValue,\n  roundTwoInvestments = [],\n  decisions = {},\n  roundOneResearch,\n  previousInvestments = [],\n  takkanScore,\n}) => {\n  const councilResult = council({\n    researches: [roundOneResearch],\n    investments: [\n      ...previousInvestments,\n      ...roundTwoInvestments.map(({ name }) => name),\n    ],\n    takkan: takkanScore,\n  });\n\n  return (\n    <>\n      <Addition\n        startingValue={startingValue}\n        dataSources={[\n          {\n            title: `Investments`,\n            dataSource: roundTwoInvestments\n              .filter(({ takkan = 0 }) => takkan !== 0)\n              .map(({ name, takkan }) => {\n                return { label: name, values: [takkan] };\n              })\n              .sort(({ label: a }, { label: b }) => a.localeCompare(b)),\n          },\n          {\n            title: `Other changes`,\n            dataSource: roundTwoChanges(decisions),\n          },\n        ]}\n      />\n      <Text>\n        {`Orc council: `}\n        <Text type={councilResult >= 0.8 ? 'success' : 'warning'}>\n          {(councilResult * 100).toFixed(2)}\n          {`%`}\n        </Text>\n      </Text>\n    </>\n  );\n};\n\nexport default Takkan;\n","import Addition from '../../results/Addition';\nimport { roundTwoChanges } from '../../data/chalice';\n\nconst Chalice = ({\n  startingValue,\n  roundTwoInvestments = [],\n  decisions = {},\n}) => {\n  return (\n    <Addition\n      startingValue={startingValue}\n      dataSources={[\n        {\n          title: `Investments`,\n          dataSource: roundTwoInvestments\n            .filter(({ chalice = 0 }) => chalice !== 0)\n            .map(({ name, chalice }) => {\n              return { label: name, values: [chalice] };\n            })\n            .sort(({ label: a }, { label: b }) => a.localeCompare(b)),\n        },\n        {\n          title: `Other changes`,\n          dataSource: roundTwoChanges(decisions),\n        },\n      ]}\n    />\n  );\n};\n\nexport default Chalice;\n","import Ledger from '../../results/Ledger';\nimport { Card } from 'antd';\nimport Givini from './Givini';\nimport Takkan from './Takkan';\nimport Chalice from './Chalice';\n\nconst Result = ({\n  initialStandings,\n  nonInvestmentChanges,\n  investmentChanges,\n  decisions,\n  roundOneDecisions,\n}) => {\n  return (\n    <Card title={`Changes`} className=\"results\">\n      <Ledger\n        initialStandings={initialStandings}\n        nonInvestmentChanges={nonInvestmentChanges}\n        investmentChanges={investmentChanges}\n      />\n      <div>\n        <Card title={`New Givini`} type=\"inner\">\n          <Givini\n            startingValue={initialStandings.givini}\n            roundTwoInvestments={investmentChanges.investments}\n            decisions={decisions}\n          />\n        </Card>\n        <Card title={`Tak'Kan`} type=\"inner\">\n          <Takkan\n            startingValue={initialStandings.takkan}\n            roundTwoInvestments={investmentChanges.investments}\n            decisions={decisions}\n            takkanScore={initialStandings.takkan + investmentChanges.takkan}\n            roundOneResearch={roundOneDecisions.research}\n            previousInvestments={initialStandings.investments}\n          />\n        </Card>\n        <Card title={`Chalice States`} type=\"inner\">\n          <Chalice\n            startingValue={initialStandings.chalice}\n            roundTwoInvestments={investmentChanges.investments}\n            decisions={decisions}\n          />\n        </Card>\n      </div>\n    </Card>\n  );\n};\n\nexport default Result;\n","import Form from './Form';\nimport { buildFinalStandings } from '../misc';\nimport Result from './results';\nimport { roundTwoValue as giviniRoundTwoValue } from '../data/givini';\nimport { price as headquartersPrice } from './Headquarters';\nimport { roundTwoValue as takkanRoundTwoValue } from '../data/takkan';\nimport { Typography } from 'antd';\nimport ScrollTo from '../results/ScrollTo';\nimport { roundTwoValue as chaliceRoundTwoValue } from '../data/chalice';\n\nconst { Title } = Typography;\n\nconst socialRequirement = (initialSocial, decisions) => {\n  if (decisions.merchantSolution2 === 'neutral' && initialSocial < 40) {\n    return 40 - initialSocial;\n  }\n\n  return 0;\n};\n\nconst onFinish = async ({\n  setResult,\n  runInWoker,\n  setError,\n  firstRoundResult,\n  values,\n}) => {\n  const { finalStandings: initialStandings, misc } = firstRoundResult;\n\n  const {\n    merchantSolution2,\n    headquarters,\n    orcCouncil,\n    mandatory,\n    banned,\n    research,\n    spending,\n  } = values;\n  const decisions = { merchantSolution2, headquarters, orcCouncil, research };\n\n  const [military, magic] = decisions.headquarters\n    .split('/')\n    .map((x) => parseInt(x));\n  const headquartersUpgradesPrice = headquartersPrice({\n    research: firstRoundResult.decisions.research,\n    military,\n    magic,\n  });\n\n  const pronNote = 2500;\n\n  const nonInvestmentChangesList = [\n    {\n      name: `Headquarters upgrades`,\n      money: -headquartersUpgradesPrice,\n    },\n    !!spending && {\n      name: `Other spending`,\n      money: -spending,\n    },\n    {\n      name: `Tower's chest ProN note`,\n      money: pronNote,\n    },\n  ].filter(Boolean);\n\n  const nonInvestmentChanges = {\n    money: nonInvestmentChangesList.reduce(\n      (acc, { money = 0 }) => acc + money,\n      0\n    ),\n    profits: 0,\n    social: 0,\n    givini: giviniRoundTwoValue(decisions),\n    takkan: takkanRoundTwoValue(decisions),\n    chalice: chaliceRoundTwoValue(decisions),\n    list: nonInvestmentChangesList,\n  };\n\n  const params = {\n    ...misc,\n    previousInvestments: initialStandings.investments,\n    money:\n      initialStandings.money +\n      initialStandings.profits +\n      (nonInvestmentChanges.money - pronNote),\n    giviniStart: initialStandings.givini,\n    giviniExtra: nonInvestmentChanges.givini,\n    takkan: initialStandings.takkan,\n    completedResearch: [firstRoundResult.decisions.research],\n    otherRequirements: {\n      social: socialRequirement(initialStandings.social, decisions),\n      orcCouncil: decisions.orcCouncil,\n      mandatory,\n      banned,\n    },\n  };\n\n  const result = await runInWoker(params);\n\n  if (!result) {\n    setResult(undefined);\n    setError(\n      `Couldn't find a working combination of investments for that strategy with these starting values, sorry.`\n    );\n    return;\n  }\n\n  const investmentChanges = { ...result, money: -result.price };\n\n  setResult({\n    initialStandings,\n    decisions,\n    nonInvestmentChanges,\n    investmentChanges,\n    finalStandings: buildFinalStandings({\n      initialStandings,\n      nonInvestmentChanges,\n      investmentChanges,\n    }),\n    misc,\n  });\n  setError(undefined);\n};\n\nconst SecondRound = ({\n  runInWoker,\n  loading,\n  result,\n  setResult,\n  setError,\n  firstRoundResult,\n}) => {\n  return (\n    <div className=\"round-two\">\n      <Title level={2}>{`Chapter 4 – Round 2`}</Title>\n      <Form\n        onFinish={(values) => {\n          onFinish({\n            setResult,\n            runInWoker,\n            setError,\n            firstRoundResult,\n            values,\n          });\n        }}\n        loading={loading}\n        firstRoundDecisions={firstRoundResult.decisions}\n        purchasedInvestments={firstRoundResult.finalStandings.investments}\n      />\n      <ScrollTo data={result}>\n        <Result roundOneDecisions={firstRoundResult.decisions} {...result} />\n      </ScrollTo>\n    </div>\n  );\n};\n\nexport default SecondRound;\n","import { useEffect, useState } from 'react';\nimport {\n  Form,\n  Card,\n  Radio,\n  Select,\n  Button,\n  Alert,\n  InputNumber,\n  Divider,\n} from 'antd';\nimport preGawnfallInvestments, {\n  postGawnfallInvestments,\n} from '../data/investments';\nimport Mandatory from '../components/form/Mandatory';\nimport Banned from '../components/form/Banned';\nimport { nF } from '../misc';\nimport Extra from '../components/form/Extra';\n\nconst initialValues = {\n  mandatory1: [],\n  yelarel: 'min',\n  gawnfallTakkan: 'major',\n  gawnfallMercantile: 'excellent',\n  gawnfallArdford: 'resolved',\n  gawnfallMother: 'full_unlock',\n  vera: true,\n  merchantSolution3: 'neutral',\n  mandatory: [],\n  banned: [],\n  gawnfallHigh: 'herin_overwhelming',\n  reserves: 5000000 + 125000 + 250000,\n  extra_reserves: 0,\n  spending: 0,\n};\n\nconst CustomForm = ({\n  previousInvestments,\n  previousResearch,\n  onFinish,\n  loading,\n  merchantSolution,\n}) => {\n  const [form] = Form.useForm();\n  const [mandatory1, setMandatory1] = useState(initialValues.mandatory1);\n  const [mandatory, setMandatory] = useState(initialValues.mandatory);\n  const [lockedInvestments, setLockedInvestments] = useState([]);\n\n  const availableResearch = [\n    {\n      value: 'orc',\n      label: `Orc Diversification`,\n    },\n    {\n      value: 'unpeople',\n      label: `Unpeople Transformation`,\n    },\n    {\n      value: 'purity',\n      label: `Purity Magic`,\n    },\n    {\n      value: 'defense',\n      label: `Base Defense`,\n    },\n  ].filter(({ value }) => !previousResearch.includes(value));\n  useEffect(() => {\n    form.setFieldsValue({\n      research: availableResearch[0]['value'],\n    });\n  }, [form, availableResearch]);\n\n  return (\n    <Form\n      initialValues={initialValues}\n      className=\"round-form third-round-form\"\n      form={form}\n      onFinish={onFinish}\n      onValuesChange={(_, allValues) => {\n        setMandatory1(allValues.mandatory1);\n        setMandatory(allValues.mandatory);\n        setLockedInvestments(\n          postGawnfallInvestments\n            .filter(({ name, price }) => {\n              if (previousInvestments.includes(name)) {\n                return false;\n              }\n              if (typeof price !== 'function') {\n                return false;\n              }\n              return price(allValues) === Infinity;\n            })\n            .map(({ name }) => name)\n        );\n      }}\n    >\n      <Card title={`Gawnfall`} type=\"inner\" className=\"gawnfall\">\n        <div className=\"two-columns\">\n          <Card title={`Strategy`} type=\"inner\">\n            {!merchantSolution && (\n              <Form.Item label={`Merchant dispute`} name=\"merchantSolution3\">\n                <Select\n                  options={[\n                    {\n                      value: 'neutral',\n                      label: `Neutral compromise (force Social ≥ 40)`,\n                    },\n                    {\n                      value: 'givini',\n                      label: `Favor New Givini`,\n                    },\n                    {\n                      value: 'wait',\n                      label: `Wait`,\n                    },\n                  ]}\n                />\n              </Form.Item>\n            )}\n            <Form.Item label={`Research`} name=\"research\">\n              <Select options={availableResearch} />\n            </Form.Item>\n            {!previousInvestments.includes('Lustlord Temples') && (\n              <Form.Item label={`Yelarel-related investments`} name=\"yelarel\">\n                <Select\n                  options={[\n                    {\n                      value: 'none',\n                      label: `Don't invest in the Lustlord cult`,\n                    },\n                    {\n                      value: 'min',\n                      label: `Pay ${nF(50000)} ProN for New Lustlord Statues`,\n                    },\n                    {\n                      value: 'max',\n                      label: `Invest a total of ${nF(\n                        800000\n                      )} ProN in the Lustlord Temples`,\n                    },\n                  ]}\n                />\n              </Form.Item>\n            )}\n            <Form.Item\n              label={`Buy the Goddess of Magic Statue for ${nF(10000)} ProN?`}\n              name=\"vera\"\n            >\n              <Radio.Group\n                options={[\n                  {\n                    value: true,\n                    label: `Yes`,\n                  },\n                  {\n                    value: false,\n                    label: `No`,\n                  },\n                ]}\n              />\n            </Form.Item>\n            <Form.Item\n              label={`Other investments you wish to do before the Council (example: Givini Tunnels)`}\n              name=\"mandatory1\"\n            >\n              <Select\n                options={preGawnfallInvestments\n                  .filter(\n                    ({ name }) =>\n                      !previousInvestments.includes(name) &&\n                      'Lustlord Temples' !== name &&\n                      // FIXME: Removing investments whose price can change from the list for now\n                      // Should be handled for real later\n                      ![\n                        'Denmiel Archives',\n                        \"Tarran'Kan Housing + Tarran'Kan Trade Upgrade\",\n                      ].includes(name)\n                  )\n                  .map(({ name }) => {\n                    return { label: name, value: name };\n                  })}\n                mode=\"multiple\"\n              />\n            </Form.Item>\n          </Card>\n          <Card title={`Investments-related results`} type=\"inner\">\n            <Alert\n              message={`Only the Succubi Accepted path is supported as of now.`}\n              type=\"info\"\n              showIcon\n            />\n            <Form.Item label={`Support for Tak'Kan`} name=\"gawnfallTakkan\">\n              <Select\n                options={[\n                  {\n                    value: 'major',\n                    label: `Major`,\n                  },\n                  {\n                    value: 'minor',\n                    label: `Minor`,\n                  },\n                  {\n                    value: 'none',\n                    label: `None`,\n                  },\n                ]}\n              />\n            </Form.Item>\n            <Form.Item label={`Promotion vote`} name=\"gawnfallHigh\">\n              <Select\n                options={[\n                  {\n                    value: 'herin_overwhelming',\n                    label: `Overwhelming victory for Herin`,\n                  },\n                  {\n                    value: 'herin_promoted',\n                    label: `Herin promoted`,\n                  },\n                  {\n                    value: 'kaskia_promoted',\n                    label: `Kaskia promoted`,\n                  },\n                  {\n                    value: 'kaskia_overwhelming',\n                    label: `Overwhelming victory for Kaskia`,\n                  },\n                ]}\n              />\n            </Form.Item>\n            <Form.Item\n              label={`Mercantile issue resolution`}\n              name=\"gawnfallMercantile\"\n            >\n              <Select\n                options={[\n                  {\n                    value: 'excellent',\n                    label: `Excellent`,\n                  },\n                  {\n                    value: 'good',\n                    label: `Good`,\n                  },\n                  {\n                    value: 'fair',\n                    label: `Fair`,\n                  },\n                  {\n                    value: 'poor',\n                    label: `Poor`,\n                  },\n                ]}\n              />\n            </Form.Item>\n            <Form.Item label={`Ardford's ban`} name=\"gawnfallArdford\">\n              <Select\n                options={[\n                  {\n                    value: 'overkill',\n                    label: `Lifted, with an extra bit of acceptance`,\n                  },\n                  {\n                    value: 'resolved',\n                    label: `Lifted`,\n                  },\n                  {\n                    value: 'unresolved',\n                    label: `Unsolved`,\n                  },\n                ]}\n              />\n            </Form.Item>\n            <Form.Item label={`Mother's Guard`} name=\"gawnfallMother\">\n              <Select\n                options={[\n                  {\n                    value: 'full_unlock',\n                    label: `Crushed`,\n                  },\n                  {\n                    value: 'partial_unlock',\n                    label: `Dealt with`,\n                  },\n                  {\n                    value: 'locked',\n                    label: `Unrestrained`,\n                  },\n                ]}\n              />\n            </Form.Item>\n          </Card>\n        </div>\n      </Card>\n      <Card title={`Post Gawnfall`} type=\"inner\">\n        <div className=\"reserves\">\n          <Form.Item\n            label={`Keep enough cash in reserve, if need be, to:`}\n            name=\"reserves\"\n          >\n            <Select\n              options={[\n                {\n                  label: `Open the ruins after the war`,\n                  value: 0,\n                },\n                {\n                  label: `Open the ruins before the war (${nF(5000000)} ProN)`,\n                  value: 5000000,\n                },\n                {\n                  label: `Open the ruins and buy everything but the Smithing in Kyangan (${nF(\n                    5000000 + 125000\n                  )} ProN)`,\n                  value: 5000000 + 125000,\n                },\n                {\n                  label: `Open the ruins and buy everything in Kyangan (${nF(\n                    5000000 + 125000 + 250000\n                  )} ProN)`,\n                  value: 5000000 + 125000 + 250000,\n                },\n              ]}\n            />\n          </Form.Item>\n          <Form.Item\n            label={`Also make sure to have the additional amount available`}\n            name=\"extra_reserves\"\n            tooltip={\n              <>\n                {`For extra expanses not covered in the previous option.`}\n                <br />\n                {`For example, if you also plan to buy Armory Upgrade and Entity's Shield Upgrade before the war, enter their total cost i.e. 260000.`}\n              </>\n            }\n          >\n            <InputNumber />\n          </Form.Item>\n        </div>\n        <Divider />\n        <Mandatory\n          form={form}\n          purchased={[\n            ...previousInvestments,\n            ...mandatory1,\n            ...lockedInvestments,\n          ]}\n          list=\"gawnfall\"\n        />\n        <Banned\n          form={form}\n          purchased={[\n            ...previousInvestments,\n            ...mandatory1,\n            ...mandatory,\n            ...lockedInvestments,\n          ]}\n          list=\"gawnfall\"\n        />\n        <Extra />\n      </Card>\n      <Form.Item>\n        <Button type=\"primary\" htmlType=\"submit\" loading={loading}>\n          {`Submit`}\n        </Button>\n      </Form.Item>\n    </Form>\n  );\n};\n\nexport default CustomForm;\n","import Ledger from '../results/Ledger';\nimport { Card } from 'antd';\nimport Addition from '../results/Addition';\nimport { roundThreeChanges as giviniRoundThreeChanges } from '../data/givini';\nimport { roundThreeChanges as takkanRoundThreeChanges } from '../data/takkan';\nimport { roundThreeChanges as chaliceRoundThreeChanges } from '../data/chalice';\n\nconst filterInvestmentsByCountry = (investments, country) => {\n  return investments\n    .filter((inv) => !!inv[country])\n    .map((inv) => {\n      return { label: inv['name'], values: [inv[country]] };\n    })\n    .sort(({ label: a }, { label: b }) => a.localeCompare(b));\n};\n\nconst Result = ({\n  initialStandings,\n  nonInvestmentChanges,\n  investmentChanges,\n  decisions,\n}) => {\n  const investments = investmentChanges.investments;\n\n  return (\n    <Card title={`Changes`} className=\"results\">\n      <Ledger\n        initialStandings={initialStandings}\n        nonInvestmentChanges={nonInvestmentChanges}\n        investmentChanges={investmentChanges}\n      />\n      <div>\n        <Card title={`New Givini`} type=\"inner\">\n          <Addition\n            startingValue={initialStandings.givini}\n            dataSources={[\n              {\n                title: `Investments`,\n                dataSource: filterInvestmentsByCountry(investments, 'givini'),\n              },\n              {\n                title: `Other changes`,\n                dataSource: giviniRoundThreeChanges(decisions),\n              },\n            ]}\n          />\n        </Card>\n        <Card title={`Tak'Kan`} type=\"inner\">\n          <Addition\n            startingValue={initialStandings.takkan}\n            dataSources={[\n              {\n                title: `Investments`,\n                dataSource: filterInvestmentsByCountry(investments, 'takkan'),\n              },\n              {\n                title: `Other changes`,\n                dataSource: takkanRoundThreeChanges(decisions),\n              },\n            ]}\n          />\n        </Card>\n        <Card title={`Chalice States`} type=\"inner\">\n          <Addition\n            startingValue={initialStandings.chalice}\n            dataSources={[\n              {\n                title: `Investments`,\n                dataSource: filterInvestmentsByCountry(investments, 'chalice'),\n              },\n              {\n                title: `Other changes`,\n                dataSource: chaliceRoundThreeChanges(decisions),\n              },\n            ]}\n          />\n        </Card>\n      </div>\n    </Card>\n  );\n};\n\nexport default Result;\n","import Form from './Form';\nimport { Typography } from 'antd';\nimport { buildFinalStandings } from '../misc';\nimport Result from './Result';\nimport ScrollTo from '../results/ScrollTo';\nimport { roundThreeValue as giviniRoundThreeValue } from '../data/givini';\nimport { roundThreeValue as takkanRoundThreeValue } from '../data/takkan';\nimport investmentsList from '../data/investments';\nimport { roundThreeValue as chaliceRoundThreeValue } from '../data/chalice';\n\nconst { Title } = Typography;\n\nconst gawnfallSocial = ({ gawnfallMother, gawnfallHigh }) => {\n  let social = 0;\n\n  if (gawnfallMother === 'full_unlock') {\n    social += 2;\n  }\n  if (gawnfallMother === 'partial_unlock') {\n    social += 1;\n  }\n  if (gawnfallHigh === 'herin_overwhelming') {\n    social += 1;\n  }\n  if (gawnfallHigh === 'kaskia_overwhelming') {\n    social -= 1;\n  }\n\n  return social;\n};\n\nconst ardfordOpen = (decisions) =>\n  ['resolved', 'overkill'].includes(decisions.gawnfallArdford);\n\nconst preInvestmentsOrii = ({ decisions, initialStandings }) => {\n  return (\n    ardfordOpen(decisions) &&\n    initialStandings.investments.includes('Ardford Restaurant') &&\n    initialStandings.investments.includes('Givini Teahouse Chain')\n  );\n};\n\nconst preInvestmentsTradesmasher = ({ decisions, initialStandings }) => {\n  return (\n    initialStandings.investments.includes(\"Tradesmasher's Guild\") &&\n    decisions.gawnfallTakkan === 'major'\n  );\n};\n\nconst pastInvestmentsUpdate = ({\n  decisions,\n  initialStandings,\n  investmentChanges,\n}) => {\n  let total = 0;\n  if (preInvestmentsOrii({ decisions, initialStandings })) {\n    total += 15000;\n  }\n  if (preInvestmentsTradesmasher({ decisions, initialStandings })) {\n    const tradesmasherProfits = investmentsList.find(\n      ({ name }) => name === \"Tradesmasher's Guild\"\n    ).profits;\n    total +=\n      tradesmasherProfits({\n        investments: investmentChanges.investments,\n        previousInvestments: initialStandings.investments,\n        gawnfallTakkan: 'major',\n      }) -\n      tradesmasherProfits({\n        investments: investmentChanges.investments,\n        previousInvestments: initialStandings.investments,\n      });\n  }\n\n  return total;\n};\n\nconst projectedPastInvestmentsUpdate = ({ decisions, initialStandings }) => {\n  let total = 0;\n\n  if (preInvestmentsOrii({ decisions, initialStandings })) {\n    total += 15000;\n  }\n\n  if (preInvestmentsTradesmasher({ decisions, initialStandings })) {\n    // Could _technically_ be 50000\n    // In which case the optimization algorithm would also underestimate the importance of Tradesmasher-related investments for this iteration\n    // But that would require not having (at least) the Givini Orc Merchant and Lonely Sailor Services at this point\n    // So so unlikely I'm shrugging it off\n    total += 25000;\n  }\n\n  return total;\n};\n\nconst onFinish = async ({\n  runInWoker,\n  setResult,\n  setError,\n  secondRoundResult,\n  values,\n}) => {\n  const { finalStandings: initialStandings } = secondRoundResult;\n\n  const {\n    research,\n    mandatory1,\n    yelarel,\n    gawnfallTakkan,\n    gawnfallMercantile,\n    gawnfallArdford,\n    gawnfallMother,\n    vera,\n    merchantSolution3,\n    mandatory: mandatory2,\n    banned,\n    gawnfallHigh,\n    reserves,\n    extra_reserves,\n    spending,\n  } = values;\n  const decisions = {\n    research,\n    gawnfallTakkan,\n    gawnfallMercantile,\n    gawnfallArdford,\n    gawnfallMother,\n    merchantSolution3,\n    gawnfallHigh,\n    lustlordStatuesBought: yelarel === 'min',\n  };\n  let mandatory = [...mandatory1, ...mandatory2];\n  if (yelarel === 'max') {\n    mandatory.push('Lustlord Temples');\n  }\n\n  const misc = {\n    ...secondRoundResult.misc,\n    gawnfallTakkan,\n    gawnfallMother,\n    gawnfallArdford,\n    lustlordStatuesBought: decisions.lustlordStatuesBought,\n  };\n\n  const mercantileMoney = (() => {\n    switch (decisions.gawnfallMercantile) {\n      case 'excellent':\n        return 250000;\n      case 'good':\n        return 100000;\n      case 'poor':\n        return -100000;\n      default:\n        return 0;\n    }\n  })();\n\n  const nonInvestmentChangesList = [\n    yelarel === 'min' && {\n      name: `New Lustlord Statues`,\n      money: -50000,\n    },\n    vera && {\n      name: `Goddess of Magic Statue`,\n      money: -10000,\n    },\n    {\n      name: `Gawnfall social influence`,\n      social: gawnfallSocial(decisions),\n    },\n    {\n      name: `One-time mercantile issue modifier`,\n      money: mercantileMoney,\n    },\n    !!spending && {\n      name: `Other spending`,\n      money: -spending,\n    },\n  ].filter(Boolean);\n\n  const nonInvestmentChanges = {\n    money: nonInvestmentChangesList.reduce(\n      (acc, { money }) => acc + (money || 0),\n      0\n    ),\n    profits: 0,\n    social: nonInvestmentChangesList.reduce(\n      (acc, { social }) => acc + (social || 0),\n      0\n    ),\n    givini: giviniRoundThreeValue(decisions),\n    takkan: takkanRoundThreeValue(decisions),\n    chalice: chaliceRoundThreeValue(decisions),\n    list: nonInvestmentChangesList,\n  };\n\n  const params = {\n    ...misc,\n    previousInvestments: initialStandings.investments,\n    money:\n      initialStandings.money +\n      initialStandings.profits +\n      (nonInvestmentChanges.money - mercantileMoney),\n    giviniStart: initialStandings.givini,\n    giviniExtra: nonInvestmentChanges.givini,\n    otherRequirements: {\n      mandatory,\n      banned,\n      social:\n        decisions.merchantSolution3 === 'neutral'\n          ? Math.max(40 - initialStandings.social, 0)\n          : 0,\n      reserve:\n        reserves +\n        extra_reserves -\n        (initialStandings.profits +\n          nonInvestmentChanges.money +\n          nonInvestmentChanges.profits +\n          projectedPastInvestmentsUpdate({ decisions, initialStandings })),\n    },\n    list: 'gawnfall',\n  };\n\n  const result = await runInWoker(params);\n\n  if (!result) {\n    setResult(undefined);\n    setError(\n      `Couldn't find a working combination of investments for that strategy with these starting values, sorry.`\n    );\n    return;\n  }\n\n  const investmentChanges = { ...result, money: -result.price };\n\n  investmentChanges.profits += pastInvestmentsUpdate({\n    decisions,\n    initialStandings,\n    investmentChanges,\n  });\n\n  // Orri's Social\n  const allInvestments = [\n    ...initialStandings.investments,\n    ...investmentChanges.investments.map(({ name }) => name),\n  ];\n  if (\n    preInvestmentsOrii({ decisions, initialStandings }) ||\n    // TODO Find a clean way to update this on each following iteration\n    (ardfordOpen(decisions) &&\n      allInvestments.includes('Ardford Restaurant') &&\n      allInvestments.includes('Givini Teahouse Chain'))\n  ) {\n    nonInvestmentChanges.list.push({\n      name: `Orri's Quest`,\n      social: 1,\n    });\n  }\n\n  setResult({\n    initialStandings,\n    decisions,\n    nonInvestmentChanges,\n    investmentChanges,\n    finalStandings: buildFinalStandings({\n      initialStandings,\n      nonInvestmentChanges,\n      investmentChanges,\n    }),\n    misc,\n  });\n  setError(undefined);\n};\n\nconst ThirdRound = ({\n  firstRoundResult,\n  secondRoundResult,\n  runInWoker,\n  loading,\n  setResult,\n  setError,\n  result,\n}) => {\n  const previousInvestments = secondRoundResult.finalStandings.investments;\n  const previousResearch = [\n    firstRoundResult.decisions.research,\n    secondRoundResult.decisions.research,\n  ];\n  const merchantSolution = (() => {\n    if (firstRoundResult.decisions.merchantSolution !== 'wait') {\n      return firstRoundResult.decisions.merchantSolution;\n    }\n\n    if (secondRoundResult.decisions.merchantSolution2 !== 'wait') {\n      return secondRoundResult.decisions.merchantSolution2;\n    }\n\n    return undefined;\n  })();\n\n  return (\n    <div className=\"round-three\">\n      <Title level={2}>{`Chapter 4 – Round 3`}</Title>\n      <Form\n        previousInvestments={previousInvestments}\n        previousResearch={previousResearch}\n        onFinish={(values) => {\n          onFinish({\n            runInWoker,\n            setResult,\n            setError,\n            secondRoundResult,\n            values,\n          });\n        }}\n        loading={loading}\n        merchantSolution={merchantSolution}\n      />\n      <ScrollTo data={result}>\n        <Result {...result} />\n      </ScrollTo>\n    </div>\n  );\n};\n\nexport default ThirdRound;\n","import './App.css';\nimport FirstRound from './first-round';\nimport { useEffect, useState } from 'react';\nimport worker from 'workerize-loader!./worker'; // eslint-disable-line import/no-webpack-loader-syntax\nimport Disclaimer from './Disclaimer';\nimport Loading from './Loading';\nimport Failure from './Failure';\nimport SecondRound from './second-round';\nimport ThirdRound from './third-round';\n\nlet dumbCache = {};\nconst dumbKey = (params) => JSON.stringify(params);\n\nconst buildRunInWorker =\n  ({\n    workerInstance,\n    setLoading,\n    setCombinationsCount,\n    setProgress,\n    setInvestmentsCount,\n    setPreprogress,\n  }) =>\n  async (params) => {\n    const cacheKey = dumbKey(params);\n    if (!!dumbCache[cacheKey]) {\n      return dumbCache[cacheKey];\n    }\n\n    setLoading(true);\n\n    const investmentsCount = await workerInstance.prepare(params);\n    setInvestmentsCount(investmentsCount);\n    setPreprogress(0);\n    let combinationsCount = 0;\n    for (let i = 0; i <= investmentsCount; i++) {\n      combinationsCount += await workerInstance.preprocess();\n      setPreprogress(i / investmentsCount);\n    }\n\n    setCombinationsCount(combinationsCount);\n    setProgress(0);\n    const batchSize = 10000;\n    let result;\n    for (let i = 0; i < Math.ceil(combinationsCount / batchSize); i++) {\n      const end = Math.min((i + 1) * batchSize, combinationsCount);\n      result = await workerInstance.process(i * batchSize, end);\n      setProgress(end / combinationsCount);\n    }\n\n    await workerInstance.clean();\n\n    setLoading(false);\n    setCombinationsCount(undefined);\n    setInvestmentsCount(undefined);\n    setProgress(0);\n    setPreprogress(0);\n\n    dumbCache[cacheKey] = result;\n\n    return result;\n  };\n\nconst App = () => {\n  const [workerInstance, setWorkerInstance] = useState();\n  const [loading, setLoading] = useState(false);\n  const [combinationsCount, setCombinationsCount] = useState();\n  const [progress, setProgress] = useState(0);\n  const [investmentsCount, setInvestmentsCount] = useState();\n  const [preprogress, setPreprogress] = useState(0);\n\n  const [firstRoundResult, setFirstRoundResult] = useState();\n  const [secondRoundResult, setSecondRoundResult] = useState();\n  const [thirdRoundResult, setThirdRoundResult] = useState();\n  const [error, setError] = useState();\n\n  useEffect(() => {\n    if (!workerInstance) {\n      setWorkerInstance(worker());\n    }\n\n    return () => {\n      workerInstance?.terminate();\n    };\n  }, [workerInstance]);\n\n  if (!workerInstance) {\n    return null;\n  }\n\n  const runInWoker = buildRunInWorker({\n    workerInstance,\n    setLoading,\n    setCombinationsCount,\n    setProgress,\n    setInvestmentsCount,\n    setPreprogress,\n  });\n\n  const abort = async () => {\n    workerInstance.terminate();\n\n    const newWorkerInstance = worker();\n    await newWorkerInstance.clean();\n\n    setWorkerInstance(newWorkerInstance);\n\n    setCombinationsCount(undefined);\n    setInvestmentsCount(undefined);\n    setProgress(0);\n    setPreprogress(0);\n\n    setLoading(false);\n  };\n\n  return (\n    <div>\n      <Disclaimer />\n      <FirstRound\n        runInWoker={runInWoker}\n        loading={loading}\n        result={firstRoundResult}\n        setResult={(data) => {\n          setSecondRoundResult(undefined);\n          setThirdRoundResult(undefined);\n          setFirstRoundResult(data);\n        }}\n        setError={(error) => {\n          setSecondRoundResult(undefined);\n          setThirdRoundResult(undefined);\n          setError(error);\n        }}\n      />\n      {firstRoundResult && (\n        <SecondRound\n          runInWoker={runInWoker}\n          loading={loading}\n          result={secondRoundResult}\n          setResult={(data) => {\n            setThirdRoundResult(undefined);\n            setSecondRoundResult(data);\n          }}\n          setError={(error) => {\n            setThirdRoundResult(undefined);\n            setError(error);\n          }}\n          firstRoundResult={firstRoundResult}\n        />\n      )}\n      {firstRoundResult && secondRoundResult && (\n        <ThirdRound\n          firstRoundResult={firstRoundResult}\n          secondRoundResult={secondRoundResult}\n          runInWoker={runInWoker}\n          loading={loading}\n          setResult={setThirdRoundResult}\n          setError={setError}\n          result={thirdRoundResult}\n        />\n      )}\n      {loading && (\n        <Loading\n          combinationsCount={combinationsCount}\n          progress={progress}\n          preprogress={preprogress}\n          investmentsCount={investmentsCount}\n          abort={abort}\n        />\n      )}\n      {error && <Failure message={error} />}\n    </div>\n  );\n};\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}