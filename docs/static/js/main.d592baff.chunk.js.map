{"version":3,"sources":["worker.js","data/investments.js","first-round/Form.js","misc.js","results/Ledger.js","results/Addition.js","data/givini.js","first-round/results/Givini.js","data/takkan.js","first-round/results/Takkan.js","first-round/results/index.js","first-round/index.js","Disclaimer.js","Loading.js","Failure.js","second-round/Headquarters.js","second-round/Form.js","second-round/results/Givini.js","second-round/results/Takkan.js","second-round/results/index.js","second-round/index.js","App.js","reportWebVitals.js","index.js"],"names":["addMethods","methods","module","exports","w","Worker","name","investments","price","profits","social","givini","chapter3Infrastructure","chapter1Steel","takkan","giviniStart","newGiviniScore","giviniExtra","reduce","acc","investment","previousInvestments","guildScore","map","filter","includes","length","Title","Typography","possiblePrevious","initialValues","previous","remainingPron","baseProfit","strategy","startingSocial","merchantSolution","jhenno","magicalItems","mandatory","research","toSelectOptions","list","sort","value","label","requiredRule","required","message","CustomForm","onFinish","loading","useState","setPrevious","Form","useForm","form","setMerchantSolution","useEffect","getFieldValue","setFieldsValue","onValuesChange","_","allValues","className","level","Item","tooltip","rules","options","mode","valuePropName","title","Group","disabled","allInvestments","type","htmlType","buildFinalStandings","initialStandings","investmentChanges","nonInvestmentChanges","finalStandings","forEach","key","money","nF","number","toLocaleString","numberColWidth","NumberCell","children","formattedNumber","format","Math","abs","Investments","dataSource","data","columns","dataIndex","sorter","a","b","localeCompare","render","width","pagination","Others","Ledger","sum","extraProfits","category","otherList","bordered","expandable","expandedRowRender","rowExpandable","defaultExpandAllRows","summary","Summary","Row","Cell","colSpan","Addition","startingValue","dataSources","index","scope","values","explanation","join","toString","val","preliminaryChanges","Boolean","baseValue","chapter3Investments","roundOneChanges","roundOneValue","roundTwoChanges","merchantSolution2","roundTwoValue","Givini","roundOneInvestments","decisions","Takkan","Result","socialRequirement","buildNonInvestmentsChange","nonInvestmentChangesList","giviniRoundOneValue","takkanRoundOneValue","compute","runInWoker","misc","params","otherRequirements","atLeastOne","undefined","setResult","setError","giviniBaseValue","result","FirstRound","resultRef","useRef","current","scrollIntoView","behavior","ref","Disclaimer","href","description","showIcon","Loading","combinationsCount","progress","investmentsCount","preprogress","abort","visible","centered","closable","footer","percent","round","danger","icon","PoweroffOutlined","onClick","Failure","status","magic","military","defense","subsitute","plus","renderPlus","extra","flat","Headquarters","source","headquarters","orcCouncil","firstRoundDecisions","purchasedInvestments","militaryExtra","setMilitaryExtra","previousResearch","headquartersPrice","roundTwoInvestments","Text","roundOneResearch","takkanScore","councilResult","researches","yes","no","council","toFixed","roundOneDecisions","initialSocial","firstRoundResult","headquartersUpgradesPrice","giviniRoundTwoValue","completedResearch","SecondRound","dumbCache","dumbKey","JSON","stringify","App","workerInstance","setWorkerInstance","setLoading","setCombinationsCount","setProgress","setInvestmentsCount","setPreprogress","setFirstRoundResult","secondRoundResult","setSecondRoundResult","error","worker","terminate","cacheKey","prepare","i","preprocess","batchSize","ceil","end","min","process","clean","buildRunInWorker","newWorkerInstance","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.d592baff.chunk.js","sourcesContent":["\n\t\t\t\tvar addMethods = require(\"../node_modules/workerize-loader/dist/rpc-wrapper.js\")\n\t\t\t\tvar methods = [\"prepare\",\"preprocess\",\"process\",\"clean\"]\n\t\t\t\tmodule.exports = function() {\n\t\t\t\t\tvar w = new Worker(__webpack_public_path__ + \"7e6f168b689fa2bb7672.worker.js\", { name: \"[hash].worker.js\" })\n\t\t\t\t\taddMethods(w, methods)\n\t\t\t\t\t\n\t\t\t\t\treturn w\n\t\t\t\t}\n\t\t\t","// Ref: https://thelastsovereign.miraheze.org/wiki/Investments\n\nconst investments = [\n  {\n    name: 'Bank of Stineford',\n    price: 400000,\n    profits: 240000,\n  },\n  {\n    name: 'Stineford Weapons Store',\n    price: 200000,\n    profits: 75000,\n  },\n  {\n    name: 'Trading Pillar Rights',\n    price: 300000,\n    profits: 100000,\n  },\n  {\n    name: 'Stineford Succubus Tower',\n    price: 800000,\n    social: 2,\n  },\n  {\n    name: 'Yhilini Airship Fleet',\n    price: 1000000,\n    profits: 100000,\n  },\n  {\n    name: \"Min's Trade Route\",\n    price: 400000,\n    profits: 185000,\n    givini: 1,\n  },\n  {\n    name: 'Yhilini Succubi Trade',\n    price: ({ chapter3Infrastructure }) =>\n      chapter3Infrastructure ? 400000 : 550000,\n    profits: 200000,\n  },\n  {\n    name: 'Yhilini Brothel Reform',\n    price: 25000,\n    profits: 35000,\n  },\n  {\n    name: 'Premium Steel Owner',\n    price: ({ chapter1Steel }) => (!!chapter1Steel ? 75000 : 100000),\n    profits: 10000,\n  },\n  {\n    name: 'Yhilini Bank Core Lender',\n    price: 450000,\n    profits: 150000,\n  },\n  {\n    name: 'Mercenary Offices',\n    price: ({ chapter3Infrastructure }) =>\n      chapter3Infrastructure ? 150000 : 250000,\n    profits: 15000,\n    social: 2,\n  },\n  {\n    name: 'Theltiar Rentals',\n    price: 425000,\n    profits: 95000,\n    social: 1,\n  },\n  {\n    name: 'Theltiar Flowhouse',\n    price: 250000,\n    profits: 80000,\n  },\n  {\n    name: 'Denmiel Mushrooms',\n    price: 105000,\n    profits: 40000,\n  },\n  {\n    name: 'Denmiel Archives',\n    price: 250000,\n    profits: 20000,\n    social: 1,\n  },\n  {\n    name: 'Eustrin Guild',\n    price: 600000,\n    profits: 250000,\n  },\n  {\n    name: 'Succubus Armorer',\n    price: 100000,\n    profits: 10000,\n  },\n  {\n    name: 'Gasm Falls Trade',\n    price: 275000,\n    profits: 110000,\n  },\n  {\n    name: 'Givini Tunnels',\n    price: 1500000,\n    profits: 300000,\n    givini: 3,\n    takkan: 3,\n  },\n  {\n    name: 'Lustlord Statues + Lustlord Temples',\n    price: 50000 + 750000,\n    profits: 50000,\n  },\n  {\n    name: 'Succubus Band Tour',\n    price: 100000,\n    profits: 2000,\n    givini: 2,\n    social: 1,\n    takkan: 2,\n  },\n  {\n    name: 'Gasm Falls Water Cleanup',\n    price: 250000,\n    social: 1,\n  },\n  {\n    name: 'Orc Tunnels',\n    price: 200000,\n    social: 1,\n  },\n  {\n    name: 'Givini Smithing',\n    price: 200000,\n    profits: 10000,\n    givini: 2,\n  },\n  {\n    name: 'Givini Orc Merchant',\n    price: ({ giviniStart: newGiviniScore = 0 }) => {\n      if (newGiviniScore < 20) {\n        return 100000;\n      }\n      if (newGiviniScore < 25) {\n        return 200000;\n      }\n      if (newGiviniScore < 35) {\n        return 300000;\n      }\n      if (newGiviniScore < 45) {\n        return 400000;\n      }\n      return 500000;\n    },\n    profits: ({ giviniStart = 0, giviniExtra = 0, investments }) => {\n      const newGiviniScore =\n        giviniStart +\n        giviniExtra +\n        investments.reduce((acc, investment) => {\n          return acc + (investment?.givini || 0);\n        }, 0);\n      if (newGiviniScore < 20) {\n        return 25000;\n      }\n      if (newGiviniScore < 30) {\n        return 50000;\n      }\n      if (newGiviniScore < 40) {\n        return 100000;\n      }\n      if (newGiviniScore < 50) {\n        return 150000;\n      }\n      return 200000;\n    },\n    givini: 5,\n  },\n  {\n    name: 'Givini Teahouse Chain',\n    price: 275000,\n    profits: 30000,\n    givini: 2,\n    social: 1,\n    takkan: 1,\n  },\n  {\n    name: 'Bank of Givini',\n    price: 350000,\n    profits: 300000,\n    givini: 5,\n    takkan: 2,\n  },\n  {\n    name: 'Givini Mage Guild',\n    price: 1000000,\n    profits: 40000,\n    givini: 5,\n  },\n  {\n    name: 'War Monument',\n    price: 1000000,\n    givini: 10,\n    social: 3,\n    takkan: 2,\n  },\n  {\n    name: \"Tarran'Kan Housing + Tarran'Kan Trade Upgrade\",\n    price: 1000000 + 100000,\n    profits: 50000 + 50000,\n    social: 1,\n    takkan: 5 + 2,\n  },\n  {\n    name: 'Hall of Mental Strength',\n    price: 200000,\n    profits: 25000,\n    social: 1,\n    takkan: 3,\n  },\n  {\n    name: 'Booze Shack',\n    price: 150000,\n    profits: 50000,\n    social: 1,\n    takkan: 2,\n  },\n  {\n    name: \"Tradesmasher's Guild\",\n    price: 350000,\n    profits: ({ investments, previousInvestments = [] }) => {\n      const guildScore =\n        1 +\n        [...previousInvestments, ...investments.map(({ name }) => name)].filter(\n          (name) => {\n            return [\n              \"Cee'Kan Shipping\",\n              'Lonely Sailor Services',\n              'Givini Orc Merchant',\n              'Orcish Democracy',\n              'Orc Pools Upgrade',\n            ].includes(name);\n          }\n        ).length;\n\n      if (guildScore < 2) {\n        return 50000;\n      }\n      if (guildScore === 2) {\n        return 75000;\n      }\n      if (guildScore === 3) {\n        return 125000;\n      }\n      if (guildScore === 4) {\n        return 150000;\n      }\n      if (guildScore === 5) {\n        return 175000;\n      }\n      return 200000;\n    },\n    takkan: 5,\n  },\n  {\n    name: 'Lonely Sailor Services',\n    price: 250000,\n    profits: 100000,\n    social: 1,\n    takkan: 5,\n  },\n  {\n    name: \"Cee'Kan Shipping\",\n    price: 700000,\n    profits: 200000,\n    takkan: 5,\n  },\n  {\n    name: 'Orcish Democracy',\n    price: 1000000,\n    social: 5,\n    takkan: 10,\n  },\n  {\n    name: 'Imp Offices',\n    price: 100000,\n    social: 1,\n    takkan: 1,\n  },\n  {\n    name: 'Orc Pools Upgrade',\n    price: 500000,\n    social: 2,\n    takkan: 5,\n  },\n  {\n    name: 'Givini Banners + Givini Dragon Statue',\n    price: 1000 + 2500,\n    givini: 1,\n  },\n  {\n    name: 'Orcish Drake Statue + Orcish Gargoyle Statue + Orcish Golden Drake Statue',\n    price: 1000 + 2000 + 5000,\n    takkan: 1,\n  },\n];\n\nexport default investments;\n","import {\n  Form,\n  Select,\n  InputNumber,\n  Button,\n  Card,\n  Checkbox,\n  Radio,\n  Typography,\n} from 'antd';\nimport { useEffect, useState } from 'react';\nimport allInvestments from '../data/investments';\n\nconst { Title } = Typography;\n\nconst possiblePrevious = [\n  \"Min's Trade Route\",\n  'Yhilini Succubi Trade',\n  'Yhilini Bank Core Lender',\n  'Mercenary Offices',\n  'Theltiar Rentals',\n  'Theltiar Flowhouse',\n  'Denmiel Mushrooms',\n  'Denmiel Archives',\n  'Eustrin Guild',\n  'Gasm Falls Trade',\n  'Premium Steel Owner',\n];\n\nconst initialValues = {\n  previous: [\n    'Premium Steel Owner',\n    \"Min's Trade Route\",\n    'Yhilini Succubi Trade',\n    'Eustrin Guild',\n    'Denmiel Mushrooms',\n  ],\n  remainingPron: 7500,\n  baseProfit: 2435000,\n  chapter1Steel: false,\n  strategy: 'social',\n  startingSocial: 34,\n  chapter3Infrastructure: true,\n  merchantSolution: 'wait',\n  jhenno: 'religion',\n  magicalItems: 'givini',\n  mandatory: ['Givini Orc Merchant', 'Bank of Givini'],\n  research: 'purity',\n};\n\nconst toSelectOptions = (list) => {\n  return [...list].sort().map((value) => {\n    return {\n      label: value,\n      value: value,\n    };\n  });\n};\n\nconst requiredRule = { required: true, message: `Please provide a value.` };\n\nconst CustomForm = ({ onFinish, loading }) => {\n  const [previous, setPrevious] = useState(initialValues.previous);\n\n  const [form] = Form.useForm();\n  const [merchantSolution, setMerchantSolution] = useState(\n    initialValues.merchantSolution\n  );\n  useEffect(() => {\n    if (\n      merchantSolution === 'neutral' &&\n      form.getFieldValue('strategy') === 'money'\n    ) {\n      form.setFieldsValue({ strategy: 'social' });\n    }\n  }, [form, merchantSolution]);\n  useEffect(() => {\n    form.setFieldsValue({\n      mandatory: form\n        .getFieldValue('mandatory')\n        .filter((name) => !previous.includes(name)),\n    });\n  }, [form, previous]);\n\n  return (\n    <Form\n      initialValues={initialValues}\n      onFinish={onFinish}\n      onValuesChange={(_, allValues) => {\n        setPrevious(allValues.previous);\n        setMerchantSolution(allValues.merchantSolution);\n      }}\n      className=\"round-form first-round-form\"\n      form={form}\n    >\n      <div className=\"past-block\">\n        <Title level={2}>{`Chapters 1-3`}</Title>\n        <Card>\n          <div className=\"numbers\">\n            <Form.Item\n              label={`ProN remaining at the end of chapter 3`}\n              name=\"remainingPron\"\n              tooltip={`In the Calculator, go to \"War Investment Phase\" and copy the value next to \"ProN available\".`}\n              rules={[requiredRule]}\n            >\n              <InputNumber />\n            </Form.Item>\n            <Form.Item\n              label={`Total profit at the start of chapter 4`}\n              name=\"baseProfit\"\n              tooltip={`In the Calculator, go to \"First Tower Run and Investment and copy the value next to \"Total ProN Return\".`}\n              rules={[requiredRule]}\n            >\n              <InputNumber />\n            </Form.Item>\n            <Form.Item\n              label={`Your social standing at the start of chapter 4`}\n              name=\"startingSocial\"\n              tooltip={`In the Calculator, go to \"War Investment Phase\" and copy the value next to \"Social Score\".`}\n              rules={[requiredRule]}\n            >\n              <InputNumber />\n            </Form.Item>\n          </div>\n\n          <Form.Item\n            label={`Investments already bought during chapters 2/3`}\n            name=\"previous\"\n          >\n            <Select\n              options={toSelectOptions(possiblePrevious)}\n              mode=\"multiple\"\n            />\n          </Form.Item>\n\n          <div className=\"checkboxes\">\n            {!previous.includes('Premium Steel Owner') && (\n              <Form.Item name=\"chapter1Steel\" valuePropName=\"checked\">\n                <Checkbox>{`You invested 20,000 ProN in Premium Steel during chapter 1.`}</Checkbox>\n              </Form.Item>\n            )}\n            {!(\n              previous.includes('Yhilini Succubi Trade') &&\n              previous.includes('Mercenary Offices')\n            ) && (\n              <Form.Item name=\"chapter3Infrastructure\" valuePropName=\"checked\">\n                <Checkbox>{`You funded Yhilin Infrastructure during chapter 3.`}</Checkbox>\n              </Form.Item>\n            )}\n          </div>\n        </Card>\n      </div>\n\n      <Title level={2}>{`Chapter 4 – Round 1`}</Title>\n      <Card title={`Strategy`}>\n        <Form.Item name=\"strategy\" label={`Succession crisis`}>\n          <Radio.Group\n            options={[\n              {\n                label: `Focus on profits; do only the bare minimum for the Ardan succession crisis (New Givini ≥ 25).`,\n                value: 'money',\n                disabled: merchantSolution === 'neutral',\n              },\n              {\n                label: `Mix profits and social; reach most thresholds for the Ardan succession crisis (New Givini ≥ 25, Social ≥ 40).`,\n                value: 'social',\n              },\n              {\n                label: `Go all in on the Ardan succession crisis (New Givini ≥ 25, Social ≥ 40, dedicated investments).`,\n                value: 'succession',\n              },\n            ]}\n          />\n        </Form.Item>\n        <div className=\"selects\">\n          <Form.Item label={`Research`} name=\"research\">\n            <Select\n              options={[\n                {\n                  value: 'orc',\n                  label: `Orc Diversification`,\n                },\n                {\n                  value: 'unpeople',\n                  label: `Unpeople Transformation`,\n                },\n                {\n                  value: 'purity',\n                  label: `Purity Magic`,\n                },\n                {\n                  value: 'defense',\n                  label: `Base Defense`,\n                },\n              ]}\n            />\n          </Form.Item>\n          <Form.Item label={`Jhenno's cooperation`} name=\"jhenno\">\n            <Select\n              options={[\n                {\n                  value: 'politics',\n                  label: `Politics`,\n                },\n                {\n                  value: 'religion',\n                  label: `Religion`,\n                },\n              ]}\n            />\n          </Form.Item>\n          <Form.Item label={`Rose's house magical items`} name=\"magicalItems\">\n            <Select\n              options={[\n                {\n                  value: 'givini',\n                  label: `Givini`,\n                },\n                {\n                  value: 'takkan',\n                  label: `Tak'Kan`,\n                },\n              ]}\n            />\n          </Form.Item>\n          <Form.Item label={`Merchant dispute`} name=\"merchantSolution\">\n            <Select\n              options={[\n                {\n                  value: 'neutral',\n                  label: `Neutral compromise (force Social ≥ 40)`,\n                },\n                {\n                  value: 'givini',\n                  label: `Favor New Givini`,\n                },\n                {\n                  value: 'wait',\n                  label: `Wait`,\n                },\n              ]}\n            />\n          </Form.Item>\n        </div>\n        <Form.Item\n          label={`Investments you explicitly want to buy, for any reason`}\n          name=\"mandatory\"\n          tooltip={`Forcing a few certain investments can improve performances tremendously.`}\n        >\n          <Select\n            options={toSelectOptions(\n              allInvestments\n                .map(({ name }) => name)\n                .filter((name) => !previous.includes(name))\n            )}\n            mode=\"multiple\"\n          />\n        </Form.Item>\n\n        <Form.Item>\n          <Button type=\"primary\" htmlType=\"submit\" loading={loading}>\n            {`Submit`}\n          </Button>\n        </Form.Item>\n      </Card>\n    </Form>\n  );\n};\n\nexport default CustomForm;\n","export const buildFinalStandings = ({\n  initialStandings,\n  investmentChanges,\n  nonInvestmentChanges,\n}) => {\n  let finalStandings = {};\n\n  ['profits', 'givini', 'social', 'takkan'].forEach((key) => {\n    finalStandings[key] =\n      initialStandings[key] +\n      (investmentChanges[key] || 0) +\n      (nonInvestmentChanges[key] || 0);\n  });\n\n  finalStandings['investments'] = [\n    ...initialStandings.investments,\n    ...investmentChanges.investments.map(({ name }) => name),\n  ];\n\n  finalStandings['money'] =\n    initialStandings.money +\n    initialStandings.profits -\n    investmentChanges.price +\n    nonInvestmentChanges.money;\n\n  return finalStandings;\n};\n\nexport const nF = (number) => number.toLocaleString('en-US');\n","import { Table } from 'antd';\nimport { nF } from '../misc';\n\nconst numberColWidth = 120;\n\nconst NumberCell = ({ children, format }) => {\n  const number = children;\n  const formattedNumber = !!format ? nF(Math.abs(number)) : Math.abs(number);\n\n  return `${number < 0 ? `-` : `+`}${formattedNumber}`;\n};\n\nconst Investments = ({ investments }) => {\n  const dataSource = investments.map(({ name, ...data }) => {\n    return {\n      key: name,\n      name,\n      ...data,\n    };\n  });\n\n  const columns = [\n    {\n      title: `Name`,\n      dataIndex: 'name',\n      sorter: (a, b) => a.name.localeCompare(b.name),\n    },\n    {\n      title: `Price`,\n      dataIndex: 'price',\n      render: (price) => nF(price),\n      sorter: (a, b) => a.price - b.price,\n      width: numberColWidth,\n    },\n    {\n      title: `Profits`,\n      dataIndex: 'profits',\n      render: (profits) => nF(profits),\n      sorter: (a, b) => a.profits - b.profits,\n      width: numberColWidth,\n    },\n    {\n      title: `Social`,\n      dataIndex: 'social',\n      render: (social = 0) => <NumberCell>{social}</NumberCell>,\n      width: numberColWidth,\n    },\n  ];\n\n  return <Table dataSource={dataSource} columns={columns} pagination={false} />;\n};\n\nconst Others = ({ list = [] }) => {\n  const dataSource = list.map(({ name, ...data }) => {\n    return {\n      key: name,\n      name,\n      ...data,\n    };\n  });\n\n  const render = (value = 0) => <NumberCell format={true}>{value}</NumberCell>;\n\n  const columns = [\n    {\n      title: `Name`,\n      dataIndex: 'name',\n    },\n    {\n      title: `Price`,\n      dataIndex: 'price',\n      render,\n      width: numberColWidth,\n    },\n    {\n      title: `Profits`,\n      dataIndex: 'profits',\n      render,\n      width: numberColWidth,\n    },\n    {\n      title: `Social`,\n      dataIndex: 'social',\n      render,\n      width: numberColWidth,\n    },\n  ];\n\n  return <Table dataSource={dataSource} columns={columns} pagination={false} />;\n};\n\nconst Ledger = ({\n  initialStandings,\n  nonInvestmentChanges,\n  investmentChanges,\n}) => {\n  const render = (value, { key }) => {\n    if (['base', 'total'].includes(key)) {\n      return nF(value);\n    }\n    return <NumberCell format={true}>{value}</NumberCell>;\n  };\n\n  const columns = [\n    {\n      dataIndex: 'category',\n    },\n    {\n      title: `ProN`,\n      dataIndex: 'money',\n      render,\n      width: numberColWidth,\n    },\n    {\n      title: `Profits`,\n      dataIndex: 'profits',\n      render,\n      width: numberColWidth,\n    },\n    {\n      title: `Social`,\n      dataIndex: 'social',\n      render,\n      width: numberColWidth,\n    },\n  ];\n\n  const sum = (key) =>\n    initialStandings[key] + nonInvestmentChanges[key] + investmentChanges[key];\n\n  const extraProfits =\n    investmentChanges.profits -\n    investmentChanges.investments.reduce(\n      (acc, { profits }) => acc + profits,\n      0\n    );\n\n  const dataSource = [\n    {\n      ...initialStandings,\n      key: 'base',\n      category: `Previously`,\n    },\n    {\n      key: 'previous_investments',\n      category: `Start of the round`,\n      money: initialStandings.profits,\n      profits: 0,\n      social: 0,\n    },\n    {\n      ...investmentChanges,\n      key: 'investments',\n      category: `Changes from new investments`,\n      money: -investmentChanges.price,\n      profits: investmentChanges.profits - extraProfits,\n    },\n    {\n      ...nonInvestmentChanges,\n      key: 'other',\n      category: `Other changes`,\n      profits: nonInvestmentChanges.profits + extraProfits,\n    },\n  ];\n\n  const otherList = (() => {\n    if (extraProfits > 0) {\n      return [\n        ...nonInvestmentChanges.list,\n        {\n          name: `Extra profits from past investments`,\n          profits: extraProfits,\n        },\n      ];\n    }\n\n    return nonInvestmentChanges.list;\n  })();\n\n  return (\n    <Table\n      dataSource={dataSource}\n      columns={columns}\n      pagination={false}\n      bordered={true}\n      expandable={{\n        expandedRowRender: ({ key }) => {\n          if (key === 'investments') {\n            return <Investments investments={investmentChanges.investments} />;\n          }\n          if (key === 'other') {\n            return <Others list={otherList} />;\n          }\n          return null;\n        },\n        rowExpandable: ({ key }) => {\n          if (key === 'investments') {\n            return true;\n          }\n\n          if (key === 'other' && !!nonInvestmentChanges.list?.length) {\n            return true;\n          }\n\n          return false;\n        },\n        defaultExpandAllRows: true,\n      }}\n      summary={() => {\n        return (\n          <Table.Summary.Row>\n            <Table.Summary.Cell\n              colSpan={2}\n            >{`Standings at the end of the round`}</Table.Summary.Cell>\n            <Table.Summary.Cell>\n              {nF(\n                initialStandings.money +\n                  initialStandings.profits +\n                  nonInvestmentChanges.money -\n                  investmentChanges.price\n              )}\n            </Table.Summary.Cell>\n            <Table.Summary.Cell>{nF(sum('profits'))}</Table.Summary.Cell>\n            <Table.Summary.Cell>{sum('social')}</Table.Summary.Cell>\n          </Table.Summary.Row>\n        );\n      }}\n      className=\"ledger\"\n    />\n  );\n};\n\nexport default Ledger;\n","const Addition = ({ startingValue = 0, dataSources }) => {\n  return (\n    <table className=\"addition\">\n      <tbody>\n        <tr>\n          <td>{`Initial value`}</td>\n          <td>{startingValue}</td>\n          <td></td>\n        </tr>\n      </tbody>\n      {dataSources\n        .filter(({ dataSource }) => dataSource.length > 0)\n        .map(({ title, dataSource }, index) => {\n          return (\n            <tbody key={index.toString()}>\n              <tr>\n                <th colSpan=\"3\" scope=\"col\">\n                  {title}\n                </th>\n              </tr>\n              {dataSource.map(({ label, values, explanation }, index) => {\n                return (\n                  <tr key={index.toString()}>\n                    <td>{label}</td>\n                    <td>{values.map((value) => `+${value}`).join(' ')}</td>\n                    <td>{explanation}</td>\n                  </tr>\n                );\n              })}\n            </tbody>\n          );\n        })}\n      <tfoot>\n        <tr>\n          <th scope=\"row\">{`Total`}</th>\n          <td>\n            {startingValue +\n              dataSources.reduce(\n                (acc, { dataSource }) =>\n                  acc +\n                  dataSource.reduce(\n                    (acc, { values }) =>\n                      acc + values.reduce((acc, val) => acc + val),\n                    0\n                  ),\n                0\n              )}\n          </td>\n        </tr>\n      </tfoot>\n    </table>\n  );\n};\n\nexport default Addition;\n","const sum = (list) =>\n  list.reduce(\n    (acc, { values }) => acc + values.reduce((acc, value) => acc + value, 0),\n    0\n  );\n\nexport const startingValue = -5;\n\nexport const preliminaryChanges = ({ investments }) => {\n  return [\n    { label: `Petitions`, values: [5, 5, 2, 2, 2] },\n    {\n      label: `New Givini Trade`,\n      values: [5],\n      explanation: `On purchase`,\n    },\n    investments.includes(\"Min's Trade Route\") && {\n      label: `Min's Trade Route`,\n      values: [1],\n    },\n  ].filter(Boolean);\n};\n\nexport const baseValue = ({ chapter3Investments }) =>\n  startingValue + sum(preliminaryChanges({ investments: chapter3Investments }));\n\nexport const roundOneChanges = ({ merchantSolution, magicalItems }) => {\n  return [\n    magicalItems === 'givini' && {\n      label: `House Rose's magical items: Givini`,\n      values: [2],\n    },\n    merchantSolution === 'neutral' && {\n      label: `Merchant dispute: Neutral compromise`,\n      values: [1],\n    },\n    merchantSolution === 'givini' && {\n      label: `Merchant dispute: Favor New Givini`,\n      values: [2],\n    },\n    { label: `Givino Vinai equipment shop girl`, values: [1] },\n    { label: `Givini king`, values: [1] },\n    {\n      label: `New Givini Trade`,\n      values: [1],\n      explanation: `At the end of the round (before profits from the Givini Orc Merchant are computed)`,\n    },\n  ].filter(Boolean);\n};\n\nexport const roundOneValue = (...params) => sum(roundOneChanges(...params));\n\nexport const roundTwoChanges = ({ merchantSolution2 }) => {\n  return [\n    merchantSolution2 === 'neutral' && {\n      label: `Merchant dispute: Neutral compromise`,\n      values: [1],\n    },\n    merchantSolution2 === 'givini' && {\n      label: `Merchant dispute: Favor New Givini`,\n      values: [2],\n    },\n    {\n      label: `New Givini Trade`,\n      values: [1],\n      explanation: `At the end of the round (before profits from the Givini Orc Merchant are computed)`,\n    },\n  ].filter(Boolean);\n};\n\nexport const roundTwoValue = (...params) => sum(roundTwoChanges(...params));\n","import Addition from '../../results/Addition';\nimport {\n  startingValue,\n  preliminaryChanges,\n  roundOneChanges,\n} from '../../data/givini';\n\nconst Givini = ({\n  chapter3Investments = [],\n  roundOneInvestments = [],\n  decisions = {},\n}) => {\n  return (\n    <Addition\n      startingValue={startingValue}\n      dataSources={[\n        {\n          title: `Chapter start`,\n          dataSource: preliminaryChanges({ investments: chapter3Investments }),\n        },\n        {\n          title: `Investments`,\n          dataSource: roundOneInvestments\n            .filter(({ givini = 0 }) => givini !== 0)\n            .map(({ name, givini }) => {\n              return { label: name, values: [givini] };\n            })\n            .sort(({ label: a }, { label: b }) => a.localeCompare(b)),\n        },\n        {\n          title: `Other changes`,\n          dataSource: roundOneChanges(decisions),\n        },\n      ]}\n    />\n  );\n};\n\nexport default Givini;\n","const sum = (list) =>\n  list.reduce(\n    (acc, { values }) => acc + values.reduce((acc, value) => acc + value, 0),\n    0\n  );\n\nexport const startingValue = -5;\n\nexport const preliminaryChanges = () => {\n  return [\n    { label: `Petitions`, values: [5, 2, 2, 5] },\n    {\n      label: `Tak'Kan Trade`,\n      values: [5],\n      explanation: `On purchase`,\n    },\n  ];\n};\n\nexport const baseValue = () => startingValue + sum(preliminaryChanges());\n\nexport const roundOneChanges = ({ magicalItems, research }) => {\n  return [\n    magicalItems === 'takkan' && {\n      label: `House Rose's magical items: Tak'Kan`,\n      values: [2],\n    },\n    {\n      label: `Tak'Kan Trade`,\n      values: [1],\n      explanation: `At the end of the round`,\n    },\n    research === 'orc' && {\n      label: `Research: Orc Diversification`,\n      values: [5],\n    },\n  ].filter(Boolean);\n};\n\nexport const roundOneValue = (...params) => sum(roundOneChanges(...params));\n\nexport const roundTwoChanges = () => {\n  return [\n    {\n      label: `Tak'Kan Trade`,\n      values: [1],\n      explanation: `At the end of the round`,\n    },\n  ];\n};\n\nexport const roundTwoValue = () => 1;\n\nexport const council = ({ investments = [], takkan, researches = [] }) => {\n  let yes = 3 + 1 + 1; //Base, Elleani, Impaler\n  let no = 2;\n\n  if (takkan >= 40) {\n    yes += 4;\n  } else if (takkan >= 30) {\n    yes += 3;\n    no += 1;\n  } else if (takkan >= 20) {\n    yes += 2;\n    no += 2;\n  } else if (takkan >= 10) {\n    yes += 1;\n    no += 3;\n  } else {\n    no += 4;\n  }\n\n  if (researches.includes('orc')) {\n    yes += 1;\n  } else {\n    no += 1;\n  }\n\n  yes += investments.filter((name) => {\n    return [\n      'Orc Pools Upgrade',\n      \"Tarran'Kan Housing + Tarran'Kan Trade Upgrade\",\n      'Hall of Mental Strength',\n      'Imp Offices',\n    ].includes(name);\n  }).length;\n\n  if (investments.includes('Orcish Democracy')) {\n    yes = +2;\n  }\n\n  return yes / (yes + no);\n};\n","import Addition from '../../results/Addition';\nimport {\n  startingValue,\n  preliminaryChanges,\n  roundOneChanges,\n} from '../../data/takkan';\n\nconst Takkan = ({ roundOneInvestments = [], decisions = {} }) => {\n  return (\n    <Addition\n      startingValue={startingValue}\n      dataSources={[\n        {\n          title: `Chapter start`,\n          dataSource: preliminaryChanges(),\n        },\n        {\n          title: `Investments`,\n          dataSource: roundOneInvestments\n            .filter(({ takkan = 0 }) => takkan !== 0)\n            .map(({ name, takkan }) => {\n              return { label: name, values: [takkan] };\n            })\n            .sort(({ label: a }, { label: b }) => a.localeCompare(b)),\n        },\n        {\n          title: `Other changes`,\n          dataSource: roundOneChanges(decisions),\n        },\n      ]}\n    />\n  );\n};\n\nexport default Takkan;\n","import Ledger from '../../results/Ledger';\nimport { Card } from 'antd';\nimport Givini from './Givini';\nimport Takkan from './Takkan';\n\nconst Result = ({\n  initialStandings,\n  nonInvestmentChanges,\n  investmentChanges,\n  decisions,\n}) => {\n  return (\n    <Card title={`Changes`} className=\"results\">\n      <Ledger\n        initialStandings={initialStandings}\n        nonInvestmentChanges={nonInvestmentChanges}\n        investmentChanges={investmentChanges}\n      />\n      <div>\n        <Card title={`New Givini`} type=\"inner\">\n          <Givini\n            chapter3Investments={initialStandings.investments}\n            roundOneInvestments={investmentChanges.investments}\n            decisions={decisions}\n          />\n        </Card>\n        <Card title={`Tak'Kan`} type=\"inner\">\n          <Takkan\n            roundOneInvestments={investmentChanges.investments}\n            decisions={decisions}\n          />\n        </Card>\n      </div>\n    </Card>\n  );\n};\n\nexport default Result;\n","import Form from './Form';\nimport Result from './results';\nimport {\n  baseValue as giviniBaseValue,\n  roundOneValue as giviniRoundOneValue,\n} from '../data/givini';\nimport { buildFinalStandings } from '../misc';\nimport {\n  baseValue as takkanBaseValue,\n  roundOneValue as takkanRoundOneValue,\n} from '../data/takkan';\nimport { useEffect, useRef } from 'react';\n\nconst socialRequirement = (\n  startingSocial,\n  { strategy, jhenno, merchantSolution }\n) => {\n  if (strategy === 'money') {\n    return 0;\n  }\n  if (jhenno === 'politics' && merchantSolution !== 'neutral') {\n    return 39 - startingSocial;\n  }\n  return 40 - startingSocial;\n};\n\nconst giviniRequirement = ({ giviniStart, giviniExtra }) => {\n  const absoluteRequirement = 25;\n  const offset = 3; // Points earned after the requirement matters\n\n  return absoluteRequirement - giviniStart - giviniExtra + offset;\n};\n\nconst buildNonInvestmentsChange = (decisions) => {\n  const { jhenno } = decisions;\n\n  const nonInvestmentChangesList = [\n    jhenno === 'politics' && {\n      name: `Jhenno's political cooperation`,\n      social: 1,\n    },\n    {\n      name: `Succession crisis' reward (best result)`,\n      social: 3,\n    },\n    {\n      name: `The Three Trades become less profitable`,\n      profits: -300000,\n    },\n  ].filter(Boolean);\n\n  return {\n    givini: giviniRoundOneValue(decisions),\n    takkan: takkanRoundOneValue(decisions),\n    money: 0,\n    profits: nonInvestmentChangesList.reduce(\n      (acc, { profits = 0 }) => acc + profits,\n      0\n    ),\n    social: nonInvestmentChangesList.reduce(\n      (acc, { social = 0 }) => acc + social,\n      0\n    ),\n    list: nonInvestmentChangesList,\n  };\n};\n\nconst compute = async ({\n  runInWoker,\n  initialStandings,\n  decisions,\n  nonInvestmentChanges,\n  mandatory,\n  misc,\n}) => {\n  const giviniStart = initialStandings.givini;\n  const giviniExtra = nonInvestmentChanges.givini;\n\n  const params = {\n    ...misc,\n    previousInvestments: initialStandings.investments,\n    money: initialStandings.money + initialStandings.profits,\n    otherRequirements: {\n      social: socialRequirement(initialStandings.social, decisions),\n      givini: giviniRequirement({\n        giviniStart,\n        giviniExtra,\n      }),\n      mandatory,\n      atLeastOne:\n        decisions.strategy === 'succession'\n          ? ['War Monument', 'Givini Mage Guild']\n          : undefined,\n    },\n    giviniStart,\n    giviniExtra,\n  };\n\n  return runInWoker(params);\n};\n\nconst onFinish = async ({ values, setResult, runInWoker, setError }) => {\n  setError(undefined);\n\n  const {\n    previous = [],\n    remainingPron,\n    baseProfit,\n    startingSocial,\n\n    strategy,\n    merchantSolution,\n    jhenno,\n    magicalItems,\n    research,\n\n    mandatory,\n\n    chapter1Steel,\n    chapter3Infrastructure,\n  } = values;\n\n  const initialStandings = {\n    money: remainingPron,\n    profits: baseProfit,\n    investments: previous,\n    social: startingSocial,\n    givini: giviniBaseValue({ chapter3Investments: previous }),\n    takkan: takkanBaseValue(),\n  };\n\n  const decisions = {\n    strategy,\n    merchantSolution,\n    magicalItems,\n    research,\n    jhenno,\n  };\n\n  const misc = {\n    chapter1Steel,\n    chapter3Infrastructure,\n  };\n\n  const nonInvestmentChanges = buildNonInvestmentsChange(decisions);\n\n  const result = await compute({\n    runInWoker,\n    initialStandings,\n    decisions,\n    nonInvestmentChanges,\n    mandatory,\n    misc,\n  });\n\n  if (!result) {\n    setResult(undefined);\n    setError(\n      `Couldn't find a working combination of investments for that strategy with these starting values, sorry.`\n    );\n    return;\n  }\n\n  const investmentChanges = { ...result, money: -result.price };\n\n  setResult({\n    initialStandings,\n    decisions,\n    nonInvestmentChanges,\n    investmentChanges,\n    finalStandings: buildFinalStandings({\n      initialStandings,\n      nonInvestmentChanges,\n      investmentChanges,\n    }),\n    misc,\n  });\n  setError(undefined);\n};\n\nconst FirstRound = ({ runInWoker, loading, result, setResult, setError }) => {\n  const resultRef = useRef(null);\n  useEffect(() => {\n    if (!result || !resultRef.current) {\n      return;\n    }\n    resultRef.current.scrollIntoView({ behavior: 'smooth' });\n  }, [result, resultRef]);\n\n  return (\n    <div className=\"round-one\">\n      <Form\n        onFinish={(values) => {\n          onFinish({ values, setResult, runInWoker, setError });\n        }}\n        loading={loading}\n      />\n      {result && (\n        <div ref={resultRef}>\n          <Result {...result} />\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default FirstRound;\n","import { Alert, Typography } from 'antd';\n\nconst { Title } = Typography;\n\nconst Disclaimer = () => {\n  return (\n    <div className=\"disclaimer\">\n      <div className=\"preamble\">\n        <Title>{`Investment Advisor`}</Title>\n        <p>\n          {`A tool to help you choose the best theoretical best possible investments for (the early steps of chapter 4 of) `}\n          <a href=\"https://the-last-sovereign.blogspot.com/\">{`The Last Sovereign`}</a>\n          {`.`}\n        </p>\n        <p>{`Just fill in the requested information, choose your strategy and let a quasi-brute force algorithm determine what's best for you (assuming a definition of best here as highest short term returns, then lowest price, while still fulfilling the requirements of your strategy).`}</p>\n        <p>\n          {`This is definetely an advanced tool, intended for people who are already familiar with the game's `}\n          <a href=\"https://thelastsovereign.miraheze.org/wiki/Secret_stats\">\n            {`inner workings`}\n          </a>\n          {`, with the awesome `}\n\n          <a href=\"https://thelastsovereign.flarum.cloud/d/15-calculator\">{`Calculator`}</a>\n          {`, and are now looking for the last lousy optimizations they might have missed.`}\n        </p>\n      </div>\n      <Alert\n        message={`Assumptions`}\n        description={\n          <>\n            <span>{`This tool takes for granted that:`}</span>\n            <ol>\n              <li>{`The Succubus Tower was visited during chapter 1.`}</li>\n              <li>{`Simon invested in the bank during chapter 1 (with Megail and Trin help).`}</li>\n              <li>{`AriGarda was bribed during chapter 2.`}</li>\n              <li>{`Tradesmasher and the Succubus Armorer were met during chapter 3.`}</li>\n              <li>{`The three unique Trades (New Givini, Tak'Kan and Chalice States) were bought at the end of chapter 3.`}</li>\n              <li>{`Chapter 3 in general was good enough for Yhilin to reach its final state during the first investment phase of Chapter 4.`}</li>\n              <li>{`Chapter 3 in general and the war in particular were good enough for all petitions favorable to Givini to appear.`}</li>\n              <li>{`All such petitions were approved.`}</li>\n              <li>{`If purchased, the Givini Orc Merchant is bought before any other investment of the round.`}</li>\n            </ol>\n          </>\n        }\n        type=\"info\"\n        showIcon\n      />\n    </div>\n  );\n};\n\nexport default Disclaimer;\n","import { Progress, Divider, Modal, Button } from 'antd';\nimport { PoweroffOutlined } from '@ant-design/icons';\n\nconst Loading = ({\n  combinationsCount,\n  progress,\n  investmentsCount,\n  preprogress,\n  abort,\n}) => {\n  if (!investmentsCount) {\n    return null;\n  }\n\n  return (\n    <Modal visible={true} centered={true} closable={false} footer={null}>\n      <div>\n        <p>\n          {`Prefiltering ${(2 ** investmentsCount).toLocaleString('en-US')} (2`}\n          <sup>{investmentsCount}</sup>\n          {`) possibilities…`}\n        </p>\n        <Progress percent={Math.round(preprogress * 100)} />\n      </div>\n      {!!combinationsCount && (\n        <>\n          <Divider />\n          <div>\n            <p>{`Processing ${combinationsCount.toLocaleString(\n              'en-US'\n            )} remaining possibilities…`}</p>\n            <Progress percent={Math.round(progress * 10000) / 100} />\n          </div>\n        </>\n      )}\n      <Button\n        danger={true}\n        icon={<PoweroffOutlined />}\n        onClick={abort}\n        className=\"abort-button\"\n      >{`Abort`}</Button>\n    </Modal>\n  );\n};\n\nexport default Loading;\n","import { Result, Card } from 'antd';\n\nconst Failure = ({ message }) => {\n  return (\n    <Card>\n      <Result status=\"warning\" title={message} />\n    </Card>\n  );\n};\n\nexport default Failure;\n","import { Table } from 'antd';\nimport { nF } from '../misc';\n\nconst mandatory = [\n  {\n    key: `Tower Little Girl talk`,\n    magic: 1,\n    military: 0,\n    price: 0,\n  },\n  {\n    key: `Deluxe Givini Dragon Statue`,\n    magic: 1,\n    military: 0,\n    price: 5000,\n  },\n  {\n    key: `HQ Shrine`,\n    magic: 1,\n    military: 0,\n    price: 5000,\n  },\n  {\n    key: `Orc Lab Upgrade`,\n    magic: 2,\n    military: 5,\n    price: 25000,\n  },\n  {\n    key: `Magical Shielding Upgrade`,\n    magic: 5,\n    military: 0,\n    price: 100000,\n  },\n];\n\nconst defense = [\n  {\n    key: `Research: Base Defense`,\n    military: 5,\n    magic: 10,\n    price: 0,\n  },\n];\n\nconst subsitute = [\n  {\n    key: `Wynn's Shield Upgrade`,\n    magic: 5,\n    military: 0,\n    price: 100000,\n  },\n  {\n    key: `Extradimensional Foundation`,\n    magic: 5,\n    military: 5,\n    price: 225000,\n  },\n];\n\nconst plus = [\n  {\n    key: `Armory Upgrade`,\n    military: 5,\n    magic: 0,\n    price: 10000,\n  },\n  {\n    key: `Orc Guard Posts`,\n    military: 3,\n    magic: 0,\n    price: 5000,\n  },\n  {\n    key: `Supplies Upgrade`,\n    military: 2,\n    magic: 0,\n    price: 10000,\n  },\n];\n\nconst renderPlus = (number) => `+${number}`;\n\nconst columns = [\n  {\n    title: `Upgrade`,\n    dataIndex: 'key',\n  },\n  {\n    title: `Price`,\n    dataIndex: 'price',\n    render: (number) => nF(number),\n    sorter: (a, b) => a.price - b.price,\n  },\n  {\n    title: `Magic`,\n    dataIndex: 'magic',\n    render: renderPlus,\n    sorter: (a, b) => a.magic - b.magic,\n  },\n  {\n    title: `Military`,\n    dataIndex: 'military',\n    render: renderPlus,\n    sorter: (a, b) => a.military - b.military,\n  },\n];\n\nconst dataSource = ({ research, extra }) =>\n  [mandatory, research === 'defense' ? defense : subsitute, extra && plus]\n    .filter(Boolean)\n    .flat(1);\n\nconst sum = (list, key) => list.reduce((acc, data) => acc + data[key], 0);\n\nexport const price = (params) => sum(dataSource(params), 'price');\n\nconst Headquarters = ({ research, extra }) => {\n  const source = dataSource({ research, extra });\n\n  return (\n    <div className=\"headquarters-upgrades\">\n      <Table\n        dataSource={source}\n        columns={columns}\n        pagination={false}\n        summary={() => {\n          return (\n            <Table.Summary.Row>\n              <Table.Summary.Cell>{`Total`}</Table.Summary.Cell>\n              <Table.Summary.Cell>\n                {nF(sum(source, 'price'))}\n              </Table.Summary.Cell>\n              <Table.Summary.Cell>{sum(source, 'magic')}</Table.Summary.Cell>\n              <Table.Summary.Cell>{sum(source, 'military')}</Table.Summary.Cell>\n            </Table.Summary.Row>\n          );\n        }}\n      />\n    </div>\n  );\n};\n\nexport default Headquarters;\n","import { useState } from 'react';\nimport { Form, Button, Card, Select } from 'antd';\nimport Headquarters, { price as headquartersPrice } from './Headquarters';\nimport { nF } from '../misc';\nimport allInvestments from '../data/investments';\n\nconst initialValues = {\n  merchantSolution2: 'neutral',\n  headquarters: 'enough',\n  orcCouncil: 0.8,\n  mandatory: [],\n};\n\nconst CustomForm = ({\n  onFinish,\n  loading,\n  firstRoundDecisions,\n  purchasedInvestments,\n}) => {\n  const [militaryExtra, setMilitaryExtra] = useState(\n    initialValues.headquarters === 'extra'\n  );\n\n  const [form] = Form.useForm();\n\n  const previousResearch = firstRoundDecisions.research;\n\n  return (\n    <Form\n      initialValues={initialValues}\n      onFinish={onFinish}\n      className=\"round-form second-round-form\"\n      form={form}\n      onValuesChange={(_, allValues) => {\n        setMilitaryExtra(allValues.headquarters === 'extra');\n      }}\n    >\n      <Card title={`Stategy`} type=\"inner\">\n        <div className=\"two-columns\">\n          <div>\n            {firstRoundDecisions.merchantSolution === 'wait' && (\n              <Form.Item label={`Merchant dispute`} name=\"merchantSolution2\">\n                <Select\n                  options={[\n                    {\n                      value: 'neutral',\n                      label: `Neutral compromise (force Social ≥ 40)`,\n                    },\n                    {\n                      value: 'givini',\n                      label: `Favor New Givini`,\n                    },\n                    {\n                      value: 'wait',\n                      label: `Wait`,\n                    },\n                  ]}\n                />\n              </Form.Item>\n            )}\n            <Form.Item name=\"orcCouncil\" label={`Orc council`}>\n              <Select\n                options={[\n                  {\n                    label: `Substantial majority (≥ 65%)`,\n                    value: 0.65,\n                  },\n                  {\n                    label: `Overwhelming majority (≥ 80%)`,\n                    value: 0.8,\n                  },\n                ]}\n              />\n            </Form.Item>\n            <Form.Item name=\"headquarters\" label={`Headquarters`}>\n              <Select\n                options={[\n                  {\n                    label: `Pay ${nF(\n                      headquartersPrice({ research: previousResearch })\n                    )} for strong magical defenses.`,\n                    value: 'enough',\n                  },\n                  {\n                    label: `Pay ${nF(\n                      headquartersPrice({\n                        research: previousResearch,\n                        extra: true,\n                      })\n                    )} for strong magical and military defenses.`,\n                    value: 'extra',\n                  },\n                ]}\n              />\n            </Form.Item>\n            <Form.Item\n              label={`Investments you explicitly want to buy now (example: Airships)`}\n              name=\"mandatory\"\n            >\n              <Select\n                options={allInvestments\n                  .filter(({ name }) => !purchasedInvestments.includes(name))\n                  .map(({ name }) => {\n                    return { label: name, value: name };\n                  })}\n                mode=\"multiple\"\n              />\n            </Form.Item>\n          </div>\n          <Headquarters research={previousResearch} extra={militaryExtra} />\n        </div>\n\n        <Form.Item>\n          <Button type=\"primary\" htmlType=\"submit\" loading={loading}>\n            {`Submit`}\n          </Button>\n        </Form.Item>\n      </Card>\n    </Form>\n  );\n};\n\nexport default CustomForm;\n","import Addition from '../../results/Addition';\nimport { roundTwoChanges } from '../../data/givini';\n\nconst Givini = ({\n  startingValue,\n  roundTwoInvestments = [],\n  decisions = {},\n}) => {\n  return (\n    <Addition\n      startingValue={startingValue}\n      dataSources={[\n        {\n          title: `Investments`,\n          dataSource: roundTwoInvestments\n            .filter(({ givini = 0 }) => givini !== 0)\n            .map(({ name, givini }) => {\n              return { label: name, values: [givini] };\n            })\n            .sort(({ label: a }, { label: b }) => a.localeCompare(b)),\n        },\n        {\n          title: `Other changes`,\n          dataSource: roundTwoChanges(decisions),\n        },\n      ]}\n    />\n  );\n};\n\nexport default Givini;\n","import Addition from '../../results/Addition';\nimport { roundTwoChanges, council } from '../../data/takkan';\nimport { Typography } from 'antd';\n\nconst { Text } = Typography;\n\nconst Takkan = ({\n  startingValue,\n  roundTwoInvestments = [],\n  decisions = {},\n  roundOneResearch,\n  previousInvestments = [],\n  takkanScore,\n}) => {\n  const councilResult = council({\n    researches: [roundOneResearch],\n    investments: [\n      ...previousInvestments,\n      ...roundTwoInvestments.map(({ name }) => name),\n    ],\n    takkan: takkanScore,\n  });\n\n  return (\n    <>\n      <Addition\n        startingValue={startingValue}\n        dataSources={[\n          {\n            title: `Investments`,\n            dataSource: roundTwoInvestments\n              .filter(({ takkan = 0 }) => takkan !== 0)\n              .map(({ name, takkan }) => {\n                return { label: name, values: [takkan] };\n              })\n              .sort(({ label: a }, { label: b }) => a.localeCompare(b)),\n          },\n          {\n            title: `Other changes`,\n            dataSource: roundTwoChanges(decisions),\n          },\n        ]}\n      />\n      <Text>\n        {`Orc council: `}\n        <Text type={councilResult >= 0.8 ? 'success' : 'warning'}>\n          {(councilResult * 100).toFixed(2)}\n          {`%`}\n        </Text>\n      </Text>\n    </>\n  );\n};\n\nexport default Takkan;\n","import Ledger from '../../results/Ledger';\nimport { Card } from 'antd';\nimport Givini from './Givini';\nimport Takkan from './Takkan';\n\nconst Result = ({\n  initialStandings,\n  nonInvestmentChanges,\n  investmentChanges,\n  decisions,\n  roundOneDecisions,\n}) => {\n  return (\n    <Card title={`Changes`} className=\"results\">\n      <Ledger\n        initialStandings={initialStandings}\n        nonInvestmentChanges={nonInvestmentChanges}\n        investmentChanges={investmentChanges}\n      />\n      <div>\n        <Card title={`New Givini`} type=\"inner\">\n          <Givini\n            startingValue={initialStandings.givini}\n            roundTwoInvestments={investmentChanges.investments}\n            decisions={decisions}\n          />\n        </Card>\n        <Card title={`Tak'Kan`} type=\"inner\">\n          <Takkan\n            startingValue={initialStandings.takkan}\n            roundTwoInvestments={investmentChanges.investments}\n            decisions={decisions}\n            takkanScore={initialStandings.takkan + investmentChanges.takkan}\n            roundOneResearch={roundOneDecisions.research}\n            previousInvestments={initialStandings.investments}\n          />\n        </Card>\n      </div>\n    </Card>\n  );\n};\n\nexport default Result;\n","import Form from './Form';\nimport { buildFinalStandings } from '../misc';\nimport Result from './results';\nimport { roundTwoValue as giviniRoundTwoValue } from '../data/givini';\nimport { price as headquartersPrice } from './Headquarters';\nimport { roundTwoValue as takkanRoundTwoValue } from '../data/takkan';\nimport { Typography } from 'antd';\nimport { useEffect, useRef } from 'react';\n\nconst { Title } = Typography;\n\nconst socialRequirement = (initialSocial, decisions) => {\n  if (decisions.merchantSolution2 === 'neutral' && initialSocial < 40) {\n    return 40 - initialSocial;\n  }\n\n  return 0;\n};\n\nconst onFinish = async ({\n  setResult,\n  runInWoker,\n  setError,\n  firstRoundResult,\n  values,\n}) => {\n  const { finalStandings: initialStandings, misc } = firstRoundResult;\n\n  const { merchantSolution2, headquarters, orcCouncil, mandatory } = values;\n  const decisions = { merchantSolution2, headquarters, orcCouncil };\n\n  const headquartersUpgradesPrice = headquartersPrice({\n    research: firstRoundResult.decisions.research,\n    extra: decisions.headquarters === 'extra',\n  });\n\n  const nonInvestmentChanges = {\n    money: -headquartersUpgradesPrice,\n    profits: 0,\n    social: 0,\n    givini: giviniRoundTwoValue(decisions),\n    takkan: takkanRoundTwoValue(),\n    list: [\n      {\n        name: `Headquarters upgrades`,\n        price: -headquartersUpgradesPrice,\n      },\n    ],\n  };\n\n  const params = {\n    ...misc,\n    previousInvestments: initialStandings.investments,\n    money:\n      initialStandings.money +\n      initialStandings.profits -\n      headquartersUpgradesPrice,\n    giviniStart: initialStandings.givini,\n    giviniExtra: nonInvestmentChanges.givini,\n    takkan: initialStandings.takkan,\n    completedResearch: [firstRoundResult.decisions.research],\n    otherRequirements: {\n      social: socialRequirement(initialStandings.social, decisions),\n      orcCouncil: decisions.orcCouncil,\n      mandatory,\n    },\n  };\n\n  const result = await runInWoker(params);\n\n  if (!result) {\n    setResult(undefined);\n    setError(\n      `Couldn't find a working combination of investments for that strategy with these starting values, sorry.`\n    );\n    return;\n  }\n\n  const investmentChanges = { ...result, money: -result.price };\n\n  setResult({\n    initialStandings,\n    decisions,\n    nonInvestmentChanges,\n    investmentChanges,\n    finalStandings: buildFinalStandings({\n      initialStandings,\n      nonInvestmentChanges,\n      investmentChanges,\n    }),\n    misc,\n  });\n  setError(undefined);\n};\n\nconst SecondRound = ({\n  runInWoker,\n  loading,\n  result,\n  setResult,\n  setError,\n  firstRoundResult,\n}) => {\n  const resultRef = useRef(null);\n  useEffect(() => {\n    if (!result || !resultRef.current) {\n      return;\n    }\n    resultRef.current.scrollIntoView({ behavior: 'smooth' });\n  }, [result, resultRef]);\n\n  return (\n    <div className=\"round-two\">\n      <Title level={2}>{`Chapter 4 – Round 2`}</Title>\n      <Form\n        onFinish={(values) => {\n          onFinish({\n            setResult,\n            runInWoker,\n            setError,\n            firstRoundResult,\n            values,\n          });\n        }}\n        loading={loading}\n        firstRoundDecisions={firstRoundResult.decisions}\n        purchasedInvestments={firstRoundResult.finalStandings.investments}\n      />\n      {result && (\n        <div ref={resultRef}>\n          <Result roundOneDecisions={firstRoundResult.decisions} {...result} />\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default SecondRound;\n","import './App.css';\nimport FirstRound from './first-round';\nimport { useEffect, useState } from 'react';\nimport worker from 'workerize-loader!./worker'; // eslint-disable-line import/no-webpack-loader-syntax\nimport Disclaimer from './Disclaimer';\nimport Loading from './Loading';\nimport Failure from './Failure';\nimport SecondRound from './second-round';\n\nlet dumbCache = {};\nconst dumbKey = (params) => JSON.stringify(params);\n\nconst buildRunInWorker =\n  ({\n    workerInstance,\n    setLoading,\n    setCombinationsCount,\n    setProgress,\n    setInvestmentsCount,\n    setPreprogress,\n  }) =>\n  async (params) => {\n    const cacheKey = dumbKey(params);\n    if (!!dumbCache[cacheKey]) {\n      return dumbCache[cacheKey];\n    }\n\n    setLoading(true);\n\n    const investmentsCount = await workerInstance.prepare(params);\n    setInvestmentsCount(investmentsCount);\n    setPreprogress(0);\n    let combinationsCount = 0;\n    for (let i = 0; i <= investmentsCount; i++) {\n      combinationsCount += await workerInstance.preprocess();\n      setPreprogress(i / investmentsCount);\n    }\n\n    setCombinationsCount(combinationsCount);\n    setProgress(0);\n    const batchSize = 10000;\n    let result;\n    for (let i = 0; i < Math.ceil(combinationsCount / batchSize); i++) {\n      const end = Math.min((i + 1) * batchSize, combinationsCount);\n      result = await workerInstance.process(i * batchSize, end);\n      setProgress(end / combinationsCount);\n    }\n\n    await workerInstance.clean();\n\n    setLoading(false);\n    setCombinationsCount(undefined);\n    setInvestmentsCount(undefined);\n    setProgress(0);\n    setPreprogress(0);\n\n    dumbCache[cacheKey] = result;\n\n    return result;\n  };\n\nconst App = () => {\n  const [workerInstance, setWorkerInstance] = useState();\n  const [loading, setLoading] = useState(false);\n  const [combinationsCount, setCombinationsCount] = useState();\n  const [progress, setProgress] = useState(0);\n  const [investmentsCount, setInvestmentsCount] = useState();\n  const [preprogress, setPreprogress] = useState(0);\n\n  const [firstRoundResult, setFirstRoundResult] = useState();\n  const [secondRoundResult, setSecondRoundResult] = useState();\n  const [error, setError] = useState();\n\n  useEffect(() => {\n    if (!workerInstance) {\n      setWorkerInstance(worker());\n    }\n\n    return () => {\n      workerInstance?.terminate();\n    };\n  }, [workerInstance]);\n\n  if (!workerInstance) {\n    return null;\n  }\n\n  const runInWoker = buildRunInWorker({\n    workerInstance,\n    setLoading,\n    setCombinationsCount,\n    setProgress,\n    setInvestmentsCount,\n    setPreprogress,\n  });\n\n  const abort = async () => {\n    workerInstance.terminate();\n\n    const newWorkerInstance = worker();\n    await newWorkerInstance.clean();\n\n    setWorkerInstance(newWorkerInstance);\n\n    setCombinationsCount(undefined);\n    setInvestmentsCount(undefined);\n    setProgress(0);\n    setPreprogress(0);\n\n    setLoading(false);\n  };\n\n  return (\n    <div>\n      <Disclaimer />\n      <FirstRound\n        runInWoker={runInWoker}\n        loading={loading}\n        result={firstRoundResult}\n        setResult={(data) => {\n          setSecondRoundResult(undefined);\n          setFirstRoundResult(data);\n        }}\n        setError={(error) => {\n          setSecondRoundResult(undefined);\n          setError(error);\n        }}\n      />\n      {firstRoundResult && (\n        <SecondRound\n          runInWoker={runInWoker}\n          loading={loading}\n          result={secondRoundResult}\n          setResult={setSecondRoundResult}\n          setError={setError}\n          firstRoundResult={firstRoundResult}\n        />\n      )}\n      {loading && (\n        <Loading\n          combinationsCount={combinationsCount}\n          progress={progress}\n          preprogress={preprogress}\n          investmentsCount={investmentsCount}\n          abort={abort}\n        />\n      )}\n      {error && <Failure message={error} />}\n    </div>\n  );\n};\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}